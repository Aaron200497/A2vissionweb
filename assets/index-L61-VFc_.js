function yE(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function vE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var pg={exports:{}},ol={},mg={exports:{}},te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eo=Symbol.for("react.element"),_E=Symbol.for("react.portal"),EE=Symbol.for("react.fragment"),wE=Symbol.for("react.strict_mode"),TE=Symbol.for("react.profiler"),xE=Symbol.for("react.provider"),SE=Symbol.for("react.context"),IE=Symbol.for("react.forward_ref"),AE=Symbol.for("react.suspense"),CE=Symbol.for("react.memo"),RE=Symbol.for("react.lazy"),Bf=Symbol.iterator;function PE(t){return t===null||typeof t!="object"?null:(t=Bf&&t[Bf]||t["@@iterator"],typeof t=="function"?t:null)}var gg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},yg=Object.assign,vg={};function Is(t,e,n){this.props=t,this.context=e,this.refs=vg,this.updater=n||gg}Is.prototype.isReactComponent={};Is.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Is.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function _g(){}_g.prototype=Is.prototype;function lh(t,e,n){this.props=t,this.context=e,this.refs=vg,this.updater=n||gg}var uh=lh.prototype=new _g;uh.constructor=lh;yg(uh,Is.prototype);uh.isPureReactComponent=!0;var $f=Array.isArray,Eg=Object.prototype.hasOwnProperty,ch={current:null},wg={key:!0,ref:!0,__self:!0,__source:!0};function Tg(t,e,n){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)Eg.call(e,r)&&!wg.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),h=0;h<l;h++)u[h]=arguments[h+2];s.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:eo,type:t,key:i,ref:a,props:s,_owner:ch.current}}function kE(t,e){return{$$typeof:eo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function hh(t){return typeof t=="object"&&t!==null&&t.$$typeof===eo}function NE(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var qf=/\/+/g;function lu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?NE(""+t.key):e.toString(36)}function Zo(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case eo:case _E:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+lu(a,0):r,$f(s)?(n="",t!=null&&(n=t.replace(qf,"$&/")+"/"),Zo(s,e,n,"",function(h){return h})):s!=null&&(hh(s)&&(s=kE(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(qf,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",$f(t))for(var l=0;l<t.length;l++){i=t[l];var u=r+lu(i,l);a+=Zo(i,e,n,u,s)}else if(u=PE(t),typeof u=="function")for(t=u.call(t),l=0;!(i=t.next()).done;)i=i.value,u=r+lu(i,l++),a+=Zo(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function ko(t,e,n){if(t==null)return t;var r=[],s=0;return Zo(t,r,"","",function(i){return e.call(n,i,s++)}),r}function VE(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ht={current:null},ea={transition:null},DE={ReactCurrentDispatcher:ht,ReactCurrentBatchConfig:ea,ReactCurrentOwner:ch};function xg(){throw Error("act(...) is not supported in production builds of React.")}te.Children={map:ko,forEach:function(t,e,n){ko(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ko(t,function(){e++}),e},toArray:function(t){return ko(t,function(e){return e})||[]},only:function(t){if(!hh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};te.Component=Is;te.Fragment=EE;te.Profiler=TE;te.PureComponent=lh;te.StrictMode=wE;te.Suspense=AE;te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=DE;te.act=xg;te.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=yg({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=ch.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)Eg.call(e,u)&&!wg.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var h=0;h<u;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:eo,type:t.type,key:s,ref:i,props:r,_owner:a}};te.createContext=function(t){return t={$$typeof:SE,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:xE,_context:t},t.Consumer=t};te.createElement=Tg;te.createFactory=function(t){var e=Tg.bind(null,t);return e.type=t,e};te.createRef=function(){return{current:null}};te.forwardRef=function(t){return{$$typeof:IE,render:t}};te.isValidElement=hh;te.lazy=function(t){return{$$typeof:RE,_payload:{_status:-1,_result:t},_init:VE}};te.memo=function(t,e){return{$$typeof:CE,type:t,compare:e===void 0?null:e}};te.startTransition=function(t){var e=ea.transition;ea.transition={};try{t()}finally{ea.transition=e}};te.unstable_act=xg;te.useCallback=function(t,e){return ht.current.useCallback(t,e)};te.useContext=function(t){return ht.current.useContext(t)};te.useDebugValue=function(){};te.useDeferredValue=function(t){return ht.current.useDeferredValue(t)};te.useEffect=function(t,e){return ht.current.useEffect(t,e)};te.useId=function(){return ht.current.useId()};te.useImperativeHandle=function(t,e,n){return ht.current.useImperativeHandle(t,e,n)};te.useInsertionEffect=function(t,e){return ht.current.useInsertionEffect(t,e)};te.useLayoutEffect=function(t,e){return ht.current.useLayoutEffect(t,e)};te.useMemo=function(t,e){return ht.current.useMemo(t,e)};te.useReducer=function(t,e,n){return ht.current.useReducer(t,e,n)};te.useRef=function(t){return ht.current.useRef(t)};te.useState=function(t){return ht.current.useState(t)};te.useSyncExternalStore=function(t,e,n){return ht.current.useSyncExternalStore(t,e,n)};te.useTransition=function(){return ht.current.useTransition()};te.version="18.3.1";mg.exports=te;var O=mg.exports;const Sg=vE(O),jE=yE({__proto__:null,default:Sg},[O]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LE=O,OE=Symbol.for("react.element"),bE=Symbol.for("react.fragment"),ME=Object.prototype.hasOwnProperty,FE=LE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,UE={key:!0,ref:!0,__self:!0,__source:!0};function Ig(t,e,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)ME.call(e,r)&&!UE.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:OE,type:t,key:i,ref:a,props:s,_owner:FE.current}}ol.Fragment=bE;ol.jsx=Ig;ol.jsxs=Ig;pg.exports=ol;var p=pg.exports,qu={},Ag={exports:{}},St={},Cg={exports:{}},Rg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(M,W){var X=M.length;M.push(W);e:for(;0<X;){var ue=X-1>>>1,Y=M[ue];if(0<s(Y,W))M[ue]=W,M[X]=Y,X=ue;else break e}}function n(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var W=M[0],X=M.pop();if(X!==W){M[0]=X;e:for(var ue=0,Y=M.length,me=Y>>>1;ue<me;){var Qe=2*(ue+1)-1,Zt=M[Qe],en=Qe+1,tn=M[en];if(0>s(Zt,X))en<Y&&0>s(tn,Zt)?(M[ue]=tn,M[en]=X,ue=en):(M[ue]=Zt,M[Qe]=X,ue=Qe);else if(en<Y&&0>s(tn,X))M[ue]=tn,M[en]=X,ue=en;else break e}}return W}function s(M,W){var X=M.sortIndex-W.sortIndex;return X!==0?X:M.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],h=[],f=1,m=null,v=3,A=!1,R=!1,N=!1,V=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(M){for(var W=n(h);W!==null;){if(W.callback===null)r(h);else if(W.startTime<=M)r(h),W.sortIndex=W.expirationTime,e(u,W);else break;W=n(h)}}function j(M){if(N=!1,I(M),!R)if(n(u)!==null)R=!0,he(z);else{var W=n(h);W!==null&&de(j,W.startTime-M)}}function z(M,W){R=!1,N&&(N=!1,T(y),y=-1),A=!0;var X=v;try{for(I(W),m=n(u);m!==null&&(!(m.expirationTime>W)||M&&!C());){var ue=m.callback;if(typeof ue=="function"){m.callback=null,v=m.priorityLevel;var Y=ue(m.expirationTime<=W);W=t.unstable_now(),typeof Y=="function"?m.callback=Y:m===n(u)&&r(u),I(W)}else r(u);m=n(u)}if(m!==null)var me=!0;else{var Qe=n(h);Qe!==null&&de(j,Qe.startTime-W),me=!1}return me}finally{m=null,v=X,A=!1}}var $=!1,w=null,y=-1,E=5,S=-1;function C(){return!(t.unstable_now()-S<E)}function P(){if(w!==null){var M=t.unstable_now();S=M;var W=!0;try{W=w(!0,M)}finally{W?x():($=!1,w=null)}}else $=!1}var x;if(typeof _=="function")x=function(){_(P)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,ae=U.port2;U.port1.onmessage=P,x=function(){ae.postMessage(null)}}else x=function(){V(P,0)};function he(M){w=M,$||($=!0,x())}function de(M,W){y=V(function(){M(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_continueExecution=function(){R||A||(R=!0,he(z))},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(M){switch(v){case 1:case 2:case 3:var W=3;break;default:W=v}var X=v;v=W;try{return M()}finally{v=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(M,W){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var X=v;v=M;try{return W()}finally{v=X}},t.unstable_scheduleCallback=function(M,W,X){var ue=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?ue+X:ue):X=ue,M){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=X+Y,M={id:f++,callback:W,priorityLevel:M,startTime:X,expirationTime:Y,sortIndex:-1},X>ue?(M.sortIndex=X,e(h,M),n(u)===null&&M===n(h)&&(N?(T(y),y=-1):N=!0,de(j,X-ue))):(M.sortIndex=Y,e(u,M),R||A||(R=!0,he(z))),M},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(M){var W=v;return function(){var X=v;v=W;try{return M.apply(this,arguments)}finally{v=X}}}})(Rg);Cg.exports=Rg;var zE=Cg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BE=O,xt=zE;function F(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Pg=new Set,xi={};function Cr(t,e){hs(t,e),hs(t+"Capture",e)}function hs(t,e){for(xi[t]=e,t=0;t<e.length;t++)Pg.add(e[t])}var fn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hu=Object.prototype.hasOwnProperty,$E=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Hf={},Wf={};function qE(t){return Hu.call(Wf,t)?!0:Hu.call(Hf,t)?!1:$E.test(t)?Wf[t]=!0:(Hf[t]=!0,!1)}function HE(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function WE(t,e,n,r){if(e===null||typeof e>"u"||HE(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function dt(t,e,n,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var We={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){We[t]=new dt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];We[e]=new dt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){We[t]=new dt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){We[t]=new dt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){We[t]=new dt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){We[t]=new dt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){We[t]=new dt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){We[t]=new dt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){We[t]=new dt(t,5,!1,t.toLowerCase(),null,!1,!1)});var dh=/[\-:]([a-z])/g;function fh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(dh,fh);We[e]=new dt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(dh,fh);We[e]=new dt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(dh,fh);We[e]=new dt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){We[t]=new dt(t,1,!1,t.toLowerCase(),null,!1,!1)});We.xlinkHref=new dt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){We[t]=new dt(t,1,!1,t.toLowerCase(),null,!0,!0)});function ph(t,e,n,r){var s=We.hasOwnProperty(e)?We[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(WE(e,n,s,r)&&(n=null),r||s===null?qE(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var En=BE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,No=Symbol.for("react.element"),Hr=Symbol.for("react.portal"),Wr=Symbol.for("react.fragment"),mh=Symbol.for("react.strict_mode"),Wu=Symbol.for("react.profiler"),kg=Symbol.for("react.provider"),Ng=Symbol.for("react.context"),gh=Symbol.for("react.forward_ref"),Ku=Symbol.for("react.suspense"),Qu=Symbol.for("react.suspense_list"),yh=Symbol.for("react.memo"),In=Symbol.for("react.lazy"),Vg=Symbol.for("react.offscreen"),Kf=Symbol.iterator;function Qs(t){return t===null||typeof t!="object"?null:(t=Kf&&t[Kf]||t["@@iterator"],typeof t=="function"?t:null)}var xe=Object.assign,uu;function ri(t){if(uu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);uu=e&&e[1]||""}return`
`+uu+t}var cu=!1;function hu(t,e){if(!t||cu)return"";cu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var s=h.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var u=`
`+s[a].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=a&&0<=l);break}}}finally{cu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ri(t):""}function KE(t){switch(t.tag){case 5:return ri(t.type);case 16:return ri("Lazy");case 13:return ri("Suspense");case 19:return ri("SuspenseList");case 0:case 2:case 15:return t=hu(t.type,!1),t;case 11:return t=hu(t.type.render,!1),t;case 1:return t=hu(t.type,!0),t;default:return""}}function Gu(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Wr:return"Fragment";case Hr:return"Portal";case Wu:return"Profiler";case mh:return"StrictMode";case Ku:return"Suspense";case Qu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Ng:return(t.displayName||"Context")+".Consumer";case kg:return(t._context.displayName||"Context")+".Provider";case gh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case yh:return e=t.displayName||null,e!==null?e:Gu(t.type)||"Memo";case In:e=t._payload,t=t._init;try{return Gu(t(e))}catch{}}return null}function QE(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Gu(e);case 8:return e===mh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Kn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Dg(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function GE(t){var e=Dg(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Vo(t){t._valueTracker||(t._valueTracker=GE(t))}function jg(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Dg(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ya(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Yu(t,e){var n=e.checked;return xe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Qf(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Kn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Lg(t,e){e=e.checked,e!=null&&ph(t,"checked",e,!1)}function Xu(t,e){Lg(t,e);var n=Kn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ju(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ju(t,e.type,Kn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Gf(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ju(t,e,n){(e!=="number"||ya(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var si=Array.isArray;function rs(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Kn(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Zu(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(F(91));return xe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Yf(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(F(92));if(si(n)){if(1<n.length)throw Error(F(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Kn(n)}}function Og(t,e){var n=Kn(e.value),r=Kn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Xf(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function bg(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ec(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?bg(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Do,Mg=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Do=Do||document.createElement("div"),Do.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Do.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Si(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ci={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},YE=["Webkit","ms","Moz","O"];Object.keys(ci).forEach(function(t){YE.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ci[e]=ci[t]})});function Fg(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ci.hasOwnProperty(t)&&ci[t]?(""+e).trim():e+"px"}function Ug(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Fg(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var XE=xe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function tc(t,e){if(e){if(XE[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(F(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(F(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(F(61))}if(e.style!=null&&typeof e.style!="object")throw Error(F(62))}}function nc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rc=null;function vh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var sc=null,ss=null,is=null;function Jf(t){if(t=ro(t)){if(typeof sc!="function")throw Error(F(280));var e=t.stateNode;e&&(e=hl(e),sc(t.stateNode,t.type,e))}}function zg(t){ss?is?is.push(t):is=[t]:ss=t}function Bg(){if(ss){var t=ss,e=is;if(is=ss=null,Jf(t),e)for(t=0;t<e.length;t++)Jf(e[t])}}function $g(t,e){return t(e)}function qg(){}var du=!1;function Hg(t,e,n){if(du)return t(e,n);du=!0;try{return $g(t,e,n)}finally{du=!1,(ss!==null||is!==null)&&(qg(),Bg())}}function Ii(t,e){var n=t.stateNode;if(n===null)return null;var r=hl(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(F(231,e,typeof n));return n}var ic=!1;if(fn)try{var Gs={};Object.defineProperty(Gs,"passive",{get:function(){ic=!0}}),window.addEventListener("test",Gs,Gs),window.removeEventListener("test",Gs,Gs)}catch{ic=!1}function JE(t,e,n,r,s,i,a,l,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(f){this.onError(f)}}var hi=!1,va=null,_a=!1,oc=null,ZE={onError:function(t){hi=!0,va=t}};function ew(t,e,n,r,s,i,a,l,u){hi=!1,va=null,JE.apply(ZE,arguments)}function tw(t,e,n,r,s,i,a,l,u){if(ew.apply(this,arguments),hi){if(hi){var h=va;hi=!1,va=null}else throw Error(F(198));_a||(_a=!0,oc=h)}}function Rr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Wg(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Zf(t){if(Rr(t)!==t)throw Error(F(188))}function nw(t){var e=t.alternate;if(!e){if(e=Rr(t),e===null)throw Error(F(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Zf(s),t;if(i===r)return Zf(s),e;i=i.sibling}throw Error(F(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a)throw Error(F(189))}}if(n.alternate!==r)throw Error(F(190))}if(n.tag!==3)throw Error(F(188));return n.stateNode.current===n?t:e}function Kg(t){return t=nw(t),t!==null?Qg(t):null}function Qg(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Qg(t);if(e!==null)return e;t=t.sibling}return null}var Gg=xt.unstable_scheduleCallback,ep=xt.unstable_cancelCallback,rw=xt.unstable_shouldYield,sw=xt.unstable_requestPaint,Re=xt.unstable_now,iw=xt.unstable_getCurrentPriorityLevel,_h=xt.unstable_ImmediatePriority,Yg=xt.unstable_UserBlockingPriority,Ea=xt.unstable_NormalPriority,ow=xt.unstable_LowPriority,Xg=xt.unstable_IdlePriority,al=null,Kt=null;function aw(t){if(Kt&&typeof Kt.onCommitFiberRoot=="function")try{Kt.onCommitFiberRoot(al,t,void 0,(t.current.flags&128)===128)}catch{}}var Ut=Math.clz32?Math.clz32:cw,lw=Math.log,uw=Math.LN2;function cw(t){return t>>>=0,t===0?32:31-(lw(t)/uw|0)|0}var jo=64,Lo=4194304;function ii(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function wa(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?r=ii(l):(i&=a,i!==0&&(r=ii(i)))}else a=n&~s,a!==0?r=ii(a):i!==0&&(r=ii(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ut(e),s=1<<n,r|=t[n],e&=~s;return r}function hw(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dw(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-Ut(i),l=1<<a,u=s[a];u===-1?(!(l&n)||l&r)&&(s[a]=hw(l,e)):u<=e&&(t.expiredLanes|=l),i&=~l}}function ac(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Jg(){var t=jo;return jo<<=1,!(jo&4194240)&&(jo=64),t}function fu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function to(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ut(e),t[e]=n}function fw(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Ut(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Eh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ut(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ce=0;function Zg(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var ey,wh,ty,ny,ry,lc=!1,Oo=[],Dn=null,jn=null,Ln=null,Ai=new Map,Ci=new Map,Cn=[],pw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function tp(t,e){switch(t){case"focusin":case"focusout":Dn=null;break;case"dragenter":case"dragleave":jn=null;break;case"mouseover":case"mouseout":Ln=null;break;case"pointerover":case"pointerout":Ai.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ci.delete(e.pointerId)}}function Ys(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=ro(e),e!==null&&wh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function mw(t,e,n,r,s){switch(e){case"focusin":return Dn=Ys(Dn,t,e,n,r,s),!0;case"dragenter":return jn=Ys(jn,t,e,n,r,s),!0;case"mouseover":return Ln=Ys(Ln,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ai.set(i,Ys(Ai.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Ci.set(i,Ys(Ci.get(i)||null,t,e,n,r,s)),!0}return!1}function sy(t){var e=fr(t.target);if(e!==null){var n=Rr(e);if(n!==null){if(e=n.tag,e===13){if(e=Wg(n),e!==null){t.blockedOn=e,ry(t.priority,function(){ty(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ta(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=uc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);rc=r,n.target.dispatchEvent(r),rc=null}else return e=ro(n),e!==null&&wh(e),t.blockedOn=n,!1;e.shift()}return!0}function np(t,e,n){ta(t)&&n.delete(e)}function gw(){lc=!1,Dn!==null&&ta(Dn)&&(Dn=null),jn!==null&&ta(jn)&&(jn=null),Ln!==null&&ta(Ln)&&(Ln=null),Ai.forEach(np),Ci.forEach(np)}function Xs(t,e){t.blockedOn===e&&(t.blockedOn=null,lc||(lc=!0,xt.unstable_scheduleCallback(xt.unstable_NormalPriority,gw)))}function Ri(t){function e(s){return Xs(s,t)}if(0<Oo.length){Xs(Oo[0],t);for(var n=1;n<Oo.length;n++){var r=Oo[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Dn!==null&&Xs(Dn,t),jn!==null&&Xs(jn,t),Ln!==null&&Xs(Ln,t),Ai.forEach(e),Ci.forEach(e),n=0;n<Cn.length;n++)r=Cn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Cn.length&&(n=Cn[0],n.blockedOn===null);)sy(n),n.blockedOn===null&&Cn.shift()}var os=En.ReactCurrentBatchConfig,Ta=!0;function yw(t,e,n,r){var s=ce,i=os.transition;os.transition=null;try{ce=1,Th(t,e,n,r)}finally{ce=s,os.transition=i}}function vw(t,e,n,r){var s=ce,i=os.transition;os.transition=null;try{ce=4,Th(t,e,n,r)}finally{ce=s,os.transition=i}}function Th(t,e,n,r){if(Ta){var s=uc(t,e,n,r);if(s===null)xu(t,e,r,xa,n),tp(t,r);else if(mw(s,t,e,n,r))r.stopPropagation();else if(tp(t,r),e&4&&-1<pw.indexOf(t)){for(;s!==null;){var i=ro(s);if(i!==null&&ey(i),i=uc(t,e,n,r),i===null&&xu(t,e,r,xa,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else xu(t,e,r,null,n)}}var xa=null;function uc(t,e,n,r){if(xa=null,t=vh(r),t=fr(t),t!==null)if(e=Rr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Wg(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return xa=t,null}function iy(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(iw()){case _h:return 1;case Yg:return 4;case Ea:case ow:return 16;case Xg:return 536870912;default:return 16}default:return 16}}var Pn=null,xh=null,na=null;function oy(){if(na)return na;var t,e=xh,n=e.length,r,s="value"in Pn?Pn.value:Pn.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return na=s.slice(t,1<r?1-r:void 0)}function ra(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function bo(){return!0}function rp(){return!1}function It(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?bo:rp,this.isPropagationStopped=rp,this}return xe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=bo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=bo)},persist:function(){},isPersistent:bo}),e}var As={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sh=It(As),no=xe({},As,{view:0,detail:0}),_w=It(no),pu,mu,Js,ll=xe({},no,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ih,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Js&&(Js&&t.type==="mousemove"?(pu=t.screenX-Js.screenX,mu=t.screenY-Js.screenY):mu=pu=0,Js=t),pu)},movementY:function(t){return"movementY"in t?t.movementY:mu}}),sp=It(ll),Ew=xe({},ll,{dataTransfer:0}),ww=It(Ew),Tw=xe({},no,{relatedTarget:0}),gu=It(Tw),xw=xe({},As,{animationName:0,elapsedTime:0,pseudoElement:0}),Sw=It(xw),Iw=xe({},As,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Aw=It(Iw),Cw=xe({},As,{data:0}),ip=It(Cw),Rw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Pw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nw(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=kw[t])?!!e[t]:!1}function Ih(){return Nw}var Vw=xe({},no,{key:function(t){if(t.key){var e=Rw[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ra(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Pw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ih,charCode:function(t){return t.type==="keypress"?ra(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ra(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Dw=It(Vw),jw=xe({},ll,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),op=It(jw),Lw=xe({},no,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ih}),Ow=It(Lw),bw=xe({},As,{propertyName:0,elapsedTime:0,pseudoElement:0}),Mw=It(bw),Fw=xe({},ll,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Uw=It(Fw),zw=[9,13,27,32],Ah=fn&&"CompositionEvent"in window,di=null;fn&&"documentMode"in document&&(di=document.documentMode);var Bw=fn&&"TextEvent"in window&&!di,ay=fn&&(!Ah||di&&8<di&&11>=di),ap=" ",lp=!1;function ly(t,e){switch(t){case"keyup":return zw.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function uy(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Kr=!1;function $w(t,e){switch(t){case"compositionend":return uy(e);case"keypress":return e.which!==32?null:(lp=!0,ap);case"textInput":return t=e.data,t===ap&&lp?null:t;default:return null}}function qw(t,e){if(Kr)return t==="compositionend"||!Ah&&ly(t,e)?(t=oy(),na=xh=Pn=null,Kr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ay&&e.locale!=="ko"?null:e.data;default:return null}}var Hw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function up(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Hw[t.type]:e==="textarea"}function cy(t,e,n,r){zg(r),e=Sa(e,"onChange"),0<e.length&&(n=new Sh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var fi=null,Pi=null;function Ww(t){wy(t,0)}function ul(t){var e=Yr(t);if(jg(e))return t}function Kw(t,e){if(t==="change")return e}var hy=!1;if(fn){var yu;if(fn){var vu="oninput"in document;if(!vu){var cp=document.createElement("div");cp.setAttribute("oninput","return;"),vu=typeof cp.oninput=="function"}yu=vu}else yu=!1;hy=yu&&(!document.documentMode||9<document.documentMode)}function hp(){fi&&(fi.detachEvent("onpropertychange",dy),Pi=fi=null)}function dy(t){if(t.propertyName==="value"&&ul(Pi)){var e=[];cy(e,Pi,t,vh(t)),Hg(Ww,e)}}function Qw(t,e,n){t==="focusin"?(hp(),fi=e,Pi=n,fi.attachEvent("onpropertychange",dy)):t==="focusout"&&hp()}function Gw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ul(Pi)}function Yw(t,e){if(t==="click")return ul(e)}function Xw(t,e){if(t==="input"||t==="change")return ul(e)}function Jw(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Bt=typeof Object.is=="function"?Object.is:Jw;function ki(t,e){if(Bt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Hu.call(e,s)||!Bt(t[s],e[s]))return!1}return!0}function dp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function fp(t,e){var n=dp(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=dp(n)}}function fy(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?fy(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function py(){for(var t=window,e=ya();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ya(t.document)}return e}function Ch(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Zw(t){var e=py(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&fy(n.ownerDocument.documentElement,n)){if(r!==null&&Ch(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=fp(n,i);var a=fp(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var eT=fn&&"documentMode"in document&&11>=document.documentMode,Qr=null,cc=null,pi=null,hc=!1;function pp(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;hc||Qr==null||Qr!==ya(r)||(r=Qr,"selectionStart"in r&&Ch(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),pi&&ki(pi,r)||(pi=r,r=Sa(cc,"onSelect"),0<r.length&&(e=new Sh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Qr)))}function Mo(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Gr={animationend:Mo("Animation","AnimationEnd"),animationiteration:Mo("Animation","AnimationIteration"),animationstart:Mo("Animation","AnimationStart"),transitionend:Mo("Transition","TransitionEnd")},_u={},my={};fn&&(my=document.createElement("div").style,"AnimationEvent"in window||(delete Gr.animationend.animation,delete Gr.animationiteration.animation,delete Gr.animationstart.animation),"TransitionEvent"in window||delete Gr.transitionend.transition);function cl(t){if(_u[t])return _u[t];if(!Gr[t])return t;var e=Gr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in my)return _u[t]=e[n];return t}var gy=cl("animationend"),yy=cl("animationiteration"),vy=cl("animationstart"),_y=cl("transitionend"),Ey=new Map,mp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function nr(t,e){Ey.set(t,e),Cr(e,[t])}for(var Eu=0;Eu<mp.length;Eu++){var wu=mp[Eu],tT=wu.toLowerCase(),nT=wu[0].toUpperCase()+wu.slice(1);nr(tT,"on"+nT)}nr(gy,"onAnimationEnd");nr(yy,"onAnimationIteration");nr(vy,"onAnimationStart");nr("dblclick","onDoubleClick");nr("focusin","onFocus");nr("focusout","onBlur");nr(_y,"onTransitionEnd");hs("onMouseEnter",["mouseout","mouseover"]);hs("onMouseLeave",["mouseout","mouseover"]);hs("onPointerEnter",["pointerout","pointerover"]);hs("onPointerLeave",["pointerout","pointerover"]);Cr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Cr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Cr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Cr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Cr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Cr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var oi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rT=new Set("cancel close invalid load scroll toggle".split(" ").concat(oi));function gp(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,tw(r,e,void 0,t),t.currentTarget=null}function wy(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var l=r[a],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;gp(s,l,h),i=u}else for(a=0;a<r.length;a++){if(l=r[a],u=l.instance,h=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;gp(s,l,h),i=u}}}if(_a)throw t=oc,_a=!1,oc=null,t}function ye(t,e){var n=e[gc];n===void 0&&(n=e[gc]=new Set);var r=t+"__bubble";n.has(r)||(Ty(e,t,2,!1),n.add(r))}function Tu(t,e,n){var r=0;e&&(r|=4),Ty(n,t,r,e)}var Fo="_reactListening"+Math.random().toString(36).slice(2);function Ni(t){if(!t[Fo]){t[Fo]=!0,Pg.forEach(function(n){n!=="selectionchange"&&(rT.has(n)||Tu(n,!1,t),Tu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Fo]||(e[Fo]=!0,Tu("selectionchange",!1,e))}}function Ty(t,e,n,r){switch(iy(e)){case 1:var s=yw;break;case 4:s=vw;break;default:s=Th}n=s.bind(null,e,n,t),s=void 0,!ic||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function xu(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;a=a.return}for(;l!==null;){if(a=fr(l),a===null)return;if(u=a.tag,u===5||u===6){r=i=a;continue e}l=l.parentNode}}r=r.return}Hg(function(){var h=i,f=vh(n),m=[];e:{var v=Ey.get(t);if(v!==void 0){var A=Sh,R=t;switch(t){case"keypress":if(ra(n)===0)break e;case"keydown":case"keyup":A=Dw;break;case"focusin":R="focus",A=gu;break;case"focusout":R="blur",A=gu;break;case"beforeblur":case"afterblur":A=gu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":A=sp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":A=ww;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":A=Ow;break;case gy:case yy:case vy:A=Sw;break;case _y:A=Mw;break;case"scroll":A=_w;break;case"wheel":A=Uw;break;case"copy":case"cut":case"paste":A=Aw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":A=op}var N=(e&4)!==0,V=!N&&t==="scroll",T=N?v!==null?v+"Capture":null:v;N=[];for(var _=h,I;_!==null;){I=_;var j=I.stateNode;if(I.tag===5&&j!==null&&(I=j,T!==null&&(j=Ii(_,T),j!=null&&N.push(Vi(_,j,I)))),V)break;_=_.return}0<N.length&&(v=new A(v,R,null,n,f),m.push({event:v,listeners:N}))}}if(!(e&7)){e:{if(v=t==="mouseover"||t==="pointerover",A=t==="mouseout"||t==="pointerout",v&&n!==rc&&(R=n.relatedTarget||n.fromElement)&&(fr(R)||R[pn]))break e;if((A||v)&&(v=f.window===f?f:(v=f.ownerDocument)?v.defaultView||v.parentWindow:window,A?(R=n.relatedTarget||n.toElement,A=h,R=R?fr(R):null,R!==null&&(V=Rr(R),R!==V||R.tag!==5&&R.tag!==6)&&(R=null)):(A=null,R=h),A!==R)){if(N=sp,j="onMouseLeave",T="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(N=op,j="onPointerLeave",T="onPointerEnter",_="pointer"),V=A==null?v:Yr(A),I=R==null?v:Yr(R),v=new N(j,_+"leave",A,n,f),v.target=V,v.relatedTarget=I,j=null,fr(f)===h&&(N=new N(T,_+"enter",R,n,f),N.target=I,N.relatedTarget=V,j=N),V=j,A&&R)t:{for(N=A,T=R,_=0,I=N;I;I=Fr(I))_++;for(I=0,j=T;j;j=Fr(j))I++;for(;0<_-I;)N=Fr(N),_--;for(;0<I-_;)T=Fr(T),I--;for(;_--;){if(N===T||T!==null&&N===T.alternate)break t;N=Fr(N),T=Fr(T)}N=null}else N=null;A!==null&&yp(m,v,A,N,!1),R!==null&&V!==null&&yp(m,V,R,N,!0)}}e:{if(v=h?Yr(h):window,A=v.nodeName&&v.nodeName.toLowerCase(),A==="select"||A==="input"&&v.type==="file")var z=Kw;else if(up(v))if(hy)z=Xw;else{z=Gw;var $=Qw}else(A=v.nodeName)&&A.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(z=Yw);if(z&&(z=z(t,h))){cy(m,z,n,f);break e}$&&$(t,v,h),t==="focusout"&&($=v._wrapperState)&&$.controlled&&v.type==="number"&&Ju(v,"number",v.value)}switch($=h?Yr(h):window,t){case"focusin":(up($)||$.contentEditable==="true")&&(Qr=$,cc=h,pi=null);break;case"focusout":pi=cc=Qr=null;break;case"mousedown":hc=!0;break;case"contextmenu":case"mouseup":case"dragend":hc=!1,pp(m,n,f);break;case"selectionchange":if(eT)break;case"keydown":case"keyup":pp(m,n,f)}var w;if(Ah)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Kr?ly(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(ay&&n.locale!=="ko"&&(Kr||y!=="onCompositionStart"?y==="onCompositionEnd"&&Kr&&(w=oy()):(Pn=f,xh="value"in Pn?Pn.value:Pn.textContent,Kr=!0)),$=Sa(h,y),0<$.length&&(y=new ip(y,t,null,n,f),m.push({event:y,listeners:$}),w?y.data=w:(w=uy(n),w!==null&&(y.data=w)))),(w=Bw?$w(t,n):qw(t,n))&&(h=Sa(h,"onBeforeInput"),0<h.length&&(f=new ip("onBeforeInput","beforeinput",null,n,f),m.push({event:f,listeners:h}),f.data=w))}wy(m,e)})}function Vi(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Sa(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ii(t,n),i!=null&&r.unshift(Vi(t,i,s)),i=Ii(t,e),i!=null&&r.push(Vi(t,i,s))),t=t.return}return r}function Fr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function yp(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var l=n,u=l.alternate,h=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&h!==null&&(l=h,s?(u=Ii(n,i),u!=null&&a.unshift(Vi(n,u,l))):s||(u=Ii(n,i),u!=null&&a.push(Vi(n,u,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var sT=/\r\n?/g,iT=/\u0000|\uFFFD/g;function vp(t){return(typeof t=="string"?t:""+t).replace(sT,`
`).replace(iT,"")}function Uo(t,e,n){if(e=vp(e),vp(t)!==e&&n)throw Error(F(425))}function Ia(){}var dc=null,fc=null;function pc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var mc=typeof setTimeout=="function"?setTimeout:void 0,oT=typeof clearTimeout=="function"?clearTimeout:void 0,_p=typeof Promise=="function"?Promise:void 0,aT=typeof queueMicrotask=="function"?queueMicrotask:typeof _p<"u"?function(t){return _p.resolve(null).then(t).catch(lT)}:mc;function lT(t){setTimeout(function(){throw t})}function Su(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Ri(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ri(e)}function On(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Ep(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Cs=Math.random().toString(36).slice(2),Wt="__reactFiber$"+Cs,Di="__reactProps$"+Cs,pn="__reactContainer$"+Cs,gc="__reactEvents$"+Cs,uT="__reactListeners$"+Cs,cT="__reactHandles$"+Cs;function fr(t){var e=t[Wt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[pn]||n[Wt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Ep(t);t!==null;){if(n=t[Wt])return n;t=Ep(t)}return e}t=n,n=t.parentNode}return null}function ro(t){return t=t[Wt]||t[pn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Yr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(F(33))}function hl(t){return t[Di]||null}var yc=[],Xr=-1;function rr(t){return{current:t}}function ve(t){0>Xr||(t.current=yc[Xr],yc[Xr]=null,Xr--)}function pe(t,e){Xr++,yc[Xr]=t.current,t.current=e}var Qn={},it=rr(Qn),gt=rr(!1),Er=Qn;function ds(t,e){var n=t.type.contextTypes;if(!n)return Qn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function yt(t){return t=t.childContextTypes,t!=null}function Aa(){ve(gt),ve(it)}function wp(t,e,n){if(it.current!==Qn)throw Error(F(168));pe(it,e),pe(gt,n)}function xy(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(F(108,QE(t)||"Unknown",s));return xe({},n,r)}function Ca(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Qn,Er=it.current,pe(it,t),pe(gt,gt.current),!0}function Tp(t,e,n){var r=t.stateNode;if(!r)throw Error(F(169));n?(t=xy(t,e,Er),r.__reactInternalMemoizedMergedChildContext=t,ve(gt),ve(it),pe(it,t)):ve(gt),pe(gt,n)}var on=null,dl=!1,Iu=!1;function Sy(t){on===null?on=[t]:on.push(t)}function hT(t){dl=!0,Sy(t)}function sr(){if(!Iu&&on!==null){Iu=!0;var t=0,e=ce;try{var n=on;for(ce=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}on=null,dl=!1}catch(s){throw on!==null&&(on=on.slice(t+1)),Gg(_h,sr),s}finally{ce=e,Iu=!1}}return null}var Jr=[],Zr=0,Ra=null,Pa=0,At=[],Ct=0,wr=null,ln=1,un="";function cr(t,e){Jr[Zr++]=Pa,Jr[Zr++]=Ra,Ra=t,Pa=e}function Iy(t,e,n){At[Ct++]=ln,At[Ct++]=un,At[Ct++]=wr,wr=t;var r=ln;t=un;var s=32-Ut(r)-1;r&=~(1<<s),n+=1;var i=32-Ut(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,ln=1<<32-Ut(e)+s|n<<s|r,un=i+t}else ln=1<<i|n<<s|r,un=t}function Rh(t){t.return!==null&&(cr(t,1),Iy(t,1,0))}function Ph(t){for(;t===Ra;)Ra=Jr[--Zr],Jr[Zr]=null,Pa=Jr[--Zr],Jr[Zr]=null;for(;t===wr;)wr=At[--Ct],At[Ct]=null,un=At[--Ct],At[Ct]=null,ln=At[--Ct],At[Ct]=null}var Tt=null,wt=null,_e=!1,Mt=null;function Ay(t,e){var n=Pt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function xp(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Tt=t,wt=On(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Tt=t,wt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=wr!==null?{id:ln,overflow:un}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Pt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Tt=t,wt=null,!0):!1;default:return!1}}function vc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function _c(t){if(_e){var e=wt;if(e){var n=e;if(!xp(t,e)){if(vc(t))throw Error(F(418));e=On(n.nextSibling);var r=Tt;e&&xp(t,e)?Ay(r,n):(t.flags=t.flags&-4097|2,_e=!1,Tt=t)}}else{if(vc(t))throw Error(F(418));t.flags=t.flags&-4097|2,_e=!1,Tt=t}}}function Sp(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Tt=t}function zo(t){if(t!==Tt)return!1;if(!_e)return Sp(t),_e=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!pc(t.type,t.memoizedProps)),e&&(e=wt)){if(vc(t))throw Cy(),Error(F(418));for(;e;)Ay(t,e),e=On(e.nextSibling)}if(Sp(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(F(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){wt=On(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}wt=null}}else wt=Tt?On(t.stateNode.nextSibling):null;return!0}function Cy(){for(var t=wt;t;)t=On(t.nextSibling)}function fs(){wt=Tt=null,_e=!1}function kh(t){Mt===null?Mt=[t]:Mt.push(t)}var dT=En.ReactCurrentBatchConfig;function Zs(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(F(309));var r=n.stateNode}if(!r)throw Error(F(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(F(284));if(!n._owner)throw Error(F(290,t))}return t}function Bo(t,e){throw t=Object.prototype.toString.call(e),Error(F(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Ip(t){var e=t._init;return e(t._payload)}function Ry(t){function e(T,_){if(t){var I=T.deletions;I===null?(T.deletions=[_],T.flags|=16):I.push(_)}}function n(T,_){if(!t)return null;for(;_!==null;)e(T,_),_=_.sibling;return null}function r(T,_){for(T=new Map;_!==null;)_.key!==null?T.set(_.key,_):T.set(_.index,_),_=_.sibling;return T}function s(T,_){return T=Un(T,_),T.index=0,T.sibling=null,T}function i(T,_,I){return T.index=I,t?(I=T.alternate,I!==null?(I=I.index,I<_?(T.flags|=2,_):I):(T.flags|=2,_)):(T.flags|=1048576,_)}function a(T){return t&&T.alternate===null&&(T.flags|=2),T}function l(T,_,I,j){return _===null||_.tag!==6?(_=Vu(I,T.mode,j),_.return=T,_):(_=s(_,I),_.return=T,_)}function u(T,_,I,j){var z=I.type;return z===Wr?f(T,_,I.props.children,j,I.key):_!==null&&(_.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===In&&Ip(z)===_.type)?(j=s(_,I.props),j.ref=Zs(T,_,I),j.return=T,j):(j=ca(I.type,I.key,I.props,null,T.mode,j),j.ref=Zs(T,_,I),j.return=T,j)}function h(T,_,I,j){return _===null||_.tag!==4||_.stateNode.containerInfo!==I.containerInfo||_.stateNode.implementation!==I.implementation?(_=Du(I,T.mode,j),_.return=T,_):(_=s(_,I.children||[]),_.return=T,_)}function f(T,_,I,j,z){return _===null||_.tag!==7?(_=vr(I,T.mode,j,z),_.return=T,_):(_=s(_,I),_.return=T,_)}function m(T,_,I){if(typeof _=="string"&&_!==""||typeof _=="number")return _=Vu(""+_,T.mode,I),_.return=T,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case No:return I=ca(_.type,_.key,_.props,null,T.mode,I),I.ref=Zs(T,null,_),I.return=T,I;case Hr:return _=Du(_,T.mode,I),_.return=T,_;case In:var j=_._init;return m(T,j(_._payload),I)}if(si(_)||Qs(_))return _=vr(_,T.mode,I,null),_.return=T,_;Bo(T,_)}return null}function v(T,_,I,j){var z=_!==null?_.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return z!==null?null:l(T,_,""+I,j);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case No:return I.key===z?u(T,_,I,j):null;case Hr:return I.key===z?h(T,_,I,j):null;case In:return z=I._init,v(T,_,z(I._payload),j)}if(si(I)||Qs(I))return z!==null?null:f(T,_,I,j,null);Bo(T,I)}return null}function A(T,_,I,j,z){if(typeof j=="string"&&j!==""||typeof j=="number")return T=T.get(I)||null,l(_,T,""+j,z);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case No:return T=T.get(j.key===null?I:j.key)||null,u(_,T,j,z);case Hr:return T=T.get(j.key===null?I:j.key)||null,h(_,T,j,z);case In:var $=j._init;return A(T,_,I,$(j._payload),z)}if(si(j)||Qs(j))return T=T.get(I)||null,f(_,T,j,z,null);Bo(_,j)}return null}function R(T,_,I,j){for(var z=null,$=null,w=_,y=_=0,E=null;w!==null&&y<I.length;y++){w.index>y?(E=w,w=null):E=w.sibling;var S=v(T,w,I[y],j);if(S===null){w===null&&(w=E);break}t&&w&&S.alternate===null&&e(T,w),_=i(S,_,y),$===null?z=S:$.sibling=S,$=S,w=E}if(y===I.length)return n(T,w),_e&&cr(T,y),z;if(w===null){for(;y<I.length;y++)w=m(T,I[y],j),w!==null&&(_=i(w,_,y),$===null?z=w:$.sibling=w,$=w);return _e&&cr(T,y),z}for(w=r(T,w);y<I.length;y++)E=A(w,T,y,I[y],j),E!==null&&(t&&E.alternate!==null&&w.delete(E.key===null?y:E.key),_=i(E,_,y),$===null?z=E:$.sibling=E,$=E);return t&&w.forEach(function(C){return e(T,C)}),_e&&cr(T,y),z}function N(T,_,I,j){var z=Qs(I);if(typeof z!="function")throw Error(F(150));if(I=z.call(I),I==null)throw Error(F(151));for(var $=z=null,w=_,y=_=0,E=null,S=I.next();w!==null&&!S.done;y++,S=I.next()){w.index>y?(E=w,w=null):E=w.sibling;var C=v(T,w,S.value,j);if(C===null){w===null&&(w=E);break}t&&w&&C.alternate===null&&e(T,w),_=i(C,_,y),$===null?z=C:$.sibling=C,$=C,w=E}if(S.done)return n(T,w),_e&&cr(T,y),z;if(w===null){for(;!S.done;y++,S=I.next())S=m(T,S.value,j),S!==null&&(_=i(S,_,y),$===null?z=S:$.sibling=S,$=S);return _e&&cr(T,y),z}for(w=r(T,w);!S.done;y++,S=I.next())S=A(w,T,y,S.value,j),S!==null&&(t&&S.alternate!==null&&w.delete(S.key===null?y:S.key),_=i(S,_,y),$===null?z=S:$.sibling=S,$=S);return t&&w.forEach(function(P){return e(T,P)}),_e&&cr(T,y),z}function V(T,_,I,j){if(typeof I=="object"&&I!==null&&I.type===Wr&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case No:e:{for(var z=I.key,$=_;$!==null;){if($.key===z){if(z=I.type,z===Wr){if($.tag===7){n(T,$.sibling),_=s($,I.props.children),_.return=T,T=_;break e}}else if($.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===In&&Ip(z)===$.type){n(T,$.sibling),_=s($,I.props),_.ref=Zs(T,$,I),_.return=T,T=_;break e}n(T,$);break}else e(T,$);$=$.sibling}I.type===Wr?(_=vr(I.props.children,T.mode,j,I.key),_.return=T,T=_):(j=ca(I.type,I.key,I.props,null,T.mode,j),j.ref=Zs(T,_,I),j.return=T,T=j)}return a(T);case Hr:e:{for($=I.key;_!==null;){if(_.key===$)if(_.tag===4&&_.stateNode.containerInfo===I.containerInfo&&_.stateNode.implementation===I.implementation){n(T,_.sibling),_=s(_,I.children||[]),_.return=T,T=_;break e}else{n(T,_);break}else e(T,_);_=_.sibling}_=Du(I,T.mode,j),_.return=T,T=_}return a(T);case In:return $=I._init,V(T,_,$(I._payload),j)}if(si(I))return R(T,_,I,j);if(Qs(I))return N(T,_,I,j);Bo(T,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,_!==null&&_.tag===6?(n(T,_.sibling),_=s(_,I),_.return=T,T=_):(n(T,_),_=Vu(I,T.mode,j),_.return=T,T=_),a(T)):n(T,_)}return V}var ps=Ry(!0),Py=Ry(!1),ka=rr(null),Na=null,es=null,Nh=null;function Vh(){Nh=es=Na=null}function Dh(t){var e=ka.current;ve(ka),t._currentValue=e}function Ec(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function as(t,e){Na=t,Nh=es=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(mt=!0),t.firstContext=null)}function Vt(t){var e=t._currentValue;if(Nh!==t)if(t={context:t,memoizedValue:e,next:null},es===null){if(Na===null)throw Error(F(308));es=t,Na.dependencies={lanes:0,firstContext:t}}else es=es.next=t;return e}var pr=null;function jh(t){pr===null?pr=[t]:pr.push(t)}function ky(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,jh(e)):(n.next=s.next,s.next=n),e.interleaved=n,mn(t,r)}function mn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var An=!1;function Lh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ny(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function hn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function bn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ie&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,mn(t,n)}return s=r.interleaved,s===null?(e.next=e,jh(r)):(e.next=s.next,s.next=e),r.interleaved=e,mn(t,n)}function sa(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Eh(t,n)}}function Ap(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Va(t,e,n,r){var s=t.updateQueue;An=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,h=u.next;u.next=null,a===null?i=h:a.next=h,a=u;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==a&&(l===null?f.firstBaseUpdate=h:l.next=h,f.lastBaseUpdate=u))}if(i!==null){var m=s.baseState;a=0,f=h=u=null,l=i;do{var v=l.lane,A=l.eventTime;if((r&v)===v){f!==null&&(f=f.next={eventTime:A,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var R=t,N=l;switch(v=e,A=n,N.tag){case 1:if(R=N.payload,typeof R=="function"){m=R.call(A,m,v);break e}m=R;break e;case 3:R.flags=R.flags&-65537|128;case 0:if(R=N.payload,v=typeof R=="function"?R.call(A,m,v):R,v==null)break e;m=xe({},m,v);break e;case 2:An=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,v=s.effects,v===null?s.effects=[l]:v.push(l))}else A={eventTime:A,lane:v,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(h=f=A,u=m):f=f.next=A,a|=v;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;v=l,l=v.next,v.next=null,s.lastBaseUpdate=v,s.shared.pending=null}}while(!0);if(f===null&&(u=m),s.baseState=u,s.firstBaseUpdate=h,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);xr|=a,t.lanes=a,t.memoizedState=m}}function Cp(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(F(191,s));s.call(r)}}}var so={},Qt=rr(so),ji=rr(so),Li=rr(so);function mr(t){if(t===so)throw Error(F(174));return t}function Oh(t,e){switch(pe(Li,e),pe(ji,t),pe(Qt,so),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ec(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ec(e,t)}ve(Qt),pe(Qt,e)}function ms(){ve(Qt),ve(ji),ve(Li)}function Vy(t){mr(Li.current);var e=mr(Qt.current),n=ec(e,t.type);e!==n&&(pe(ji,t),pe(Qt,n))}function bh(t){ji.current===t&&(ve(Qt),ve(ji))}var we=rr(0);function Da(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Au=[];function Mh(){for(var t=0;t<Au.length;t++)Au[t]._workInProgressVersionPrimary=null;Au.length=0}var ia=En.ReactCurrentDispatcher,Cu=En.ReactCurrentBatchConfig,Tr=0,Te=null,Ve=null,Me=null,ja=!1,mi=!1,Oi=0,fT=0;function Je(){throw Error(F(321))}function Fh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Bt(t[n],e[n]))return!1;return!0}function Uh(t,e,n,r,s,i){if(Tr=i,Te=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ia.current=t===null||t.memoizedState===null?yT:vT,t=n(r,s),mi){i=0;do{if(mi=!1,Oi=0,25<=i)throw Error(F(301));i+=1,Me=Ve=null,e.updateQueue=null,ia.current=_T,t=n(r,s)}while(mi)}if(ia.current=La,e=Ve!==null&&Ve.next!==null,Tr=0,Me=Ve=Te=null,ja=!1,e)throw Error(F(300));return t}function zh(){var t=Oi!==0;return Oi=0,t}function qt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Me===null?Te.memoizedState=Me=t:Me=Me.next=t,Me}function Dt(){if(Ve===null){var t=Te.alternate;t=t!==null?t.memoizedState:null}else t=Ve.next;var e=Me===null?Te.memoizedState:Me.next;if(e!==null)Me=e,Ve=t;else{if(t===null)throw Error(F(310));Ve=t,t={memoizedState:Ve.memoizedState,baseState:Ve.baseState,baseQueue:Ve.baseQueue,queue:Ve.queue,next:null},Me===null?Te.memoizedState=Me=t:Me=Me.next=t}return Me}function bi(t,e){return typeof e=="function"?e(t):e}function Ru(t){var e=Dt(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=Ve,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=a=null,u=null,h=i;do{var f=h.lane;if((Tr&f)===f)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var m={lane:f,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(l=u=m,a=r):u=u.next=m,Te.lanes|=f,xr|=f}h=h.next}while(h!==null&&h!==i);u===null?a=r:u.next=l,Bt(r,e.memoizedState)||(mt=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Te.lanes|=i,xr|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Pu(t){var e=Dt(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);Bt(i,e.memoizedState)||(mt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Dy(){}function jy(t,e){var n=Te,r=Dt(),s=e(),i=!Bt(r.memoizedState,s);if(i&&(r.memoizedState=s,mt=!0),r=r.queue,Bh(by.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Me!==null&&Me.memoizedState.tag&1){if(n.flags|=2048,Mi(9,Oy.bind(null,n,r,s,e),void 0,null),Fe===null)throw Error(F(349));Tr&30||Ly(n,e,s)}return s}function Ly(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Te.updateQueue,e===null?(e={lastEffect:null,stores:null},Te.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Oy(t,e,n,r){e.value=n,e.getSnapshot=r,My(e)&&Fy(t)}function by(t,e,n){return n(function(){My(e)&&Fy(t)})}function My(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Bt(t,n)}catch{return!0}}function Fy(t){var e=mn(t,1);e!==null&&zt(e,t,1,-1)}function Rp(t){var e=qt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bi,lastRenderedState:t},e.queue=t,t=t.dispatch=gT.bind(null,Te,t),[e.memoizedState,t]}function Mi(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Te.updateQueue,e===null?(e={lastEffect:null,stores:null},Te.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Uy(){return Dt().memoizedState}function oa(t,e,n,r){var s=qt();Te.flags|=t,s.memoizedState=Mi(1|e,n,void 0,r===void 0?null:r)}function fl(t,e,n,r){var s=Dt();r=r===void 0?null:r;var i=void 0;if(Ve!==null){var a=Ve.memoizedState;if(i=a.destroy,r!==null&&Fh(r,a.deps)){s.memoizedState=Mi(e,n,i,r);return}}Te.flags|=t,s.memoizedState=Mi(1|e,n,i,r)}function Pp(t,e){return oa(8390656,8,t,e)}function Bh(t,e){return fl(2048,8,t,e)}function zy(t,e){return fl(4,2,t,e)}function By(t,e){return fl(4,4,t,e)}function $y(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function qy(t,e,n){return n=n!=null?n.concat([t]):null,fl(4,4,$y.bind(null,e,t),n)}function $h(){}function Hy(t,e){var n=Dt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Fh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Wy(t,e){var n=Dt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Fh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Ky(t,e,n){return Tr&21?(Bt(n,e)||(n=Jg(),Te.lanes|=n,xr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,mt=!0),t.memoizedState=n)}function pT(t,e){var n=ce;ce=n!==0&&4>n?n:4,t(!0);var r=Cu.transition;Cu.transition={};try{t(!1),e()}finally{ce=n,Cu.transition=r}}function Qy(){return Dt().memoizedState}function mT(t,e,n){var r=Fn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Gy(t))Yy(e,n);else if(n=ky(t,e,n,r),n!==null){var s=ct();zt(n,t,r,s),Xy(n,e,r)}}function gT(t,e,n){var r=Fn(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Gy(t))Yy(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,l=i(a,n);if(s.hasEagerState=!0,s.eagerState=l,Bt(l,a)){var u=e.interleaved;u===null?(s.next=s,jh(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=ky(t,e,s,r),n!==null&&(s=ct(),zt(n,t,r,s),Xy(n,e,r))}}function Gy(t){var e=t.alternate;return t===Te||e!==null&&e===Te}function Yy(t,e){mi=ja=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Xy(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Eh(t,n)}}var La={readContext:Vt,useCallback:Je,useContext:Je,useEffect:Je,useImperativeHandle:Je,useInsertionEffect:Je,useLayoutEffect:Je,useMemo:Je,useReducer:Je,useRef:Je,useState:Je,useDebugValue:Je,useDeferredValue:Je,useTransition:Je,useMutableSource:Je,useSyncExternalStore:Je,useId:Je,unstable_isNewReconciler:!1},yT={readContext:Vt,useCallback:function(t,e){return qt().memoizedState=[t,e===void 0?null:e],t},useContext:Vt,useEffect:Pp,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,oa(4194308,4,$y.bind(null,e,t),n)},useLayoutEffect:function(t,e){return oa(4194308,4,t,e)},useInsertionEffect:function(t,e){return oa(4,2,t,e)},useMemo:function(t,e){var n=qt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=qt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=mT.bind(null,Te,t),[r.memoizedState,t]},useRef:function(t){var e=qt();return t={current:t},e.memoizedState=t},useState:Rp,useDebugValue:$h,useDeferredValue:function(t){return qt().memoizedState=t},useTransition:function(){var t=Rp(!1),e=t[0];return t=pT.bind(null,t[1]),qt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Te,s=qt();if(_e){if(n===void 0)throw Error(F(407));n=n()}else{if(n=e(),Fe===null)throw Error(F(349));Tr&30||Ly(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Pp(by.bind(null,r,i,t),[t]),r.flags|=2048,Mi(9,Oy.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=qt(),e=Fe.identifierPrefix;if(_e){var n=un,r=ln;n=(r&~(1<<32-Ut(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Oi++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=fT++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},vT={readContext:Vt,useCallback:Hy,useContext:Vt,useEffect:Bh,useImperativeHandle:qy,useInsertionEffect:zy,useLayoutEffect:By,useMemo:Wy,useReducer:Ru,useRef:Uy,useState:function(){return Ru(bi)},useDebugValue:$h,useDeferredValue:function(t){var e=Dt();return Ky(e,Ve.memoizedState,t)},useTransition:function(){var t=Ru(bi)[0],e=Dt().memoizedState;return[t,e]},useMutableSource:Dy,useSyncExternalStore:jy,useId:Qy,unstable_isNewReconciler:!1},_T={readContext:Vt,useCallback:Hy,useContext:Vt,useEffect:Bh,useImperativeHandle:qy,useInsertionEffect:zy,useLayoutEffect:By,useMemo:Wy,useReducer:Pu,useRef:Uy,useState:function(){return Pu(bi)},useDebugValue:$h,useDeferredValue:function(t){var e=Dt();return Ve===null?e.memoizedState=t:Ky(e,Ve.memoizedState,t)},useTransition:function(){var t=Pu(bi)[0],e=Dt().memoizedState;return[t,e]},useMutableSource:Dy,useSyncExternalStore:jy,useId:Qy,unstable_isNewReconciler:!1};function Ot(t,e){if(t&&t.defaultProps){e=xe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function wc(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:xe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var pl={isMounted:function(t){return(t=t._reactInternals)?Rr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ct(),s=Fn(t),i=hn(r,s);i.payload=e,n!=null&&(i.callback=n),e=bn(t,i,s),e!==null&&(zt(e,t,s,r),sa(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ct(),s=Fn(t),i=hn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=bn(t,i,s),e!==null&&(zt(e,t,s,r),sa(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ct(),r=Fn(t),s=hn(n,r);s.tag=2,e!=null&&(s.callback=e),e=bn(t,s,r),e!==null&&(zt(e,t,r,n),sa(e,t,r))}};function kp(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!ki(n,r)||!ki(s,i):!0}function Jy(t,e,n){var r=!1,s=Qn,i=e.contextType;return typeof i=="object"&&i!==null?i=Vt(i):(s=yt(e)?Er:it.current,r=e.contextTypes,i=(r=r!=null)?ds(t,s):Qn),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=pl,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Np(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&pl.enqueueReplaceState(e,e.state,null)}function Tc(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Lh(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Vt(i):(i=yt(e)?Er:it.current,s.context=ds(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(wc(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&pl.enqueueReplaceState(s,s.state,null),Va(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function gs(t,e){try{var n="",r=e;do n+=KE(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function ku(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function xc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var ET=typeof WeakMap=="function"?WeakMap:Map;function Zy(t,e,n){n=hn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ba||(ba=!0,Dc=r),xc(t,e)},n}function ev(t,e,n){n=hn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){xc(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){xc(t,e),typeof r!="function"&&(Mn===null?Mn=new Set([this]):Mn.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function Vp(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new ET;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=jT.bind(null,t,e,n),e.then(t,t))}function Dp(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function jp(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=hn(-1,1),e.tag=2,bn(n,e,1))),n.lanes|=1),t)}var wT=En.ReactCurrentOwner,mt=!1;function ut(t,e,n,r){e.child=t===null?Py(e,null,n,r):ps(e,t.child,n,r)}function Lp(t,e,n,r,s){n=n.render;var i=e.ref;return as(e,s),r=Uh(t,e,n,r,i,s),n=zh(),t!==null&&!mt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,gn(t,e,s)):(_e&&n&&Rh(e),e.flags|=1,ut(t,e,r,s),e.child)}function Op(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Xh(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,tv(t,e,i,r,s)):(t=ca(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:ki,n(a,r)&&t.ref===e.ref)return gn(t,e,s)}return e.flags|=1,t=Un(i,r),t.ref=e.ref,t.return=e,e.child=t}function tv(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(ki(i,r)&&t.ref===e.ref)if(mt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(mt=!0);else return e.lanes=t.lanes,gn(t,e,s)}return Sc(t,e,n,r,s)}function nv(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},pe(ns,Et),Et|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,pe(ns,Et),Et|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,pe(ns,Et),Et|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,pe(ns,Et),Et|=r;return ut(t,e,s,n),e.child}function rv(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Sc(t,e,n,r,s){var i=yt(n)?Er:it.current;return i=ds(e,i),as(e,s),n=Uh(t,e,n,r,i,s),r=zh(),t!==null&&!mt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,gn(t,e,s)):(_e&&r&&Rh(e),e.flags|=1,ut(t,e,n,s),e.child)}function bp(t,e,n,r,s){if(yt(n)){var i=!0;Ca(e)}else i=!1;if(as(e,s),e.stateNode===null)aa(t,e),Jy(e,n,r),Tc(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var u=a.context,h=n.contextType;typeof h=="object"&&h!==null?h=Vt(h):(h=yt(n)?Er:it.current,h=ds(e,h));var f=n.getDerivedStateFromProps,m=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function";m||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||u!==h)&&Np(e,a,r,h),An=!1;var v=e.memoizedState;a.state=v,Va(e,r,a,s),u=e.memoizedState,l!==r||v!==u||gt.current||An?(typeof f=="function"&&(wc(e,n,f,r),u=e.memoizedState),(l=An||kp(e,n,l,r,v,u,h))?(m||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=h,r=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,Ny(t,e),l=e.memoizedProps,h=e.type===e.elementType?l:Ot(e.type,l),a.props=h,m=e.pendingProps,v=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=Vt(u):(u=yt(n)?Er:it.current,u=ds(e,u));var A=n.getDerivedStateFromProps;(f=typeof A=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==m||v!==u)&&Np(e,a,r,u),An=!1,v=e.memoizedState,a.state=v,Va(e,r,a,s);var R=e.memoizedState;l!==m||v!==R||gt.current||An?(typeof A=="function"&&(wc(e,n,A,r),R=e.memoizedState),(h=An||kp(e,n,h,r,v,R,u)||!1)?(f||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,R,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,R,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=R),a.props=r,a.state=R,a.context=u,r=h):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),r=!1)}return Ic(t,e,n,r,i,s)}function Ic(t,e,n,r,s,i){rv(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&Tp(e,n,!1),gn(t,e,i);r=e.stateNode,wT.current=e;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=ps(e,t.child,null,i),e.child=ps(e,null,l,i)):ut(t,e,l,i),e.memoizedState=r.state,s&&Tp(e,n,!0),e.child}function sv(t){var e=t.stateNode;e.pendingContext?wp(t,e.pendingContext,e.pendingContext!==e.context):e.context&&wp(t,e.context,!1),Oh(t,e.containerInfo)}function Mp(t,e,n,r,s){return fs(),kh(s),e.flags|=256,ut(t,e,n,r),e.child}var Ac={dehydrated:null,treeContext:null,retryLane:0};function Cc(t){return{baseLanes:t,cachePool:null,transitions:null}}function iv(t,e,n){var r=e.pendingProps,s=we.current,i=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),pe(we,s&1),t===null)return _c(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=yl(a,r,0,null),t=vr(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Cc(n),e.memoizedState=Ac,t):qh(e,a));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return TT(t,e,a,r,l,s,n);if(i){i=r.fallback,a=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Un(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Un(l,i):(i=vr(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?Cc(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=Ac,r}return i=t.child,t=i.sibling,r=Un(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function qh(t,e){return e=yl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function $o(t,e,n,r){return r!==null&&kh(r),ps(e,t.child,null,n),t=qh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function TT(t,e,n,r,s,i,a){if(n)return e.flags&256?(e.flags&=-257,r=ku(Error(F(422))),$o(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=yl({mode:"visible",children:r.children},s,0,null),i=vr(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&ps(e,t.child,null,a),e.child.memoizedState=Cc(a),e.memoizedState=Ac,i);if(!(e.mode&1))return $o(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(F(419)),r=ku(i,r,void 0),$o(t,e,a,r)}if(l=(a&t.childLanes)!==0,mt||l){if(r=Fe,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,mn(t,s),zt(r,t,s,-1))}return Yh(),r=ku(Error(F(421))),$o(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=LT.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,wt=On(s.nextSibling),Tt=e,_e=!0,Mt=null,t!==null&&(At[Ct++]=ln,At[Ct++]=un,At[Ct++]=wr,ln=t.id,un=t.overflow,wr=e),e=qh(e,r.children),e.flags|=4096,e)}function Fp(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Ec(t.return,e,n)}function Nu(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function ov(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(ut(t,e,r.children,n),r=we.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Fp(t,n,e);else if(t.tag===19)Fp(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(pe(we,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Da(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Nu(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Da(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Nu(e,!0,n,null,i);break;case"together":Nu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function aa(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function gn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),xr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(F(153));if(e.child!==null){for(t=e.child,n=Un(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Un(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function xT(t,e,n){switch(e.tag){case 3:sv(e),fs();break;case 5:Vy(e);break;case 1:yt(e.type)&&Ca(e);break;case 4:Oh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;pe(ka,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(pe(we,we.current&1),e.flags|=128,null):n&e.child.childLanes?iv(t,e,n):(pe(we,we.current&1),t=gn(t,e,n),t!==null?t.sibling:null);pe(we,we.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return ov(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),pe(we,we.current),r)break;return null;case 22:case 23:return e.lanes=0,nv(t,e,n)}return gn(t,e,n)}var av,Rc,lv,uv;av=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Rc=function(){};lv=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,mr(Qt.current);var i=null;switch(n){case"input":s=Yu(t,s),r=Yu(t,r),i=[];break;case"select":s=xe({},s,{value:void 0}),r=xe({},r,{value:void 0}),i=[];break;case"textarea":s=Zu(t,s),r=Zu(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ia)}tc(n,r);var a;n=null;for(h in s)if(!r.hasOwnProperty(h)&&s.hasOwnProperty(h)&&s[h]!=null)if(h==="style"){var l=s[h];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(xi.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in r){var u=r[h];if(l=s!=null?s[h]:void 0,r.hasOwnProperty(h)&&u!==l&&(u!=null||l!=null))if(h==="style")if(l){for(a in l)!l.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&l[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(i||(i=[]),i.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(xi.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&ye("scroll",t),i||l===u||(i=[])):(i=i||[]).push(h,u))}n&&(i=i||[]).push("style",n);var h=i;(e.updateQueue=h)&&(e.flags|=4)}};uv=function(t,e,n,r){n!==r&&(e.flags|=4)};function ei(t,e){if(!_e)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ze(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function ST(t,e,n){var r=e.pendingProps;switch(Ph(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ze(e),null;case 1:return yt(e.type)&&Aa(),Ze(e),null;case 3:return r=e.stateNode,ms(),ve(gt),ve(it),Mh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(zo(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Mt!==null&&(Oc(Mt),Mt=null))),Rc(t,e),Ze(e),null;case 5:bh(e);var s=mr(Li.current);if(n=e.type,t!==null&&e.stateNode!=null)lv(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(F(166));return Ze(e),null}if(t=mr(Qt.current),zo(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Wt]=e,r[Di]=i,t=(e.mode&1)!==0,n){case"dialog":ye("cancel",r),ye("close",r);break;case"iframe":case"object":case"embed":ye("load",r);break;case"video":case"audio":for(s=0;s<oi.length;s++)ye(oi[s],r);break;case"source":ye("error",r);break;case"img":case"image":case"link":ye("error",r),ye("load",r);break;case"details":ye("toggle",r);break;case"input":Qf(r,i),ye("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ye("invalid",r);break;case"textarea":Yf(r,i),ye("invalid",r)}tc(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Uo(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Uo(r.textContent,l,t),s=["children",""+l]):xi.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&ye("scroll",r)}switch(n){case"input":Vo(r),Gf(r,i,!0);break;case"textarea":Vo(r),Xf(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Ia)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=bg(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[Wt]=e,t[Di]=r,av(t,e,!1,!1),e.stateNode=t;e:{switch(a=nc(n,r),n){case"dialog":ye("cancel",t),ye("close",t),s=r;break;case"iframe":case"object":case"embed":ye("load",t),s=r;break;case"video":case"audio":for(s=0;s<oi.length;s++)ye(oi[s],t);s=r;break;case"source":ye("error",t),s=r;break;case"img":case"image":case"link":ye("error",t),ye("load",t),s=r;break;case"details":ye("toggle",t),s=r;break;case"input":Qf(t,r),s=Yu(t,r),ye("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=xe({},r,{value:void 0}),ye("invalid",t);break;case"textarea":Yf(t,r),s=Zu(t,r),ye("invalid",t);break;default:s=r}tc(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?Ug(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Mg(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Si(t,u):typeof u=="number"&&Si(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(xi.hasOwnProperty(i)?u!=null&&i==="onScroll"&&ye("scroll",t):u!=null&&ph(t,i,u,a))}switch(n){case"input":Vo(t),Gf(t,r,!1);break;case"textarea":Vo(t),Xf(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Kn(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?rs(t,!!r.multiple,i,!1):r.defaultValue!=null&&rs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Ia)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ze(e),null;case 6:if(t&&e.stateNode!=null)uv(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(F(166));if(n=mr(Li.current),mr(Qt.current),zo(e)){if(r=e.stateNode,n=e.memoizedProps,r[Wt]=e,(i=r.nodeValue!==n)&&(t=Tt,t!==null))switch(t.tag){case 3:Uo(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Uo(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Wt]=e,e.stateNode=r}return Ze(e),null;case 13:if(ve(we),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(_e&&wt!==null&&e.mode&1&&!(e.flags&128))Cy(),fs(),e.flags|=98560,i=!1;else if(i=zo(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(F(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(F(317));i[Wt]=e}else fs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ze(e),i=!1}else Mt!==null&&(Oc(Mt),Mt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||we.current&1?je===0&&(je=3):Yh())),e.updateQueue!==null&&(e.flags|=4),Ze(e),null);case 4:return ms(),Rc(t,e),t===null&&Ni(e.stateNode.containerInfo),Ze(e),null;case 10:return Dh(e.type._context),Ze(e),null;case 17:return yt(e.type)&&Aa(),Ze(e),null;case 19:if(ve(we),i=e.memoizedState,i===null)return Ze(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)ei(i,!1);else{if(je!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Da(t),a!==null){for(e.flags|=128,ei(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return pe(we,we.current&1|2),e.child}t=t.sibling}i.tail!==null&&Re()>ys&&(e.flags|=128,r=!0,ei(i,!1),e.lanes=4194304)}else{if(!r)if(t=Da(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ei(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!_e)return Ze(e),null}else 2*Re()-i.renderingStartTime>ys&&n!==1073741824&&(e.flags|=128,r=!0,ei(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Re(),e.sibling=null,n=we.current,pe(we,r?n&1|2:n&1),e):(Ze(e),null);case 22:case 23:return Gh(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Et&1073741824&&(Ze(e),e.subtreeFlags&6&&(e.flags|=8192)):Ze(e),null;case 24:return null;case 25:return null}throw Error(F(156,e.tag))}function IT(t,e){switch(Ph(e),e.tag){case 1:return yt(e.type)&&Aa(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ms(),ve(gt),ve(it),Mh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return bh(e),null;case 13:if(ve(we),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(F(340));fs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ve(we),null;case 4:return ms(),null;case 10:return Dh(e.type._context),null;case 22:case 23:return Gh(),null;case 24:return null;default:return null}}var qo=!1,nt=!1,AT=typeof WeakSet=="function"?WeakSet:Set,H=null;function ts(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ae(t,e,r)}else n.current=null}function Pc(t,e,n){try{n()}catch(r){Ae(t,e,r)}}var Up=!1;function CT(t,e){if(dc=Ta,t=py(),Ch(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,l=-1,u=-1,h=0,f=0,m=t,v=null;t:for(;;){for(var A;m!==n||s!==0&&m.nodeType!==3||(l=a+s),m!==i||r!==0&&m.nodeType!==3||(u=a+r),m.nodeType===3&&(a+=m.nodeValue.length),(A=m.firstChild)!==null;)v=m,m=A;for(;;){if(m===t)break t;if(v===n&&++h===s&&(l=a),v===i&&++f===r&&(u=a),(A=m.nextSibling)!==null)break;m=v,v=m.parentNode}m=A}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(fc={focusedElem:t,selectionRange:n},Ta=!1,H=e;H!==null;)if(e=H,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,H=t;else for(;H!==null;){e=H;try{var R=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(R!==null){var N=R.memoizedProps,V=R.memoizedState,T=e.stateNode,_=T.getSnapshotBeforeUpdate(e.elementType===e.type?N:Ot(e.type,N),V);T.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(F(163))}}catch(j){Ae(e,e.return,j)}if(t=e.sibling,t!==null){t.return=e.return,H=t;break}H=e.return}return R=Up,Up=!1,R}function gi(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Pc(e,n,i)}s=s.next}while(s!==r)}}function ml(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function kc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function cv(t){var e=t.alternate;e!==null&&(t.alternate=null,cv(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Wt],delete e[Di],delete e[gc],delete e[uT],delete e[cT])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function hv(t){return t.tag===5||t.tag===3||t.tag===4}function zp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||hv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Nc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ia));else if(r!==4&&(t=t.child,t!==null))for(Nc(t,e,n),t=t.sibling;t!==null;)Nc(t,e,n),t=t.sibling}function Vc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Vc(t,e,n),t=t.sibling;t!==null;)Vc(t,e,n),t=t.sibling}var ze=null,bt=!1;function Sn(t,e,n){for(n=n.child;n!==null;)dv(t,e,n),n=n.sibling}function dv(t,e,n){if(Kt&&typeof Kt.onCommitFiberUnmount=="function")try{Kt.onCommitFiberUnmount(al,n)}catch{}switch(n.tag){case 5:nt||ts(n,e);case 6:var r=ze,s=bt;ze=null,Sn(t,e,n),ze=r,bt=s,ze!==null&&(bt?(t=ze,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ze.removeChild(n.stateNode));break;case 18:ze!==null&&(bt?(t=ze,n=n.stateNode,t.nodeType===8?Su(t.parentNode,n):t.nodeType===1&&Su(t,n),Ri(t)):Su(ze,n.stateNode));break;case 4:r=ze,s=bt,ze=n.stateNode.containerInfo,bt=!0,Sn(t,e,n),ze=r,bt=s;break;case 0:case 11:case 14:case 15:if(!nt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&Pc(n,e,a),s=s.next}while(s!==r)}Sn(t,e,n);break;case 1:if(!nt&&(ts(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Ae(n,e,l)}Sn(t,e,n);break;case 21:Sn(t,e,n);break;case 22:n.mode&1?(nt=(r=nt)||n.memoizedState!==null,Sn(t,e,n),nt=r):Sn(t,e,n);break;default:Sn(t,e,n)}}function Bp(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new AT),e.forEach(function(r){var s=OT.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Lt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:ze=l.stateNode,bt=!1;break e;case 3:ze=l.stateNode.containerInfo,bt=!0;break e;case 4:ze=l.stateNode.containerInfo,bt=!0;break e}l=l.return}if(ze===null)throw Error(F(160));dv(i,a,s),ze=null,bt=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(h){Ae(s,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)fv(e,t),e=e.sibling}function fv(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Lt(e,t),$t(t),r&4){try{gi(3,t,t.return),ml(3,t)}catch(N){Ae(t,t.return,N)}try{gi(5,t,t.return)}catch(N){Ae(t,t.return,N)}}break;case 1:Lt(e,t),$t(t),r&512&&n!==null&&ts(n,n.return);break;case 5:if(Lt(e,t),$t(t),r&512&&n!==null&&ts(n,n.return),t.flags&32){var s=t.stateNode;try{Si(s,"")}catch(N){Ae(t,t.return,N)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Lg(s,i),nc(l,a);var h=nc(l,i);for(a=0;a<u.length;a+=2){var f=u[a],m=u[a+1];f==="style"?Ug(s,m):f==="dangerouslySetInnerHTML"?Mg(s,m):f==="children"?Si(s,m):ph(s,f,m,h)}switch(l){case"input":Xu(s,i);break;case"textarea":Og(s,i);break;case"select":var v=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var A=i.value;A!=null?rs(s,!!i.multiple,A,!1):v!==!!i.multiple&&(i.defaultValue!=null?rs(s,!!i.multiple,i.defaultValue,!0):rs(s,!!i.multiple,i.multiple?[]:"",!1))}s[Di]=i}catch(N){Ae(t,t.return,N)}}break;case 6:if(Lt(e,t),$t(t),r&4){if(t.stateNode===null)throw Error(F(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(N){Ae(t,t.return,N)}}break;case 3:if(Lt(e,t),$t(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ri(e.containerInfo)}catch(N){Ae(t,t.return,N)}break;case 4:Lt(e,t),$t(t);break;case 13:Lt(e,t),$t(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Kh=Re())),r&4&&Bp(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(nt=(h=nt)||f,Lt(e,t),nt=h):Lt(e,t),$t(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!f&&t.mode&1)for(H=t,f=t.child;f!==null;){for(m=H=f;H!==null;){switch(v=H,A=v.child,v.tag){case 0:case 11:case 14:case 15:gi(4,v,v.return);break;case 1:ts(v,v.return);var R=v.stateNode;if(typeof R.componentWillUnmount=="function"){r=v,n=v.return;try{e=r,R.props=e.memoizedProps,R.state=e.memoizedState,R.componentWillUnmount()}catch(N){Ae(r,n,N)}}break;case 5:ts(v,v.return);break;case 22:if(v.memoizedState!==null){qp(m);continue}}A!==null?(A.return=v,H=A):qp(m)}f=f.sibling}e:for(f=null,m=t;;){if(m.tag===5){if(f===null){f=m;try{s=m.stateNode,h?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=m.stateNode,u=m.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Fg("display",a))}catch(N){Ae(t,t.return,N)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=h?"":m.memoizedProps}catch(N){Ae(t,t.return,N)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Lt(e,t),$t(t),r&4&&Bp(t);break;case 21:break;default:Lt(e,t),$t(t)}}function $t(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(hv(n)){var r=n;break e}n=n.return}throw Error(F(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Si(s,""),r.flags&=-33);var i=zp(t);Vc(t,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,l=zp(t);Nc(t,l,a);break;default:throw Error(F(161))}}catch(u){Ae(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function RT(t,e,n){H=t,pv(t)}function pv(t,e,n){for(var r=(t.mode&1)!==0;H!==null;){var s=H,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||qo;if(!a){var l=s.alternate,u=l!==null&&l.memoizedState!==null||nt;l=qo;var h=nt;if(qo=a,(nt=u)&&!h)for(H=s;H!==null;)a=H,u=a.child,a.tag===22&&a.memoizedState!==null?Hp(s):u!==null?(u.return=a,H=u):Hp(s);for(;i!==null;)H=i,pv(i),i=i.sibling;H=s,qo=l,nt=h}$p(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,H=i):$p(t)}}function $p(t){for(;H!==null;){var e=H;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:nt||ml(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!nt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Ot(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Cp(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Cp(e,a,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var f=h.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&Ri(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(F(163))}nt||e.flags&512&&kc(e)}catch(v){Ae(e,e.return,v)}}if(e===t){H=null;break}if(n=e.sibling,n!==null){n.return=e.return,H=n;break}H=e.return}}function qp(t){for(;H!==null;){var e=H;if(e===t){H=null;break}var n=e.sibling;if(n!==null){n.return=e.return,H=n;break}H=e.return}}function Hp(t){for(;H!==null;){var e=H;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ml(4,e)}catch(u){Ae(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Ae(e,s,u)}}var i=e.return;try{kc(e)}catch(u){Ae(e,i,u)}break;case 5:var a=e.return;try{kc(e)}catch(u){Ae(e,a,u)}}}catch(u){Ae(e,e.return,u)}if(e===t){H=null;break}var l=e.sibling;if(l!==null){l.return=e.return,H=l;break}H=e.return}}var PT=Math.ceil,Oa=En.ReactCurrentDispatcher,Hh=En.ReactCurrentOwner,kt=En.ReactCurrentBatchConfig,ie=0,Fe=null,ke=null,He=0,Et=0,ns=rr(0),je=0,Fi=null,xr=0,gl=0,Wh=0,yi=null,pt=null,Kh=0,ys=1/0,sn=null,ba=!1,Dc=null,Mn=null,Ho=!1,kn=null,Ma=0,vi=0,jc=null,la=-1,ua=0;function ct(){return ie&6?Re():la!==-1?la:la=Re()}function Fn(t){return t.mode&1?ie&2&&He!==0?He&-He:dT.transition!==null?(ua===0&&(ua=Jg()),ua):(t=ce,t!==0||(t=window.event,t=t===void 0?16:iy(t.type)),t):1}function zt(t,e,n,r){if(50<vi)throw vi=0,jc=null,Error(F(185));to(t,n,r),(!(ie&2)||t!==Fe)&&(t===Fe&&(!(ie&2)&&(gl|=n),je===4&&Rn(t,He)),vt(t,r),n===1&&ie===0&&!(e.mode&1)&&(ys=Re()+500,dl&&sr()))}function vt(t,e){var n=t.callbackNode;dw(t,e);var r=wa(t,t===Fe?He:0);if(r===0)n!==null&&ep(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&ep(n),e===1)t.tag===0?hT(Wp.bind(null,t)):Sy(Wp.bind(null,t)),aT(function(){!(ie&6)&&sr()}),n=null;else{switch(Zg(r)){case 1:n=_h;break;case 4:n=Yg;break;case 16:n=Ea;break;case 536870912:n=Xg;break;default:n=Ea}n=Tv(n,mv.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function mv(t,e){if(la=-1,ua=0,ie&6)throw Error(F(327));var n=t.callbackNode;if(ls()&&t.callbackNode!==n)return null;var r=wa(t,t===Fe?He:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Fa(t,r);else{e=r;var s=ie;ie|=2;var i=yv();(Fe!==t||He!==e)&&(sn=null,ys=Re()+500,yr(t,e));do try{VT();break}catch(l){gv(t,l)}while(!0);Vh(),Oa.current=i,ie=s,ke!==null?e=0:(Fe=null,He=0,e=je)}if(e!==0){if(e===2&&(s=ac(t),s!==0&&(r=s,e=Lc(t,s))),e===1)throw n=Fi,yr(t,0),Rn(t,r),vt(t,Re()),n;if(e===6)Rn(t,r);else{if(s=t.current.alternate,!(r&30)&&!kT(s)&&(e=Fa(t,r),e===2&&(i=ac(t),i!==0&&(r=i,e=Lc(t,i))),e===1))throw n=Fi,yr(t,0),Rn(t,r),vt(t,Re()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(F(345));case 2:hr(t,pt,sn);break;case 3:if(Rn(t,r),(r&130023424)===r&&(e=Kh+500-Re(),10<e)){if(wa(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){ct(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=mc(hr.bind(null,t,pt,sn),e);break}hr(t,pt,sn);break;case 4:if(Rn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-Ut(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=Re()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*PT(r/1960))-r,10<r){t.timeoutHandle=mc(hr.bind(null,t,pt,sn),r);break}hr(t,pt,sn);break;case 5:hr(t,pt,sn);break;default:throw Error(F(329))}}}return vt(t,Re()),t.callbackNode===n?mv.bind(null,t):null}function Lc(t,e){var n=yi;return t.current.memoizedState.isDehydrated&&(yr(t,e).flags|=256),t=Fa(t,e),t!==2&&(e=pt,pt=n,e!==null&&Oc(e)),t}function Oc(t){pt===null?pt=t:pt.push.apply(pt,t)}function kT(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Bt(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Rn(t,e){for(e&=~Wh,e&=~gl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ut(e),r=1<<n;t[n]=-1,e&=~r}}function Wp(t){if(ie&6)throw Error(F(327));ls();var e=wa(t,0);if(!(e&1))return vt(t,Re()),null;var n=Fa(t,e);if(t.tag!==0&&n===2){var r=ac(t);r!==0&&(e=r,n=Lc(t,r))}if(n===1)throw n=Fi,yr(t,0),Rn(t,e),vt(t,Re()),n;if(n===6)throw Error(F(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,hr(t,pt,sn),vt(t,Re()),null}function Qh(t,e){var n=ie;ie|=1;try{return t(e)}finally{ie=n,ie===0&&(ys=Re()+500,dl&&sr())}}function Sr(t){kn!==null&&kn.tag===0&&!(ie&6)&&ls();var e=ie;ie|=1;var n=kt.transition,r=ce;try{if(kt.transition=null,ce=1,t)return t()}finally{ce=r,kt.transition=n,ie=e,!(ie&6)&&sr()}}function Gh(){Et=ns.current,ve(ns)}function yr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,oT(n)),ke!==null)for(n=ke.return;n!==null;){var r=n;switch(Ph(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Aa();break;case 3:ms(),ve(gt),ve(it),Mh();break;case 5:bh(r);break;case 4:ms();break;case 13:ve(we);break;case 19:ve(we);break;case 10:Dh(r.type._context);break;case 22:case 23:Gh()}n=n.return}if(Fe=t,ke=t=Un(t.current,null),He=Et=e,je=0,Fi=null,Wh=gl=xr=0,pt=yi=null,pr!==null){for(e=0;e<pr.length;e++)if(n=pr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}pr=null}return t}function gv(t,e){do{var n=ke;try{if(Vh(),ia.current=La,ja){for(var r=Te.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}ja=!1}if(Tr=0,Me=Ve=Te=null,mi=!1,Oi=0,Hh.current=null,n===null||n.return===null){je=1,Fi=e,ke=null;break}e:{var i=t,a=n.return,l=n,u=e;if(e=He,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,f=l,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var v=f.alternate;v?(f.updateQueue=v.updateQueue,f.memoizedState=v.memoizedState,f.lanes=v.lanes):(f.updateQueue=null,f.memoizedState=null)}var A=Dp(a);if(A!==null){A.flags&=-257,jp(A,a,l,i,e),A.mode&1&&Vp(i,h,e),e=A,u=h;var R=e.updateQueue;if(R===null){var N=new Set;N.add(u),e.updateQueue=N}else R.add(u);break e}else{if(!(e&1)){Vp(i,h,e),Yh();break e}u=Error(F(426))}}else if(_e&&l.mode&1){var V=Dp(a);if(V!==null){!(V.flags&65536)&&(V.flags|=256),jp(V,a,l,i,e),kh(gs(u,l));break e}}i=u=gs(u,l),je!==4&&(je=2),yi===null?yi=[i]:yi.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var T=Zy(i,u,e);Ap(i,T);break e;case 1:l=u;var _=i.type,I=i.stateNode;if(!(i.flags&128)&&(typeof _.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(Mn===null||!Mn.has(I)))){i.flags|=65536,e&=-e,i.lanes|=e;var j=ev(i,l,e);Ap(i,j);break e}}i=i.return}while(i!==null)}_v(n)}catch(z){e=z,ke===n&&n!==null&&(ke=n=n.return);continue}break}while(!0)}function yv(){var t=Oa.current;return Oa.current=La,t===null?La:t}function Yh(){(je===0||je===3||je===2)&&(je=4),Fe===null||!(xr&268435455)&&!(gl&268435455)||Rn(Fe,He)}function Fa(t,e){var n=ie;ie|=2;var r=yv();(Fe!==t||He!==e)&&(sn=null,yr(t,e));do try{NT();break}catch(s){gv(t,s)}while(!0);if(Vh(),ie=n,Oa.current=r,ke!==null)throw Error(F(261));return Fe=null,He=0,je}function NT(){for(;ke!==null;)vv(ke)}function VT(){for(;ke!==null&&!rw();)vv(ke)}function vv(t){var e=wv(t.alternate,t,Et);t.memoizedProps=t.pendingProps,e===null?_v(t):ke=e,Hh.current=null}function _v(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=IT(n,e),n!==null){n.flags&=32767,ke=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{je=6,ke=null;return}}else if(n=ST(n,e,Et),n!==null){ke=n;return}if(e=e.sibling,e!==null){ke=e;return}ke=e=t}while(e!==null);je===0&&(je=5)}function hr(t,e,n){var r=ce,s=kt.transition;try{kt.transition=null,ce=1,DT(t,e,n,r)}finally{kt.transition=s,ce=r}return null}function DT(t,e,n,r){do ls();while(kn!==null);if(ie&6)throw Error(F(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(F(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(fw(t,i),t===Fe&&(ke=Fe=null,He=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ho||(Ho=!0,Tv(Ea,function(){return ls(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=kt.transition,kt.transition=null;var a=ce;ce=1;var l=ie;ie|=4,Hh.current=null,CT(t,n),fv(n,t),Zw(fc),Ta=!!dc,fc=dc=null,t.current=n,RT(n),sw(),ie=l,ce=a,kt.transition=i}else t.current=n;if(Ho&&(Ho=!1,kn=t,Ma=s),i=t.pendingLanes,i===0&&(Mn=null),aw(n.stateNode),vt(t,Re()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(ba)throw ba=!1,t=Dc,Dc=null,t;return Ma&1&&t.tag!==0&&ls(),i=t.pendingLanes,i&1?t===jc?vi++:(vi=0,jc=t):vi=0,sr(),null}function ls(){if(kn!==null){var t=Zg(Ma),e=kt.transition,n=ce;try{if(kt.transition=null,ce=16>t?16:t,kn===null)var r=!1;else{if(t=kn,kn=null,Ma=0,ie&6)throw Error(F(331));var s=ie;for(ie|=4,H=t.current;H!==null;){var i=H,a=i.child;if(H.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var h=l[u];for(H=h;H!==null;){var f=H;switch(f.tag){case 0:case 11:case 15:gi(8,f,i)}var m=f.child;if(m!==null)m.return=f,H=m;else for(;H!==null;){f=H;var v=f.sibling,A=f.return;if(cv(f),f===h){H=null;break}if(v!==null){v.return=A,H=v;break}H=A}}}var R=i.alternate;if(R!==null){var N=R.child;if(N!==null){R.child=null;do{var V=N.sibling;N.sibling=null,N=V}while(N!==null)}}H=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,H=a;else e:for(;H!==null;){if(i=H,i.flags&2048)switch(i.tag){case 0:case 11:case 15:gi(9,i,i.return)}var T=i.sibling;if(T!==null){T.return=i.return,H=T;break e}H=i.return}}var _=t.current;for(H=_;H!==null;){a=H;var I=a.child;if(a.subtreeFlags&2064&&I!==null)I.return=a,H=I;else e:for(a=_;H!==null;){if(l=H,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ml(9,l)}}catch(z){Ae(l,l.return,z)}if(l===a){H=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,H=j;break e}H=l.return}}if(ie=s,sr(),Kt&&typeof Kt.onPostCommitFiberRoot=="function")try{Kt.onPostCommitFiberRoot(al,t)}catch{}r=!0}return r}finally{ce=n,kt.transition=e}}return!1}function Kp(t,e,n){e=gs(n,e),e=Zy(t,e,1),t=bn(t,e,1),e=ct(),t!==null&&(to(t,1,e),vt(t,e))}function Ae(t,e,n){if(t.tag===3)Kp(t,t,n);else for(;e!==null;){if(e.tag===3){Kp(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Mn===null||!Mn.has(r))){t=gs(n,t),t=ev(e,t,1),e=bn(e,t,1),t=ct(),e!==null&&(to(e,1,t),vt(e,t));break}}e=e.return}}function jT(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ct(),t.pingedLanes|=t.suspendedLanes&n,Fe===t&&(He&n)===n&&(je===4||je===3&&(He&130023424)===He&&500>Re()-Kh?yr(t,0):Wh|=n),vt(t,e)}function Ev(t,e){e===0&&(t.mode&1?(e=Lo,Lo<<=1,!(Lo&130023424)&&(Lo=4194304)):e=1);var n=ct();t=mn(t,e),t!==null&&(to(t,e,n),vt(t,n))}function LT(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Ev(t,n)}function OT(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(F(314))}r!==null&&r.delete(e),Ev(t,n)}var wv;wv=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||gt.current)mt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return mt=!1,xT(t,e,n);mt=!!(t.flags&131072)}else mt=!1,_e&&e.flags&1048576&&Iy(e,Pa,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;aa(t,e),t=e.pendingProps;var s=ds(e,it.current);as(e,n),s=Uh(null,e,r,t,s,n);var i=zh();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,yt(r)?(i=!0,Ca(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Lh(e),s.updater=pl,e.stateNode=s,s._reactInternals=e,Tc(e,r,t,n),e=Ic(null,e,r,!0,i,n)):(e.tag=0,_e&&i&&Rh(e),ut(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(aa(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=MT(r),t=Ot(r,t),s){case 0:e=Sc(null,e,r,t,n);break e;case 1:e=bp(null,e,r,t,n);break e;case 11:e=Lp(null,e,r,t,n);break e;case 14:e=Op(null,e,r,Ot(r.type,t),n);break e}throw Error(F(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ot(r,s),Sc(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ot(r,s),bp(t,e,r,s,n);case 3:e:{if(sv(e),t===null)throw Error(F(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Ny(t,e),Va(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=gs(Error(F(423)),e),e=Mp(t,e,r,n,s);break e}else if(r!==s){s=gs(Error(F(424)),e),e=Mp(t,e,r,n,s);break e}else for(wt=On(e.stateNode.containerInfo.firstChild),Tt=e,_e=!0,Mt=null,n=Py(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(fs(),r===s){e=gn(t,e,n);break e}ut(t,e,r,n)}e=e.child}return e;case 5:return Vy(e),t===null&&_c(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,pc(r,s)?a=null:i!==null&&pc(r,i)&&(e.flags|=32),rv(t,e),ut(t,e,a,n),e.child;case 6:return t===null&&_c(e),null;case 13:return iv(t,e,n);case 4:return Oh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ps(e,null,r,n):ut(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ot(r,s),Lp(t,e,r,s,n);case 7:return ut(t,e,e.pendingProps,n),e.child;case 8:return ut(t,e,e.pendingProps.children,n),e.child;case 12:return ut(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,pe(ka,r._currentValue),r._currentValue=a,i!==null)if(Bt(i.value,a)){if(i.children===s.children&&!gt.current){e=gn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=hn(-1,n&-n),u.tag=2;var h=i.updateQueue;if(h!==null){h=h.shared;var f=h.pending;f===null?u.next=u:(u.next=f.next,f.next=u),h.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Ec(i.return,n,e),l.lanes|=n;break}u=u.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(F(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),Ec(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}ut(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,as(e,n),s=Vt(s),r=r(s),e.flags|=1,ut(t,e,r,n),e.child;case 14:return r=e.type,s=Ot(r,e.pendingProps),s=Ot(r.type,s),Op(t,e,r,s,n);case 15:return tv(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ot(r,s),aa(t,e),e.tag=1,yt(r)?(t=!0,Ca(e)):t=!1,as(e,n),Jy(e,r,s),Tc(e,r,s,n),Ic(null,e,r,!0,t,n);case 19:return ov(t,e,n);case 22:return nv(t,e,n)}throw Error(F(156,e.tag))};function Tv(t,e){return Gg(t,e)}function bT(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pt(t,e,n,r){return new bT(t,e,n,r)}function Xh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function MT(t){if(typeof t=="function")return Xh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===gh)return 11;if(t===yh)return 14}return 2}function Un(t,e){var n=t.alternate;return n===null?(n=Pt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ca(t,e,n,r,s,i){var a=2;if(r=t,typeof t=="function")Xh(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Wr:return vr(n.children,s,i,e);case mh:a=8,s|=8;break;case Wu:return t=Pt(12,n,e,s|2),t.elementType=Wu,t.lanes=i,t;case Ku:return t=Pt(13,n,e,s),t.elementType=Ku,t.lanes=i,t;case Qu:return t=Pt(19,n,e,s),t.elementType=Qu,t.lanes=i,t;case Vg:return yl(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case kg:a=10;break e;case Ng:a=9;break e;case gh:a=11;break e;case yh:a=14;break e;case In:a=16,r=null;break e}throw Error(F(130,t==null?t:typeof t,""))}return e=Pt(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function vr(t,e,n,r){return t=Pt(7,t,r,e),t.lanes=n,t}function yl(t,e,n,r){return t=Pt(22,t,r,e),t.elementType=Vg,t.lanes=n,t.stateNode={isHidden:!1},t}function Vu(t,e,n){return t=Pt(6,t,null,e),t.lanes=n,t}function Du(t,e,n){return e=Pt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function FT(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fu(0),this.expirationTimes=fu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fu(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Jh(t,e,n,r,s,i,a,l,u){return t=new FT(t,e,n,l,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Pt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Lh(i),t}function UT(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Hr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function xv(t){if(!t)return Qn;t=t._reactInternals;e:{if(Rr(t)!==t||t.tag!==1)throw Error(F(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(yt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(F(171))}if(t.tag===1){var n=t.type;if(yt(n))return xy(t,n,e)}return e}function Sv(t,e,n,r,s,i,a,l,u){return t=Jh(n,r,!0,t,s,i,a,l,u),t.context=xv(null),n=t.current,r=ct(),s=Fn(n),i=hn(r,s),i.callback=e??null,bn(n,i,s),t.current.lanes=s,to(t,s,r),vt(t,r),t}function vl(t,e,n,r){var s=e.current,i=ct(),a=Fn(s);return n=xv(n),e.context===null?e.context=n:e.pendingContext=n,e=hn(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=bn(s,e,a),t!==null&&(zt(t,s,a,i),sa(t,s,a)),a}function Ua(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Qp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Zh(t,e){Qp(t,e),(t=t.alternate)&&Qp(t,e)}function zT(){return null}var Iv=typeof reportError=="function"?reportError:function(t){console.error(t)};function ed(t){this._internalRoot=t}_l.prototype.render=ed.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(F(409));vl(t,e,null,null)};_l.prototype.unmount=ed.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Sr(function(){vl(null,t,null,null)}),e[pn]=null}};function _l(t){this._internalRoot=t}_l.prototype.unstable_scheduleHydration=function(t){if(t){var e=ny();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Cn.length&&e!==0&&e<Cn[n].priority;n++);Cn.splice(n,0,t),n===0&&sy(t)}};function td(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function El(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Gp(){}function BT(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var h=Ua(a);i.call(h)}}var a=Sv(e,r,t,0,null,!1,!1,"",Gp);return t._reactRootContainer=a,t[pn]=a.current,Ni(t.nodeType===8?t.parentNode:t),Sr(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var h=Ua(u);l.call(h)}}var u=Jh(t,0,!1,null,null,!1,!1,"",Gp);return t._reactRootContainer=u,t[pn]=u.current,Ni(t.nodeType===8?t.parentNode:t),Sr(function(){vl(e,u,n,r)}),u}function wl(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var u=Ua(a);l.call(u)}}vl(e,a,t,s)}else a=BT(n,e,t,s,r);return Ua(a)}ey=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ii(e.pendingLanes);n!==0&&(Eh(e,n|1),vt(e,Re()),!(ie&6)&&(ys=Re()+500,sr()))}break;case 13:Sr(function(){var r=mn(t,1);if(r!==null){var s=ct();zt(r,t,1,s)}}),Zh(t,1)}};wh=function(t){if(t.tag===13){var e=mn(t,134217728);if(e!==null){var n=ct();zt(e,t,134217728,n)}Zh(t,134217728)}};ty=function(t){if(t.tag===13){var e=Fn(t),n=mn(t,e);if(n!==null){var r=ct();zt(n,t,e,r)}Zh(t,e)}};ny=function(){return ce};ry=function(t,e){var n=ce;try{return ce=t,e()}finally{ce=n}};sc=function(t,e,n){switch(e){case"input":if(Xu(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=hl(r);if(!s)throw Error(F(90));jg(r),Xu(r,s)}}}break;case"textarea":Og(t,n);break;case"select":e=n.value,e!=null&&rs(t,!!n.multiple,e,!1)}};$g=Qh;qg=Sr;var $T={usingClientEntryPoint:!1,Events:[ro,Yr,hl,zg,Bg,Qh]},ti={findFiberByHostInstance:fr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},qT={bundleType:ti.bundleType,version:ti.version,rendererPackageName:ti.rendererPackageName,rendererConfig:ti.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:En.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Kg(t),t===null?null:t.stateNode},findFiberByHostInstance:ti.findFiberByHostInstance||zT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wo.isDisabled&&Wo.supportsFiber)try{al=Wo.inject(qT),Kt=Wo}catch{}}St.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$T;St.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!td(e))throw Error(F(200));return UT(t,e,null,n)};St.createRoot=function(t,e){if(!td(t))throw Error(F(299));var n=!1,r="",s=Iv;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Jh(t,1,!1,null,null,n,!1,r,s),t[pn]=e.current,Ni(t.nodeType===8?t.parentNode:t),new ed(e)};St.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(F(188)):(t=Object.keys(t).join(","),Error(F(268,t)));return t=Kg(e),t=t===null?null:t.stateNode,t};St.flushSync=function(t){return Sr(t)};St.hydrate=function(t,e,n){if(!El(e))throw Error(F(200));return wl(null,t,e,!0,n)};St.hydrateRoot=function(t,e,n){if(!td(t))throw Error(F(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=Iv;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=Sv(e,null,t,1,n??null,s,!1,i,a),t[pn]=e.current,Ni(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new _l(e)};St.render=function(t,e,n){if(!El(e))throw Error(F(200));return wl(null,t,e,!1,n)};St.unmountComponentAtNode=function(t){if(!El(t))throw Error(F(40));return t._reactRootContainer?(Sr(function(){wl(null,null,t,!1,function(){t._reactRootContainer=null,t[pn]=null})}),!0):!1};St.unstable_batchedUpdates=Qh;St.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!El(n))throw Error(F(200));if(t==null||t._reactInternals===void 0)throw Error(F(38));return wl(t,e,n,!1,r)};St.version="18.3.1-next-f1338f8080-20240426";function Av(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Av)}catch(t){console.error(t)}}Av(),Ag.exports=St;var HT=Ag.exports,Yp=HT;qu.createRoot=Yp.createRoot,qu.hydrateRoot=Yp.hydrateRoot;class io{constructor(e=0,n="Network Error"){this.status=e,this.text=n}}const WT=()=>{if(!(typeof localStorage>"u"))return{get:t=>Promise.resolve(localStorage.getItem(t)),set:(t,e)=>Promise.resolve(localStorage.setItem(t,e)),remove:t=>Promise.resolve(localStorage.removeItem(t))}},$e={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:WT()},nd=t=>t?typeof t=="string"?{publicKey:t}:t.toString()==="[object Object]"?t:{}:{},KT=(t,e="https://api.emailjs.com")=>{if(!t)return;const n=nd(t);$e.publicKey=n.publicKey,$e.blockHeadless=n.blockHeadless,$e.storageProvider=n.storageProvider,$e.blockList=n.blockList,$e.limitRate=n.limitRate,$e.origin=n.origin||e},Cv=async(t,e,n={})=>{const r=await fetch($e.origin+t,{method:"POST",headers:n,body:e}),s=await r.text(),i=new io(r.status,s);if(r.ok)return i;throw i},Rv=(t,e,n)=>{if(!t||typeof t!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e||typeof e!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!n||typeof n!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},QT=t=>{if(t&&t.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},Pv=t=>t.webdriver||!t.languages||t.languages.length===0,kv=()=>new io(451,"Unavailable For Headless Browser"),GT=(t,e)=>{if(!Array.isArray(t))throw"The BlockList list has to be an array";if(typeof e!="string")throw"The BlockList watchVariable has to be a string"},YT=t=>{var e;return!((e=t.list)!=null&&e.length)||!t.watchVariable},XT=(t,e)=>t instanceof FormData?t.get(e):t[e],Nv=(t,e)=>{if(YT(t))return!1;GT(t.list,t.watchVariable);const n=XT(e,t.watchVariable);return typeof n!="string"?!1:t.list.includes(n)},Vv=()=>new io(403,"Forbidden"),JT=(t,e)=>{if(typeof t!="number"||t<0)throw"The LimitRate throttle has to be a positive number";if(e&&typeof e!="string")throw"The LimitRate ID has to be a non-empty string"},ZT=async(t,e,n)=>{const r=Number(await n.get(t)||0);return e-Date.now()+r},Dv=async(t,e,n)=>{if(!e.throttle||!n)return!1;JT(e.throttle,e.id);const r=e.id||t;return await ZT(r,e.throttle,n)>0?!0:(await n.set(r,Date.now().toString()),!1)},jv=()=>new io(429,"Too Many Requests"),ex=async(t,e,n,r)=>{const s=nd(r),i=s.publicKey||$e.publicKey,a=s.blockHeadless||$e.blockHeadless,l=s.storageProvider||$e.storageProvider,u={...$e.blockList,...s.blockList},h={...$e.limitRate,...s.limitRate};return a&&Pv(navigator)?Promise.reject(kv()):(Rv(i,t,e),QT(n),n&&Nv(u,n)?Promise.reject(Vv()):await Dv(location.pathname,h,l)?Promise.reject(jv()):Cv("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:i,service_id:t,template_id:e,template_params:n}),{"Content-type":"application/json"}))},tx=t=>{if(!t||t.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},nx=t=>typeof t=="string"?document.querySelector(t):t,rx=async(t,e,n,r)=>{const s=nd(r),i=s.publicKey||$e.publicKey,a=s.blockHeadless||$e.blockHeadless,l=$e.storageProvider||s.storageProvider,u={...$e.blockList,...s.blockList},h={...$e.limitRate,...s.limitRate};if(a&&Pv(navigator))return Promise.reject(kv());const f=nx(n);Rv(i,t,e),tx(f);const m=new FormData(f);return Nv(u,m)?Promise.reject(Vv()):await Dv(location.pathname,h,l)?Promise.reject(jv()):(m.append("lib_version","4.4.1"),m.append("service_id",t),m.append("template_id",e),m.append("user_id",i),Cv("/api/v1.0/email/send-form",m))},bc={init:KT,send:ex,sendForm:rx,EmailJSResponseStatus:io};/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ui(){return Ui=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ui.apply(this,arguments)}var Nn;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Nn||(Nn={}));const Xp="popstate";function sx(t){t===void 0&&(t={});function e(s,i){let{pathname:a="/",search:l="",hash:u=""}=Pr(s.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),Mc("",{pathname:a,search:l,hash:u},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let a=s.document.querySelector("base"),l="";if(a&&a.getAttribute("href")){let u=s.location.href,h=u.indexOf("#");l=h===-1?u:u.slice(0,h)}return l+"#"+(typeof i=="string"?i:za(i))}function r(s,i){rd(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return ox(e,n,r,t)}function Ne(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function rd(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function ix(){return Math.random().toString(36).substr(2,8)}function Jp(t,e){return{usr:t.state,key:t.key,idx:e}}function Mc(t,e,n,r){return n===void 0&&(n=null),Ui({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Pr(e):e,{state:n,key:e&&e.key||r||ix()})}function za(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Pr(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function ox(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,a=s.history,l=Nn.Pop,u=null,h=f();h==null&&(h=0,a.replaceState(Ui({},a.state,{idx:h}),""));function f(){return(a.state||{idx:null}).idx}function m(){l=Nn.Pop;let V=f(),T=V==null?null:V-h;h=V,u&&u({action:l,location:N.location,delta:T})}function v(V,T){l=Nn.Push;let _=Mc(N.location,V,T);n&&n(_,V),h=f()+1;let I=Jp(_,h),j=N.createHref(_);try{a.pushState(I,"",j)}catch(z){if(z instanceof DOMException&&z.name==="DataCloneError")throw z;s.location.assign(j)}i&&u&&u({action:l,location:N.location,delta:1})}function A(V,T){l=Nn.Replace;let _=Mc(N.location,V,T);n&&n(_,V),h=f();let I=Jp(_,h),j=N.createHref(_);a.replaceState(I,"",j),i&&u&&u({action:l,location:N.location,delta:0})}function R(V){let T=s.location.origin!=="null"?s.location.origin:s.location.href,_=typeof V=="string"?V:za(V);return _=_.replace(/ $/,"%20"),Ne(T,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,T)}let N={get action(){return l},get location(){return t(s,a)},listen(V){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(Xp,m),u=V,()=>{s.removeEventListener(Xp,m),u=null}},createHref(V){return e(s,V)},createURL:R,encodeLocation(V){let T=R(V);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:v,replace:A,go(V){return a.go(V)}};return N}var Zp;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Zp||(Zp={}));function ax(t,e,n){return n===void 0&&(n="/"),lx(t,e,n)}function lx(t,e,n,r){let s=typeof e=="string"?Pr(e):e,i=sd(s.pathname||"/",n);if(i==null)return null;let a=Lv(t);ux(a);let l=null;for(let u=0;l==null&&u<a.length;++u){let h=wx(i);l=vx(a[u],h)}return l}function Lv(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,a,l)=>{let u={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};u.relativePath.startsWith("/")&&(Ne(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let h=zn([r,u.relativePath]),f=n.concat(u);i.children&&i.children.length>0&&(Ne(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),Lv(i.children,e,f,h)),!(i.path==null&&!i.index)&&e.push({path:h,score:gx(h,i.index),routesMeta:f})};return t.forEach((i,a)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,a);else for(let u of Ov(i.path))s(i,a,u)}),e}function Ov(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let a=Ov(r.join("/")),l=[];return l.push(...a.map(u=>u===""?i:[i,u].join("/"))),s&&l.push(...a),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function ux(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:yx(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const cx=/^:[\w-]+$/,hx=3,dx=2,fx=1,px=10,mx=-2,em=t=>t==="*";function gx(t,e){let n=t.split("/"),r=n.length;return n.some(em)&&(r+=mx),e&&(r+=dx),n.filter(s=>!em(s)).reduce((s,i)=>s+(cx.test(i)?hx:i===""?fx:px),r)}function yx(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function vx(t,e,n){let{routesMeta:r}=t,s={},i="/",a=[];for(let l=0;l<r.length;++l){let u=r[l],h=l===r.length-1,f=i==="/"?e:e.slice(i.length)||"/",m=_x({path:u.relativePath,caseSensitive:u.caseSensitive,end:h},f),v=u.route;if(!m)return null;Object.assign(s,m.params),a.push({params:s,pathname:zn([i,m.pathname]),pathnameBase:Ix(zn([i,m.pathnameBase])),route:v}),m.pathnameBase!=="/"&&(i=zn([i,m.pathnameBase]))}return a}function _x(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Ex(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((h,f,m)=>{let{paramName:v,isOptional:A}=f;if(v==="*"){let N=l[m]||"";a=i.slice(0,i.length-N.length).replace(/(.)\/+$/,"$1")}const R=l[m];return A&&!R?h[v]=void 0:h[v]=(R||"").replace(/%2F/g,"/"),h},{}),pathname:i,pathnameBase:a,pattern:t}}function Ex(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),rd(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function wx(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return rd(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function sd(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function Tx(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Pr(t):t;return{pathname:n?n.startsWith("/")?n:xx(n,e):e,search:Ax(r),hash:Cx(s)}}function xx(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function ju(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Sx(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function bv(t,e){let n=Sx(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Mv(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Pr(t):(s=Ui({},t),Ne(!s.pathname||!s.pathname.includes("?"),ju("?","pathname","search",s)),Ne(!s.pathname||!s.pathname.includes("#"),ju("#","pathname","hash",s)),Ne(!s.search||!s.search.includes("#"),ju("#","search","hash",s)));let i=t===""||s.pathname==="",a=i?"/":s.pathname,l;if(a==null)l=n;else{let m=e.length-1;if(!r&&a.startsWith("..")){let v=a.split("/");for(;v[0]==="..";)v.shift(),m-=1;s.pathname=v.join("/")}l=m>=0?e[m]:"/"}let u=Tx(s,l),h=a&&a!=="/"&&a.endsWith("/"),f=(i||a===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(h||f)&&(u.pathname+="/"),u}const zn=t=>t.join("/").replace(/\/\/+/g,"/"),Ix=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Ax=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Cx=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Rx(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Fv=["post","put","patch","delete"];new Set(Fv);const Px=["get",...Fv];new Set(Px);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zi(){return zi=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zi.apply(this,arguments)}const id=O.createContext(null),kx=O.createContext(null),kr=O.createContext(null),Tl=O.createContext(null),ir=O.createContext({outlet:null,matches:[],isDataRoute:!1}),Uv=O.createContext(null);function Nx(t,e){let{relative:n}=e===void 0?{}:e;oo()||Ne(!1);let{basename:r,navigator:s}=O.useContext(kr),{hash:i,pathname:a,search:l}=$v(t,{relative:n}),u=a;return r!=="/"&&(u=a==="/"?r:zn([r,a])),s.createHref({pathname:u,search:l,hash:i})}function oo(){return O.useContext(Tl)!=null}function xl(){return oo()||Ne(!1),O.useContext(Tl).location}function zv(t){O.useContext(kr).static||O.useLayoutEffect(t)}function Sl(){let{isDataRoute:t}=O.useContext(ir);return t?qx():Vx()}function Vx(){oo()||Ne(!1);let t=O.useContext(id),{basename:e,future:n,navigator:r}=O.useContext(kr),{matches:s}=O.useContext(ir),{pathname:i}=xl(),a=JSON.stringify(bv(s,n.v7_relativeSplatPath)),l=O.useRef(!1);return zv(()=>{l.current=!0}),O.useCallback(function(h,f){if(f===void 0&&(f={}),!l.current)return;if(typeof h=="number"){r.go(h);return}let m=Mv(h,JSON.parse(a),i,f.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:zn([e,m.pathname])),(f.replace?r.replace:r.push)(m,f.state,f)},[e,r,a,i,t])}function Bv(){let{matches:t}=O.useContext(ir),e=t[t.length-1];return e?e.params:{}}function $v(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=O.useContext(kr),{matches:s}=O.useContext(ir),{pathname:i}=xl(),a=JSON.stringify(bv(s,r.v7_relativeSplatPath));return O.useMemo(()=>Mv(t,JSON.parse(a),i,n==="path"),[t,a,i,n])}function Dx(t,e){return jx(t,e)}function jx(t,e,n,r){oo()||Ne(!1);let{navigator:s,static:i}=O.useContext(kr),{matches:a}=O.useContext(ir),l=a[a.length-1],u=l?l.params:{};l&&l.pathname;let h=l?l.pathnameBase:"/";l&&l.route;let f=xl(),m;if(e){var v;let T=typeof e=="string"?Pr(e):e;h==="/"||(v=T.pathname)!=null&&v.startsWith(h)||Ne(!1),m=T}else m=f;let A=m.pathname||"/",R=A;if(h!=="/"){let T=h.replace(/^\//,"").split("/");R="/"+A.replace(/^\//,"").split("/").slice(T.length).join("/")}let N=ax(t,{pathname:R}),V=Fx(N&&N.map(T=>Object.assign({},T,{params:Object.assign({},u,T.params),pathname:zn([h,s.encodeLocation?s.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?h:zn([h,s.encodeLocation?s.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),a,n,r);return e&&V?O.createElement(Tl.Provider,{value:{location:zi({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:Nn.Pop}},V):V}function Lx(){let t=$x(),e=Rx(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),n?O.createElement("pre",{style:s},n):null,null)}const Ox=O.createElement(Lx,null);class bx extends O.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?O.createElement(ir.Provider,{value:this.props.routeContext},O.createElement(Uv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Mx(t){let{routeContext:e,match:n,children:r}=t,s=O.useContext(id);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),O.createElement(ir.Provider,{value:e},r)}function Fx(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,l=(s=n)==null?void 0:s.errors;if(l!=null){let f=a.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);f>=0||Ne(!1),a=a.slice(0,Math.min(a.length,f+1))}let u=!1,h=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<a.length;f++){let m=a[f];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(h=f),m.route.id){let{loaderData:v,errors:A}=n,R=m.route.loader&&v[m.route.id]===void 0&&(!A||A[m.route.id]===void 0);if(m.route.lazy||R){u=!0,h>=0?a=a.slice(0,h+1):a=[a[0]];break}}}return a.reduceRight((f,m,v)=>{let A,R=!1,N=null,V=null;n&&(A=l&&m.route.id?l[m.route.id]:void 0,N=m.route.errorElement||Ox,u&&(h<0&&v===0?(Hx("route-fallback"),R=!0,V=null):h===v&&(R=!0,V=m.route.hydrateFallbackElement||null)));let T=e.concat(a.slice(0,v+1)),_=()=>{let I;return A?I=N:R?I=V:m.route.Component?I=O.createElement(m.route.Component,null):m.route.element?I=m.route.element:I=f,O.createElement(Mx,{match:m,routeContext:{outlet:f,matches:T,isDataRoute:n!=null},children:I})};return n&&(m.route.ErrorBoundary||m.route.errorElement||v===0)?O.createElement(bx,{location:n.location,revalidation:n.revalidation,component:N,error:A,children:_(),routeContext:{outlet:null,matches:T,isDataRoute:!0}}):_()},null)}var qv=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(qv||{}),Hv=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Hv||{});function Ux(t){let e=O.useContext(id);return e||Ne(!1),e}function zx(t){let e=O.useContext(kx);return e||Ne(!1),e}function Bx(t){let e=O.useContext(ir);return e||Ne(!1),e}function Wv(t){let e=Bx(),n=e.matches[e.matches.length-1];return n.route.id||Ne(!1),n.route.id}function $x(){var t;let e=O.useContext(Uv),n=zx(),r=Wv();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function qx(){let{router:t}=Ux(qv.UseNavigateStable),e=Wv(Hv.UseNavigateStable),n=O.useRef(!1);return zv(()=>{n.current=!0}),O.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,zi({fromRouteId:e},i)))},[t,e])}const tm={};function Hx(t,e,n){tm[t]||(tm[t]=!0)}function Wx(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function lt(t){Ne(!1)}function Kx(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Nn.Pop,navigator:i,static:a=!1,future:l}=t;oo()&&Ne(!1);let u=e.replace(/^\/*/,"/"),h=O.useMemo(()=>({basename:u,navigator:i,static:a,future:zi({v7_relativeSplatPath:!1},l)}),[u,l,i,a]);typeof r=="string"&&(r=Pr(r));let{pathname:f="/",search:m="",hash:v="",state:A=null,key:R="default"}=r,N=O.useMemo(()=>{let V=sd(f,u);return V==null?null:{location:{pathname:V,search:m,hash:v,state:A,key:R},navigationType:s}},[u,f,m,v,A,R,s]);return N==null?null:O.createElement(kr.Provider,{value:h},O.createElement(Tl.Provider,{children:n,value:N}))}function Qx(t){let{children:e,location:n}=t;return Dx(Fc(e),n)}new Promise(()=>{});function Fc(t,e){e===void 0&&(e=[]);let n=[];return O.Children.forEach(t,(r,s)=>{if(!O.isValidElement(r))return;let i=[...e,s];if(r.type===O.Fragment){n.push.apply(n,Fc(r.props.children,i));return}r.type!==lt&&Ne(!1),!r.props.index||!r.props.children||Ne(!1);let a={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Fc(r.props.children,i)),n.push(a)}),n}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Uc(){return Uc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Uc.apply(this,arguments)}function Gx(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function Yx(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Xx(t,e){return t.button===0&&(!e||e==="_self")&&!Yx(t)}const Jx=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Zx="6";try{window.__reactRouterVersion=Zx}catch{}const eS="startTransition",nm=jE[eS];function tS(t){let{basename:e,children:n,future:r,window:s}=t,i=O.useRef();i.current==null&&(i.current=sx({window:s,v5Compat:!0}));let a=i.current,[l,u]=O.useState({action:a.action,location:a.location}),{v7_startTransition:h}=r||{},f=O.useCallback(m=>{h&&nm?nm(()=>u(m)):u(m)},[u,h]);return O.useLayoutEffect(()=>a.listen(f),[a,f]),O.useEffect(()=>Wx(r),[r]),O.createElement(Kx,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:a,future:r})}const nS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",rS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,st=O.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:a,state:l,target:u,to:h,preventScrollReset:f,viewTransition:m}=e,v=Gx(e,Jx),{basename:A}=O.useContext(kr),R,N=!1;if(typeof h=="string"&&rS.test(h)&&(R=h,nS))try{let I=new URL(window.location.href),j=h.startsWith("//")?new URL(I.protocol+h):new URL(h),z=sd(j.pathname,A);j.origin===I.origin&&z!=null?h=z+j.search+j.hash:N=!0}catch{}let V=Nx(h,{relative:s}),T=sS(h,{replace:a,state:l,target:u,preventScrollReset:f,relative:s,viewTransition:m});function _(I){r&&r(I),I.defaultPrevented||T(I)}return O.createElement("a",Uc({},v,{href:R||V,onClick:N||i?r:_,ref:n,target:u}))});var rm;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(rm||(rm={}));var sm;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(sm||(sm={}));function sS(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:a,viewTransition:l}=e===void 0?{}:e,u=Sl(),h=xl(),f=$v(t,{relative:a});return O.useCallback(m=>{if(Xx(m,n)){m.preventDefault();let v=r!==void 0?r:za(h)===za(f);u(t,{replace:v,state:s,preventScrollReset:i,relative:a,viewTransition:l})}},[h,u,f,r,s,n,t,i,a,l])}const iS=()=>{};var im={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kv=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},oS=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],a=t[n++],l=t[n++],u=((s&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],a=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},Qv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,l=a?t[s+1]:0,u=s+2<t.length,h=u?t[s+2]:0,f=i>>2,m=(i&3)<<4|l>>4;let v=(l&15)<<2|h>>6,A=h&63;u||(A=64,a||(v=64)),r.push(n[f],n[m],n[v],n[A])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Kv(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):oS(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||h==null||m==null)throw new aS;const v=i<<2|l>>4;if(r.push(v),h!==64){const A=l<<4&240|h>>2;if(r.push(A),m!==64){const R=h<<6&192|m;r.push(R)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class aS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const lS=function(t){const e=Kv(t);return Qv.encodeByteArray(e,!0)},Ba=function(t){return lS(t).replace(/\./g,"")},uS=function(t){try{return Qv.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hS=()=>cS().__FIREBASE_DEFAULTS__,dS=()=>{if(typeof process>"u"||typeof im>"u")return;const t=im.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},fS=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&uS(t[1]);return e&&JSON.parse(e)},od=()=>{try{return iS()||hS()||dS()||fS()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},pS=t=>{var e,n;return(n=(e=od())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},mS=t=>{const e=pS(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Gv=()=>{var t;return(t=od())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ba(JSON.stringify(n)),Ba(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vS(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _S(){var t;const e=(t=od())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ES(){return!_S()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function wS(){try{return typeof indexedDB=="object"}catch{return!1}}function TS(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS="FirebaseError";class Rs extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=xS,Object.setPrototypeOf(this,Rs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Yv.prototype.create)}}class Yv{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?SS(i,r):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new Rs(s,l,r)}}function SS(t,e){return t.replace(IS,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const IS=/\{\$([^}]+)}/g;function $a(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],a=e[s];if(om(i)&&om(a)){if(!$a(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function om(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bi(t){return t&&t._delegate?t._delegate:t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xv(t){return t.endsWith(".cloudworkstations.dev")}async function AS(t){return(await fetch(t,{credentials:"include"})).ok}class $i{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new gS;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(PS(e))try{this.getOrInitializeService({instanceIdentifier:dr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=dr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=dr){return this.instances.has(e)}getOptions(e=dr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&a.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&e(a,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:RS(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=dr){return this.component?this.component.multipleInstances?e:dr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function RS(t){return t===dr?void 0:t}function PS(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new CS(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var se;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(se||(se={}));const NS={debug:se.DEBUG,verbose:se.VERBOSE,info:se.INFO,warn:se.WARN,error:se.ERROR,silent:se.SILENT},VS=se.INFO,DS={[se.DEBUG]:"log",[se.VERBOSE]:"log",[se.INFO]:"info",[se.WARN]:"warn",[se.ERROR]:"error"},jS=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=DS[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Jv{constructor(e){this.name=e,this._logLevel=VS,this._logHandler=jS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in se))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?NS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,se.DEBUG,...e),this._logHandler(this,se.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,se.VERBOSE,...e),this._logHandler(this,se.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,se.INFO,...e),this._logHandler(this,se.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,se.WARN,...e),this._logHandler(this,se.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,se.ERROR,...e),this._logHandler(this,se.ERROR,...e)}}const LS=(t,e)=>e.some(n=>t instanceof n);let am,lm;function OS(){return am||(am=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bS(){return lm||(lm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Zv=new WeakMap,zc=new WeakMap,e_=new WeakMap,Lu=new WeakMap,ad=new WeakMap;function MS(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(Bn(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&Zv.set(n,t)}).catch(()=>{}),ad.set(e,t),e}function FS(t){if(zc.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});zc.set(t,e)}let Bc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return zc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||e_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Bn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function US(t){Bc=t(Bc)}function zS(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ou(this),e,...n);return e_.set(r,e.sort?e.sort():[e]),Bn(r)}:bS().includes(t)?function(...e){return t.apply(Ou(this),e),Bn(Zv.get(this))}:function(...e){return Bn(t.apply(Ou(this),e))}}function BS(t){return typeof t=="function"?zS(t):(t instanceof IDBTransaction&&FS(t),LS(t,OS())?new Proxy(t,Bc):t)}function Bn(t){if(t instanceof IDBRequest)return MS(t);if(Lu.has(t))return Lu.get(t);const e=BS(t);return e!==t&&(Lu.set(t,e),ad.set(e,t)),e}const Ou=t=>ad.get(t);function $S(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),l=Bn(a);return r&&a.addEventListener("upgradeneeded",u=>{r(Bn(a.result),u.oldVersion,u.newVersion,Bn(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const qS=["get","getKey","getAll","getAllKeys","count"],HS=["put","add","delete","clear"],bu=new Map;function um(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(bu.get(e))return bu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=HS.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||qS.includes(n)))return;const i=async function(a,...l){const u=this.transaction(a,s?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),s&&u.done]))[0]};return bu.set(e,i),i}US(t=>({...t,get:(e,n,r)=>um(e,n)||t.get(e,n,r),has:(e,n)=>!!um(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(KS(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function KS(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const $c="@firebase/app",cm="0.12.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yn=new Jv("@firebase/app"),QS="@firebase/app-compat",GS="@firebase/analytics-compat",YS="@firebase/analytics",XS="@firebase/app-check-compat",JS="@firebase/app-check",ZS="@firebase/auth",e1="@firebase/auth-compat",t1="@firebase/database",n1="@firebase/data-connect",r1="@firebase/database-compat",s1="@firebase/functions",i1="@firebase/functions-compat",o1="@firebase/installations",a1="@firebase/installations-compat",l1="@firebase/messaging",u1="@firebase/messaging-compat",c1="@firebase/performance",h1="@firebase/performance-compat",d1="@firebase/remote-config",f1="@firebase/remote-config-compat",p1="@firebase/storage",m1="@firebase/storage-compat",g1="@firebase/firestore",y1="@firebase/vertexai",v1="@firebase/firestore-compat",_1="firebase",E1="11.7.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qc="[DEFAULT]",w1={[$c]:"fire-core",[QS]:"fire-core-compat",[YS]:"fire-analytics",[GS]:"fire-analytics-compat",[JS]:"fire-app-check",[XS]:"fire-app-check-compat",[ZS]:"fire-auth",[e1]:"fire-auth-compat",[t1]:"fire-rtdb",[n1]:"fire-data-connect",[r1]:"fire-rtdb-compat",[s1]:"fire-fn",[i1]:"fire-fn-compat",[o1]:"fire-iid",[a1]:"fire-iid-compat",[l1]:"fire-fcm",[u1]:"fire-fcm-compat",[c1]:"fire-perf",[h1]:"fire-perf-compat",[d1]:"fire-rc",[f1]:"fire-rc-compat",[p1]:"fire-gcs",[m1]:"fire-gcs-compat",[g1]:"fire-fst",[v1]:"fire-fst-compat",[y1]:"fire-vertex","fire-js":"fire-js",[_1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qa=new Map,T1=new Map,Hc=new Map;function hm(t,e){try{t.container.addComponent(e)}catch(n){yn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ha(t){const e=t.name;if(Hc.has(e))return yn.debug(`There were multiple attempts to register component ${e}.`),!1;Hc.set(e,t);for(const n of qa.values())hm(n,t);for(const n of T1.values())hm(n,t);return!0}function x1(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function S1(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$n=new Yv("app","Firebase",I1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new $i("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $n.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C1=E1;function t_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:qc,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw $n.create("bad-app-name",{appName:String(s)});if(n||(n=Gv()),!n)throw $n.create("no-options");const i=qa.get(s);if(i){if($a(n,i.options)&&$a(r,i.config))return i;throw $n.create("duplicate-app",{appName:s})}const a=new kS(s);for(const u of Hc.values())a.addComponent(u);const l=new A1(n,r,a);return qa.set(s,l),l}function R1(t=qc){const e=qa.get(t);if(!e&&t===qc&&Gv())return t_();if(!e)throw $n.create("no-app",{appName:t});return e}function us(t,e,n){var r;let s=(r=w1[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),yn.warn(l.join(" "));return}Ha(new $i(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P1="firebase-heartbeat-database",k1=1,qi="firebase-heartbeat-store";let Mu=null;function n_(){return Mu||(Mu=$S(P1,k1,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(qi)}catch(n){console.warn(n)}}}}).catch(t=>{throw $n.create("idb-open",{originalErrorMessage:t.message})})),Mu}async function N1(t){try{const n=(await n_()).transaction(qi),r=await n.objectStore(qi).get(r_(t));return await n.done,r}catch(e){if(e instanceof Rs)yn.warn(e.message);else{const n=$n.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});yn.warn(n.message)}}}async function dm(t,e){try{const r=(await n_()).transaction(qi,"readwrite");await r.objectStore(qi).put(e,r_(t)),await r.done}catch(n){if(n instanceof Rs)yn.warn(n.message);else{const r=$n.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});yn.warn(r.message)}}}function r_(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1=1024,D1=30;class j1{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new O1(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=fm();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>D1){const a=b1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){yn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=fm(),{heartbeatsToSend:r,unsentEntries:s}=L1(this._heartbeatsCache.heartbeats),i=Ba(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return yn.warn(n),""}}}function fm(){return new Date().toISOString().substring(0,10)}function L1(t,e=V1){const n=[];let r=t.slice();for(const s of t){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),pm(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),pm(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class O1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return wS()?TS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await N1(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return dm(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return dm(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function pm(t){return Ba(JSON.stringify({version:2,heartbeats:t})).length}function b1(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M1(t){Ha(new $i("platform-logger",e=>new WS(e),"PRIVATE")),Ha(new $i("heartbeat",e=>new j1(e),"PRIVATE")),us($c,cm,t),us($c,cm,"esm2017"),us("fire-js","")}M1("");var F1="firebase",U1="11.7.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */us(F1,U1,"app");var mm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var qn,s_;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(w,y){function E(){}E.prototype=y.prototype,w.D=y.prototype,w.prototype=new E,w.prototype.constructor=w,w.C=function(S,C,P){for(var x=Array(arguments.length-2),U=2;U<arguments.length;U++)x[U-2]=arguments[U];return y.prototype[C].apply(S,x)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(w,y,E){E||(E=0);var S=Array(16);if(typeof y=="string")for(var C=0;16>C;++C)S[C]=y.charCodeAt(E++)|y.charCodeAt(E++)<<8|y.charCodeAt(E++)<<16|y.charCodeAt(E++)<<24;else for(C=0;16>C;++C)S[C]=y[E++]|y[E++]<<8|y[E++]<<16|y[E++]<<24;y=w.g[0],E=w.g[1],C=w.g[2];var P=w.g[3],x=y+(P^E&(C^P))+S[0]+3614090360&4294967295;y=E+(x<<7&4294967295|x>>>25),x=P+(C^y&(E^C))+S[1]+3905402710&4294967295,P=y+(x<<12&4294967295|x>>>20),x=C+(E^P&(y^E))+S[2]+606105819&4294967295,C=P+(x<<17&4294967295|x>>>15),x=E+(y^C&(P^y))+S[3]+3250441966&4294967295,E=C+(x<<22&4294967295|x>>>10),x=y+(P^E&(C^P))+S[4]+4118548399&4294967295,y=E+(x<<7&4294967295|x>>>25),x=P+(C^y&(E^C))+S[5]+1200080426&4294967295,P=y+(x<<12&4294967295|x>>>20),x=C+(E^P&(y^E))+S[6]+2821735955&4294967295,C=P+(x<<17&4294967295|x>>>15),x=E+(y^C&(P^y))+S[7]+4249261313&4294967295,E=C+(x<<22&4294967295|x>>>10),x=y+(P^E&(C^P))+S[8]+1770035416&4294967295,y=E+(x<<7&4294967295|x>>>25),x=P+(C^y&(E^C))+S[9]+2336552879&4294967295,P=y+(x<<12&4294967295|x>>>20),x=C+(E^P&(y^E))+S[10]+4294925233&4294967295,C=P+(x<<17&4294967295|x>>>15),x=E+(y^C&(P^y))+S[11]+2304563134&4294967295,E=C+(x<<22&4294967295|x>>>10),x=y+(P^E&(C^P))+S[12]+1804603682&4294967295,y=E+(x<<7&4294967295|x>>>25),x=P+(C^y&(E^C))+S[13]+4254626195&4294967295,P=y+(x<<12&4294967295|x>>>20),x=C+(E^P&(y^E))+S[14]+2792965006&4294967295,C=P+(x<<17&4294967295|x>>>15),x=E+(y^C&(P^y))+S[15]+1236535329&4294967295,E=C+(x<<22&4294967295|x>>>10),x=y+(C^P&(E^C))+S[1]+4129170786&4294967295,y=E+(x<<5&4294967295|x>>>27),x=P+(E^C&(y^E))+S[6]+3225465664&4294967295,P=y+(x<<9&4294967295|x>>>23),x=C+(y^E&(P^y))+S[11]+643717713&4294967295,C=P+(x<<14&4294967295|x>>>18),x=E+(P^y&(C^P))+S[0]+3921069994&4294967295,E=C+(x<<20&4294967295|x>>>12),x=y+(C^P&(E^C))+S[5]+3593408605&4294967295,y=E+(x<<5&4294967295|x>>>27),x=P+(E^C&(y^E))+S[10]+38016083&4294967295,P=y+(x<<9&4294967295|x>>>23),x=C+(y^E&(P^y))+S[15]+3634488961&4294967295,C=P+(x<<14&4294967295|x>>>18),x=E+(P^y&(C^P))+S[4]+3889429448&4294967295,E=C+(x<<20&4294967295|x>>>12),x=y+(C^P&(E^C))+S[9]+568446438&4294967295,y=E+(x<<5&4294967295|x>>>27),x=P+(E^C&(y^E))+S[14]+3275163606&4294967295,P=y+(x<<9&4294967295|x>>>23),x=C+(y^E&(P^y))+S[3]+4107603335&4294967295,C=P+(x<<14&4294967295|x>>>18),x=E+(P^y&(C^P))+S[8]+1163531501&4294967295,E=C+(x<<20&4294967295|x>>>12),x=y+(C^P&(E^C))+S[13]+2850285829&4294967295,y=E+(x<<5&4294967295|x>>>27),x=P+(E^C&(y^E))+S[2]+4243563512&4294967295,P=y+(x<<9&4294967295|x>>>23),x=C+(y^E&(P^y))+S[7]+1735328473&4294967295,C=P+(x<<14&4294967295|x>>>18),x=E+(P^y&(C^P))+S[12]+2368359562&4294967295,E=C+(x<<20&4294967295|x>>>12),x=y+(E^C^P)+S[5]+4294588738&4294967295,y=E+(x<<4&4294967295|x>>>28),x=P+(y^E^C)+S[8]+2272392833&4294967295,P=y+(x<<11&4294967295|x>>>21),x=C+(P^y^E)+S[11]+1839030562&4294967295,C=P+(x<<16&4294967295|x>>>16),x=E+(C^P^y)+S[14]+4259657740&4294967295,E=C+(x<<23&4294967295|x>>>9),x=y+(E^C^P)+S[1]+2763975236&4294967295,y=E+(x<<4&4294967295|x>>>28),x=P+(y^E^C)+S[4]+1272893353&4294967295,P=y+(x<<11&4294967295|x>>>21),x=C+(P^y^E)+S[7]+4139469664&4294967295,C=P+(x<<16&4294967295|x>>>16),x=E+(C^P^y)+S[10]+3200236656&4294967295,E=C+(x<<23&4294967295|x>>>9),x=y+(E^C^P)+S[13]+681279174&4294967295,y=E+(x<<4&4294967295|x>>>28),x=P+(y^E^C)+S[0]+3936430074&4294967295,P=y+(x<<11&4294967295|x>>>21),x=C+(P^y^E)+S[3]+3572445317&4294967295,C=P+(x<<16&4294967295|x>>>16),x=E+(C^P^y)+S[6]+76029189&4294967295,E=C+(x<<23&4294967295|x>>>9),x=y+(E^C^P)+S[9]+3654602809&4294967295,y=E+(x<<4&4294967295|x>>>28),x=P+(y^E^C)+S[12]+3873151461&4294967295,P=y+(x<<11&4294967295|x>>>21),x=C+(P^y^E)+S[15]+530742520&4294967295,C=P+(x<<16&4294967295|x>>>16),x=E+(C^P^y)+S[2]+3299628645&4294967295,E=C+(x<<23&4294967295|x>>>9),x=y+(C^(E|~P))+S[0]+4096336452&4294967295,y=E+(x<<6&4294967295|x>>>26),x=P+(E^(y|~C))+S[7]+1126891415&4294967295,P=y+(x<<10&4294967295|x>>>22),x=C+(y^(P|~E))+S[14]+2878612391&4294967295,C=P+(x<<15&4294967295|x>>>17),x=E+(P^(C|~y))+S[5]+4237533241&4294967295,E=C+(x<<21&4294967295|x>>>11),x=y+(C^(E|~P))+S[12]+1700485571&4294967295,y=E+(x<<6&4294967295|x>>>26),x=P+(E^(y|~C))+S[3]+2399980690&4294967295,P=y+(x<<10&4294967295|x>>>22),x=C+(y^(P|~E))+S[10]+4293915773&4294967295,C=P+(x<<15&4294967295|x>>>17),x=E+(P^(C|~y))+S[1]+2240044497&4294967295,E=C+(x<<21&4294967295|x>>>11),x=y+(C^(E|~P))+S[8]+1873313359&4294967295,y=E+(x<<6&4294967295|x>>>26),x=P+(E^(y|~C))+S[15]+4264355552&4294967295,P=y+(x<<10&4294967295|x>>>22),x=C+(y^(P|~E))+S[6]+2734768916&4294967295,C=P+(x<<15&4294967295|x>>>17),x=E+(P^(C|~y))+S[13]+1309151649&4294967295,E=C+(x<<21&4294967295|x>>>11),x=y+(C^(E|~P))+S[4]+4149444226&4294967295,y=E+(x<<6&4294967295|x>>>26),x=P+(E^(y|~C))+S[11]+3174756917&4294967295,P=y+(x<<10&4294967295|x>>>22),x=C+(y^(P|~E))+S[2]+718787259&4294967295,C=P+(x<<15&4294967295|x>>>17),x=E+(P^(C|~y))+S[9]+3951481745&4294967295,w.g[0]=w.g[0]+y&4294967295,w.g[1]=w.g[1]+(C+(x<<21&4294967295|x>>>11))&4294967295,w.g[2]=w.g[2]+C&4294967295,w.g[3]=w.g[3]+P&4294967295}r.prototype.u=function(w,y){y===void 0&&(y=w.length);for(var E=y-this.blockSize,S=this.B,C=this.h,P=0;P<y;){if(C==0)for(;P<=E;)s(this,w,P),P+=this.blockSize;if(typeof w=="string"){for(;P<y;)if(S[C++]=w.charCodeAt(P++),C==this.blockSize){s(this,S),C=0;break}}else for(;P<y;)if(S[C++]=w[P++],C==this.blockSize){s(this,S),C=0;break}}this.h=C,this.o+=y},r.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var y=1;y<w.length-8;++y)w[y]=0;var E=8*this.o;for(y=w.length-8;y<w.length;++y)w[y]=E&255,E/=256;for(this.u(w),w=Array(16),y=E=0;4>y;++y)for(var S=0;32>S;S+=8)w[E++]=this.g[y]>>>S&255;return w};function i(w,y){var E=l;return Object.prototype.hasOwnProperty.call(E,w)?E[w]:E[w]=y(w)}function a(w,y){this.h=y;for(var E=[],S=!0,C=w.length-1;0<=C;C--){var P=w[C]|0;S&&P==y||(E[C]=P,S=!1)}this.g=E}var l={};function u(w){return-128<=w&&128>w?i(w,function(y){return new a([y|0],0>y?-1:0)}):new a([w|0],0>w?-1:0)}function h(w){if(isNaN(w)||!isFinite(w))return m;if(0>w)return V(h(-w));for(var y=[],E=1,S=0;w>=E;S++)y[S]=w/E|0,E*=4294967296;return new a(y,0)}function f(w,y){if(w.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(w.charAt(0)=="-")return V(f(w.substring(1),y));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=h(Math.pow(y,8)),S=m,C=0;C<w.length;C+=8){var P=Math.min(8,w.length-C),x=parseInt(w.substring(C,C+P),y);8>P?(P=h(Math.pow(y,P)),S=S.j(P).add(h(x))):(S=S.j(E),S=S.add(h(x)))}return S}var m=u(0),v=u(1),A=u(16777216);t=a.prototype,t.m=function(){if(N(this))return-V(this).m();for(var w=0,y=1,E=0;E<this.g.length;E++){var S=this.i(E);w+=(0<=S?S:4294967296+S)*y,y*=4294967296}return w},t.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(R(this))return"0";if(N(this))return"-"+V(this).toString(w);for(var y=h(Math.pow(w,6)),E=this,S="";;){var C=j(E,y).g;E=T(E,C.j(y));var P=((0<E.g.length?E.g[0]:E.h)>>>0).toString(w);if(E=C,R(E))return P+S;for(;6>P.length;)P="0"+P;S=P+S}},t.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function R(w){if(w.h!=0)return!1;for(var y=0;y<w.g.length;y++)if(w.g[y]!=0)return!1;return!0}function N(w){return w.h==-1}t.l=function(w){return w=T(this,w),N(w)?-1:R(w)?0:1};function V(w){for(var y=w.g.length,E=[],S=0;S<y;S++)E[S]=~w.g[S];return new a(E,~w.h).add(v)}t.abs=function(){return N(this)?V(this):this},t.add=function(w){for(var y=Math.max(this.g.length,w.g.length),E=[],S=0,C=0;C<=y;C++){var P=S+(this.i(C)&65535)+(w.i(C)&65535),x=(P>>>16)+(this.i(C)>>>16)+(w.i(C)>>>16);S=x>>>16,P&=65535,x&=65535,E[C]=x<<16|P}return new a(E,E[E.length-1]&-2147483648?-1:0)};function T(w,y){return w.add(V(y))}t.j=function(w){if(R(this)||R(w))return m;if(N(this))return N(w)?V(this).j(V(w)):V(V(this).j(w));if(N(w))return V(this.j(V(w)));if(0>this.l(A)&&0>w.l(A))return h(this.m()*w.m());for(var y=this.g.length+w.g.length,E=[],S=0;S<2*y;S++)E[S]=0;for(S=0;S<this.g.length;S++)for(var C=0;C<w.g.length;C++){var P=this.i(S)>>>16,x=this.i(S)&65535,U=w.i(C)>>>16,ae=w.i(C)&65535;E[2*S+2*C]+=x*ae,_(E,2*S+2*C),E[2*S+2*C+1]+=P*ae,_(E,2*S+2*C+1),E[2*S+2*C+1]+=x*U,_(E,2*S+2*C+1),E[2*S+2*C+2]+=P*U,_(E,2*S+2*C+2)}for(S=0;S<y;S++)E[S]=E[2*S+1]<<16|E[2*S];for(S=y;S<2*y;S++)E[S]=0;return new a(E,0)};function _(w,y){for(;(w[y]&65535)!=w[y];)w[y+1]+=w[y]>>>16,w[y]&=65535,y++}function I(w,y){this.g=w,this.h=y}function j(w,y){if(R(y))throw Error("division by zero");if(R(w))return new I(m,m);if(N(w))return y=j(V(w),y),new I(V(y.g),V(y.h));if(N(y))return y=j(w,V(y)),new I(V(y.g),y.h);if(30<w.g.length){if(N(w)||N(y))throw Error("slowDivide_ only works with positive integers.");for(var E=v,S=y;0>=S.l(w);)E=z(E),S=z(S);var C=$(E,1),P=$(S,1);for(S=$(S,2),E=$(E,2);!R(S);){var x=P.add(S);0>=x.l(w)&&(C=C.add(E),P=x),S=$(S,1),E=$(E,1)}return y=T(w,C.j(y)),new I(C,y)}for(C=m;0<=w.l(y);){for(E=Math.max(1,Math.floor(w.m()/y.m())),S=Math.ceil(Math.log(E)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),P=h(E),x=P.j(y);N(x)||0<x.l(w);)E-=S,P=h(E),x=P.j(y);R(P)&&(P=v),C=C.add(P),w=T(w,x)}return new I(C,w)}t.A=function(w){return j(this,w).h},t.and=function(w){for(var y=Math.max(this.g.length,w.g.length),E=[],S=0;S<y;S++)E[S]=this.i(S)&w.i(S);return new a(E,this.h&w.h)},t.or=function(w){for(var y=Math.max(this.g.length,w.g.length),E=[],S=0;S<y;S++)E[S]=this.i(S)|w.i(S);return new a(E,this.h|w.h)},t.xor=function(w){for(var y=Math.max(this.g.length,w.g.length),E=[],S=0;S<y;S++)E[S]=this.i(S)^w.i(S);return new a(E,this.h^w.h)};function z(w){for(var y=w.g.length+1,E=[],S=0;S<y;S++)E[S]=w.i(S)<<1|w.i(S-1)>>>31;return new a(E,w.h)}function $(w,y){var E=y>>5;y%=32;for(var S=w.g.length-E,C=[],P=0;P<S;P++)C[P]=0<y?w.i(P+E)>>>y|w.i(P+E+1)<<32-y:w.i(P+E);return new a(C,w.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,s_=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=f,qn=a}).apply(typeof mm<"u"?mm:typeof self<"u"?self:typeof window<"u"?window:{});var Ko=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var i_,ai,o_,ha,Wc,a_,l_,u_;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,c,d){return o==Array.prototype||o==Object.prototype||(o[c]=d.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ko=="object"&&Ko];for(var c=0;c<o.length;++c){var d=o[c];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var r=n(this);function s(o,c){if(c)e:{var d=r;o=o.split(".");for(var g=0;g<o.length-1;g++){var k=o[g];if(!(k in d))break e;d=d[k]}o=o[o.length-1],g=d[o],c=c(g),c!=g&&c!=null&&e(d,o,{configurable:!0,writable:!0,value:c})}}function i(o,c){o instanceof String&&(o+="");var d=0,g=!1,k={next:function(){if(!g&&d<o.length){var D=d++;return{value:c(D,o[D]),done:!1}}return g=!0,{done:!0,value:void 0}}};return k[Symbol.iterator]=function(){return k},k}s("Array.prototype.values",function(o){return o||function(){return i(this,function(c,d){return d})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function u(o){var c=typeof o;return c=c!="object"?c:o?Array.isArray(o)?"array":c:"null",c=="array"||c=="object"&&typeof o.length=="number"}function h(o){var c=typeof o;return c=="object"&&o!=null||c=="function"}function f(o,c,d){return o.call.apply(o.bind,arguments)}function m(o,c,d){if(!o)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var k=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(k,g),o.apply(c,k)}}return function(){return o.apply(c,arguments)}}function v(o,c,d){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:m,v.apply(null,arguments)}function A(o,c){var d=Array.prototype.slice.call(arguments,1);return function(){var g=d.slice();return g.push.apply(g,arguments),o.apply(this,g)}}function R(o,c){function d(){}d.prototype=c.prototype,o.aa=c.prototype,o.prototype=new d,o.prototype.constructor=o,o.Qb=function(g,k,D){for(var B=Array(arguments.length-2),fe=2;fe<arguments.length;fe++)B[fe-2]=arguments[fe];return c.prototype[k].apply(g,B)}}function N(o){const c=o.length;if(0<c){const d=Array(c);for(let g=0;g<c;g++)d[g]=o[g];return d}return[]}function V(o,c){for(let d=1;d<arguments.length;d++){const g=arguments[d];if(u(g)){const k=o.length||0,D=g.length||0;o.length=k+D;for(let B=0;B<D;B++)o[k+B]=g[B]}else o.push(g)}}class T{constructor(c,d){this.i=c,this.j=d,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function _(o){return/^[\s\xa0]*$/.test(o)}function I(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function j(o){return j[" "](o),o}j[" "]=function(){};var z=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function $(o,c,d){for(const g in o)c.call(d,o[g],g,o)}function w(o,c){for(const d in o)c.call(void 0,o[d],d,o)}function y(o){const c={};for(const d in o)c[d]=o[d];return c}const E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(o,c){let d,g;for(let k=1;k<arguments.length;k++){g=arguments[k];for(d in g)o[d]=g[d];for(let D=0;D<E.length;D++)d=E[D],Object.prototype.hasOwnProperty.call(g,d)&&(o[d]=g[d])}}function C(o){var c=1;o=o.split(":");const d=[];for(;0<c&&o.length;)d.push(o.shift()),c--;return o.length&&d.push(o.join(":")),d}function P(o){l.setTimeout(()=>{throw o},0)}function x(){var o=W;let c=null;return o.g&&(c=o.g,o.g=o.g.next,o.g||(o.h=null),c.next=null),c}class U{constructor(){this.h=this.g=null}add(c,d){const g=ae.get();g.set(c,d),this.h?this.h.next=g:this.g=g,this.h=g}}var ae=new T(()=>new he,o=>o.reset());class he{constructor(){this.next=this.g=this.h=null}set(c,d){this.h=c,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let de,M=!1,W=new U,X=()=>{const o=l.Promise.resolve(void 0);de=()=>{o.then(ue)}};var ue=()=>{for(var o;o=x();){try{o.h.call(o.g)}catch(d){P(d)}var c=ae;c.j(o),100>c.h&&(c.h++,o.next=c.g,c.g=o)}M=!1};function Y(){this.s=this.s,this.C=this.C}Y.prototype.s=!1,Y.prototype.ma=function(){this.s||(this.s=!0,this.N())},Y.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function me(o,c){this.type=o,this.g=this.target=c,this.defaultPrevented=!1}me.prototype.h=function(){this.defaultPrevented=!0};var Qe=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,c=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const d=()=>{};l.addEventListener("test",d,c),l.removeEventListener("test",d,c)}catch{}return o}();function Zt(o,c){if(me.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var d=this.type=o.type,g=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=c,c=o.relatedTarget){if(z){e:{try{j(c.nodeName);var k=!0;break e}catch{}k=!1}k||(c=null)}}else d=="mouseover"?c=o.fromElement:d=="mouseout"&&(c=o.toElement);this.relatedTarget=c,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:en[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&Zt.aa.h.call(this)}}R(Zt,me);var en={2:"touch",3:"pen",4:"mouse"};Zt.prototype.h=function(){Zt.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var tn="closure_listenable_"+(1e6*Math.random()|0),U0=0;function z0(o,c,d,g,k){this.listener=o,this.proxy=null,this.src=c,this.type=d,this.capture=!!g,this.ha=k,this.key=++U0,this.da=this.fa=!1}function ho(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function fo(o){this.src=o,this.g={},this.h=0}fo.prototype.add=function(o,c,d,g,k){var D=o.toString();o=this.g[D],o||(o=this.g[D]=[],this.h++);var B=Ul(o,c,g,k);return-1<B?(c=o[B],d||(c.fa=!1)):(c=new z0(c,this.src,D,!!g,k),c.fa=d,o.push(c)),c};function Fl(o,c){var d=c.type;if(d in o.g){var g=o.g[d],k=Array.prototype.indexOf.call(g,c,void 0),D;(D=0<=k)&&Array.prototype.splice.call(g,k,1),D&&(ho(c),o.g[d].length==0&&(delete o.g[d],o.h--))}}function Ul(o,c,d,g){for(var k=0;k<o.length;++k){var D=o[k];if(!D.da&&D.listener==c&&D.capture==!!d&&D.ha==g)return k}return-1}var zl="closure_lm_"+(1e6*Math.random()|0),Bl={};function Bd(o,c,d,g,k){if(Array.isArray(c)){for(var D=0;D<c.length;D++)Bd(o,c[D],d,g,k);return null}return d=Hd(d),o&&o[tn]?o.K(c,d,h(g)?!!g.capture:!1,k):B0(o,c,d,!1,g,k)}function B0(o,c,d,g,k,D){if(!c)throw Error("Invalid event type");var B=h(k)?!!k.capture:!!k,fe=ql(o);if(fe||(o[zl]=fe=new fo(o)),d=fe.add(c,d,g,B,D),d.proxy)return d;if(g=$0(),d.proxy=g,g.src=o,g.listener=d,o.addEventListener)Qe||(k=B),k===void 0&&(k=!1),o.addEventListener(c.toString(),g,k);else if(o.attachEvent)o.attachEvent(qd(c.toString()),g);else if(o.addListener&&o.removeListener)o.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return d}function $0(){function o(d){return c.call(o.src,o.listener,d)}const c=q0;return o}function $d(o,c,d,g,k){if(Array.isArray(c))for(var D=0;D<c.length;D++)$d(o,c[D],d,g,k);else g=h(g)?!!g.capture:!!g,d=Hd(d),o&&o[tn]?(o=o.i,c=String(c).toString(),c in o.g&&(D=o.g[c],d=Ul(D,d,g,k),-1<d&&(ho(D[d]),Array.prototype.splice.call(D,d,1),D.length==0&&(delete o.g[c],o.h--)))):o&&(o=ql(o))&&(c=o.g[c.toString()],o=-1,c&&(o=Ul(c,d,g,k)),(d=-1<o?c[o]:null)&&$l(d))}function $l(o){if(typeof o!="number"&&o&&!o.da){var c=o.src;if(c&&c[tn])Fl(c.i,o);else{var d=o.type,g=o.proxy;c.removeEventListener?c.removeEventListener(d,g,o.capture):c.detachEvent?c.detachEvent(qd(d),g):c.addListener&&c.removeListener&&c.removeListener(g),(d=ql(c))?(Fl(d,o),d.h==0&&(d.src=null,c[zl]=null)):ho(o)}}}function qd(o){return o in Bl?Bl[o]:Bl[o]="on"+o}function q0(o,c){if(o.da)o=!0;else{c=new Zt(c,this);var d=o.listener,g=o.ha||o.src;o.fa&&$l(o),o=d.call(g,c)}return o}function ql(o){return o=o[zl],o instanceof fo?o:null}var Hl="__closure_events_fn_"+(1e9*Math.random()>>>0);function Hd(o){return typeof o=="function"?o:(o[Hl]||(o[Hl]=function(c){return o.handleEvent(c)}),o[Hl])}function Ge(){Y.call(this),this.i=new fo(this),this.M=this,this.F=null}R(Ge,Y),Ge.prototype[tn]=!0,Ge.prototype.removeEventListener=function(o,c,d,g){$d(this,o,c,d,g)};function ot(o,c){var d,g=o.F;if(g)for(d=[];g;g=g.F)d.push(g);if(o=o.M,g=c.type||c,typeof c=="string")c=new me(c,o);else if(c instanceof me)c.target=c.target||o;else{var k=c;c=new me(g,o),S(c,k)}if(k=!0,d)for(var D=d.length-1;0<=D;D--){var B=c.g=d[D];k=po(B,g,!0,c)&&k}if(B=c.g=o,k=po(B,g,!0,c)&&k,k=po(B,g,!1,c)&&k,d)for(D=0;D<d.length;D++)B=c.g=d[D],k=po(B,g,!1,c)&&k}Ge.prototype.N=function(){if(Ge.aa.N.call(this),this.i){var o=this.i,c;for(c in o.g){for(var d=o.g[c],g=0;g<d.length;g++)ho(d[g]);delete o.g[c],o.h--}}this.F=null},Ge.prototype.K=function(o,c,d,g){return this.i.add(String(o),c,!1,d,g)},Ge.prototype.L=function(o,c,d,g){return this.i.add(String(o),c,!0,d,g)};function po(o,c,d,g){if(c=o.i.g[String(c)],!c)return!0;c=c.concat();for(var k=!0,D=0;D<c.length;++D){var B=c[D];if(B&&!B.da&&B.capture==d){var fe=B.listener,Ue=B.ha||B.src;B.fa&&Fl(o.i,B),k=fe.call(Ue,g)!==!1&&k}}return k&&!g.defaultPrevented}function Wd(o,c,d){if(typeof o=="function")d&&(o=v(o,d));else if(o&&typeof o.handleEvent=="function")o=v(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:l.setTimeout(o,c||0)}function Kd(o){o.g=Wd(()=>{o.g=null,o.i&&(o.i=!1,Kd(o))},o.l);const c=o.h;o.h=null,o.m.apply(null,c)}class H0 extends Y{constructor(c,d){super(),this.m=c,this.l=d,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:Kd(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ls(o){Y.call(this),this.h=o,this.g={}}R(Ls,Y);var Qd=[];function Gd(o){$(o.g,function(c,d){this.g.hasOwnProperty(d)&&$l(c)},o),o.g={}}Ls.prototype.N=function(){Ls.aa.N.call(this),Gd(this)},Ls.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Wl=l.JSON.stringify,W0=l.JSON.parse,K0=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function Kl(){}Kl.prototype.h=null;function Yd(o){return o.h||(o.h=o.i())}function Xd(){}var Os={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ql(){me.call(this,"d")}R(Ql,me);function Gl(){me.call(this,"c")}R(Gl,me);var or={},Jd=null;function mo(){return Jd=Jd||new Ge}or.La="serverreachability";function Zd(o){me.call(this,or.La,o)}R(Zd,me);function bs(o){const c=mo();ot(c,new Zd(c))}or.STAT_EVENT="statevent";function ef(o,c){me.call(this,or.STAT_EVENT,o),this.stat=c}R(ef,me);function at(o){const c=mo();ot(c,new ef(c,o))}or.Ma="timingevent";function tf(o,c){me.call(this,or.Ma,o),this.size=c}R(tf,me);function Ms(o,c){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},c)}function Fs(){this.g=!0}Fs.prototype.xa=function(){this.g=!1};function Q0(o,c,d,g,k,D){o.info(function(){if(o.g)if(D)for(var B="",fe=D.split("&"),Ue=0;Ue<fe.length;Ue++){var oe=fe[Ue].split("=");if(1<oe.length){var Ye=oe[0];oe=oe[1];var Xe=Ye.split("_");B=2<=Xe.length&&Xe[1]=="type"?B+(Ye+"="+oe+"&"):B+(Ye+"=redacted&")}}else B=null;else B=D;return"XMLHTTP REQ ("+g+") [attempt "+k+"]: "+c+`
`+d+`
`+B})}function G0(o,c,d,g,k,D,B){o.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+k+"]: "+c+`
`+d+`
`+D+" "+B})}function Lr(o,c,d,g){o.info(function(){return"XMLHTTP TEXT ("+c+"): "+X0(o,d)+(g?" "+g:"")})}function Y0(o,c){o.info(function(){return"TIMEOUT: "+c})}Fs.prototype.info=function(){};function X0(o,c){if(!o.g)return c;if(!c)return null;try{var d=JSON.parse(c);if(d){for(o=0;o<d.length;o++)if(Array.isArray(d[o])){var g=d[o];if(!(2>g.length)){var k=g[1];if(Array.isArray(k)&&!(1>k.length)){var D=k[0];if(D!="noop"&&D!="stop"&&D!="close")for(var B=1;B<k.length;B++)k[B]=""}}}}return Wl(d)}catch{return c}}var go={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},nf={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Yl;function yo(){}R(yo,Kl),yo.prototype.g=function(){return new XMLHttpRequest},yo.prototype.i=function(){return{}},Yl=new yo;function wn(o,c,d,g){this.j=o,this.i=c,this.l=d,this.R=g||1,this.U=new Ls(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new rf}function rf(){this.i=null,this.g="",this.h=!1}var sf={},Xl={};function Jl(o,c,d){o.L=1,o.v=wo(nn(c)),o.m=d,o.P=!0,of(o,null)}function of(o,c){o.F=Date.now(),vo(o),o.A=nn(o.v);var d=o.A,g=o.R;Array.isArray(g)||(g=[String(g)]),Ef(d.i,"t",g),o.C=0,d=o.j.J,o.h=new rf,o.g=Mf(o.j,d?c:null,!o.m),0<o.O&&(o.M=new H0(v(o.Y,o,o.g),o.O)),c=o.U,d=o.g,g=o.ca;var k="readystatechange";Array.isArray(k)||(k&&(Qd[0]=k.toString()),k=Qd);for(var D=0;D<k.length;D++){var B=Bd(d,k[D],g||c.handleEvent,!1,c.h||c);if(!B)break;c.g[B.key]=B}c=o.H?y(o.H):{},o.m?(o.u||(o.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,c)):(o.u="GET",o.g.ea(o.A,o.u,null,c)),bs(),Q0(o.i,o.u,o.A,o.l,o.R,o.m)}wn.prototype.ca=function(o){o=o.target;const c=this.M;c&&rn(o)==3?c.j():this.Y(o)},wn.prototype.Y=function(o){try{if(o==this.g)e:{const Xe=rn(this.g);var c=this.g.Ba();const Mr=this.g.Z();if(!(3>Xe)&&(Xe!=3||this.g&&(this.h.h||this.g.oa()||Cf(this.g)))){this.J||Xe!=4||c==7||(c==8||0>=Mr?bs(3):bs(2)),Zl(this);var d=this.g.Z();this.X=d;t:if(af(this)){var g=Cf(this.g);o="";var k=g.length,D=rn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ar(this),Us(this);var B="";break t}this.h.i=new l.TextDecoder}for(c=0;c<k;c++)this.h.h=!0,o+=this.h.i.decode(g[c],{stream:!(D&&c==k-1)});g.length=0,this.h.g+=o,this.C=0,B=this.h.g}else B=this.g.oa();if(this.o=d==200,G0(this.i,this.u,this.A,this.l,this.R,Xe,d),this.o){if(this.T&&!this.K){t:{if(this.g){var fe,Ue=this.g;if((fe=Ue.g?Ue.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(fe)){var oe=fe;break t}}oe=null}if(d=oe)Lr(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,eu(this,d);else{this.o=!1,this.s=3,at(12),ar(this),Us(this);break e}}if(this.P){d=!0;let jt;for(;!this.J&&this.C<B.length;)if(jt=J0(this,B),jt==Xl){Xe==4&&(this.s=4,at(14),d=!1),Lr(this.i,this.l,null,"[Incomplete Response]");break}else if(jt==sf){this.s=4,at(15),Lr(this.i,this.l,B,"[Invalid Chunk]"),d=!1;break}else Lr(this.i,this.l,jt,null),eu(this,jt);if(af(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Xe!=4||B.length!=0||this.h.h||(this.s=1,at(16),d=!1),this.o=this.o&&d,!d)Lr(this.i,this.l,B,"[Invalid Chunked Response]"),ar(this),Us(this);else if(0<B.length&&!this.W){this.W=!0;var Ye=this.j;Ye.g==this&&Ye.ba&&!Ye.M&&(Ye.j.info("Great, no buffering proxy detected. Bytes received: "+B.length),ou(Ye),Ye.M=!0,at(11))}}else Lr(this.i,this.l,B,null),eu(this,B);Xe==4&&ar(this),this.o&&!this.J&&(Xe==4?jf(this.j,this):(this.o=!1,vo(this)))}else mE(this.g),d==400&&0<B.indexOf("Unknown SID")?(this.s=3,at(12)):(this.s=0,at(13)),ar(this),Us(this)}}}catch{}finally{}};function af(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function J0(o,c){var d=o.C,g=c.indexOf(`
`,d);return g==-1?Xl:(d=Number(c.substring(d,g)),isNaN(d)?sf:(g+=1,g+d>c.length?Xl:(c=c.slice(g,g+d),o.C=g+d,c)))}wn.prototype.cancel=function(){this.J=!0,ar(this)};function vo(o){o.S=Date.now()+o.I,lf(o,o.I)}function lf(o,c){if(o.B!=null)throw Error("WatchDog timer not null");o.B=Ms(v(o.ba,o),c)}function Zl(o){o.B&&(l.clearTimeout(o.B),o.B=null)}wn.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(Y0(this.i,this.A),this.L!=2&&(bs(),at(17)),ar(this),this.s=2,Us(this)):lf(this,this.S-o)};function Us(o){o.j.G==0||o.J||jf(o.j,o)}function ar(o){Zl(o);var c=o.M;c&&typeof c.ma=="function"&&c.ma(),o.M=null,Gd(o.U),o.g&&(c=o.g,o.g=null,c.abort(),c.ma())}function eu(o,c){try{var d=o.j;if(d.G!=0&&(d.g==o||tu(d.h,o))){if(!o.K&&tu(d.h,o)&&d.G==3){try{var g=d.Da.g.parse(c)}catch{g=null}if(Array.isArray(g)&&g.length==3){var k=g;if(k[0]==0){e:if(!d.u){if(d.g)if(d.g.F+3e3<o.F)Co(d),Io(d);else break e;iu(d),at(18)}}else d.za=k[1],0<d.za-d.T&&37500>k[2]&&d.F&&d.v==0&&!d.C&&(d.C=Ms(v(d.Za,d),6e3));if(1>=hf(d.h)&&d.ca){try{d.ca()}catch{}d.ca=void 0}}else ur(d,11)}else if((o.K||d.g==o)&&Co(d),!_(c))for(k=d.Da.g.parse(c),c=0;c<k.length;c++){let oe=k[c];if(d.T=oe[0],oe=oe[1],d.G==2)if(oe[0]=="c"){d.K=oe[1],d.ia=oe[2];const Ye=oe[3];Ye!=null&&(d.la=Ye,d.j.info("VER="+d.la));const Xe=oe[4];Xe!=null&&(d.Aa=Xe,d.j.info("SVER="+d.Aa));const Mr=oe[5];Mr!=null&&typeof Mr=="number"&&0<Mr&&(g=1.5*Mr,d.L=g,d.j.info("backChannelRequestTimeoutMs_="+g)),g=d;const jt=o.g;if(jt){const Po=jt.g?jt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Po){var D=g.h;D.g||Po.indexOf("spdy")==-1&&Po.indexOf("quic")==-1&&Po.indexOf("h2")==-1||(D.j=D.l,D.g=new Set,D.h&&(nu(D,D.h),D.h=null))}if(g.D){const au=jt.g?jt.g.getResponseHeader("X-HTTP-Session-Id"):null;au&&(g.ya=au,ge(g.I,g.D,au))}}d.G=3,d.l&&d.l.ua(),d.ba&&(d.R=Date.now()-o.F,d.j.info("Handshake RTT: "+d.R+"ms")),g=d;var B=o;if(g.qa=bf(g,g.J?g.ia:null,g.W),B.K){df(g.h,B);var fe=B,Ue=g.L;Ue&&(fe.I=Ue),fe.B&&(Zl(fe),vo(fe)),g.g=B}else Vf(g);0<d.i.length&&Ao(d)}else oe[0]!="stop"&&oe[0]!="close"||ur(d,7);else d.G==3&&(oe[0]=="stop"||oe[0]=="close"?oe[0]=="stop"?ur(d,7):su(d):oe[0]!="noop"&&d.l&&d.l.ta(oe),d.v=0)}}bs(4)}catch{}}var Z0=class{constructor(o,c){this.g=o,this.map=c}};function uf(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function cf(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function hf(o){return o.h?1:o.g?o.g.size:0}function tu(o,c){return o.h?o.h==c:o.g?o.g.has(c):!1}function nu(o,c){o.g?o.g.add(c):o.h=c}function df(o,c){o.h&&o.h==c?o.h=null:o.g&&o.g.has(c)&&o.g.delete(c)}uf.prototype.cancel=function(){if(this.i=ff(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function ff(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let c=o.i;for(const d of o.g.values())c=c.concat(d.D);return c}return N(o.i)}function eE(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(u(o)){for(var c=[],d=o.length,g=0;g<d;g++)c.push(o[g]);return c}c=[],d=0;for(g in o)c[d++]=o[g];return c}function tE(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(u(o)||typeof o=="string"){var c=[];o=o.length;for(var d=0;d<o;d++)c.push(d);return c}c=[],d=0;for(const g in o)c[d++]=g;return c}}}function pf(o,c){if(o.forEach&&typeof o.forEach=="function")o.forEach(c,void 0);else if(u(o)||typeof o=="string")Array.prototype.forEach.call(o,c,void 0);else for(var d=tE(o),g=eE(o),k=g.length,D=0;D<k;D++)c.call(void 0,g[D],d&&d[D],o)}var mf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function nE(o,c){if(o){o=o.split("&");for(var d=0;d<o.length;d++){var g=o[d].indexOf("="),k=null;if(0<=g){var D=o[d].substring(0,g);k=o[d].substring(g+1)}else D=o[d];c(D,k?decodeURIComponent(k.replace(/\+/g," ")):"")}}}function lr(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof lr){this.h=o.h,_o(this,o.j),this.o=o.o,this.g=o.g,Eo(this,o.s),this.l=o.l;var c=o.i,d=new $s;d.i=c.i,c.g&&(d.g=new Map(c.g),d.h=c.h),gf(this,d),this.m=o.m}else o&&(c=String(o).match(mf))?(this.h=!1,_o(this,c[1]||"",!0),this.o=zs(c[2]||""),this.g=zs(c[3]||"",!0),Eo(this,c[4]),this.l=zs(c[5]||"",!0),gf(this,c[6]||"",!0),this.m=zs(c[7]||"")):(this.h=!1,this.i=new $s(null,this.h))}lr.prototype.toString=function(){var o=[],c=this.j;c&&o.push(Bs(c,yf,!0),":");var d=this.g;return(d||c=="file")&&(o.push("//"),(c=this.o)&&o.push(Bs(c,yf,!0),"@"),o.push(encodeURIComponent(String(d)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.s,d!=null&&o.push(":",String(d))),(d=this.l)&&(this.g&&d.charAt(0)!="/"&&o.push("/"),o.push(Bs(d,d.charAt(0)=="/"?iE:sE,!0))),(d=this.i.toString())&&o.push("?",d),(d=this.m)&&o.push("#",Bs(d,aE)),o.join("")};function nn(o){return new lr(o)}function _o(o,c,d){o.j=d?zs(c,!0):c,o.j&&(o.j=o.j.replace(/:$/,""))}function Eo(o,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);o.s=c}else o.s=null}function gf(o,c,d){c instanceof $s?(o.i=c,lE(o.i,o.h)):(d||(c=Bs(c,oE)),o.i=new $s(c,o.h))}function ge(o,c,d){o.i.set(c,d)}function wo(o){return ge(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function zs(o,c){return o?c?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Bs(o,c,d){return typeof o=="string"?(o=encodeURI(o).replace(c,rE),d&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function rE(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var yf=/[#\/\?@]/g,sE=/[#\?:]/g,iE=/[#\?]/g,oE=/[#\?@]/g,aE=/#/g;function $s(o,c){this.h=this.g=null,this.i=o||null,this.j=!!c}function Tn(o){o.g||(o.g=new Map,o.h=0,o.i&&nE(o.i,function(c,d){o.add(decodeURIComponent(c.replace(/\+/g," ")),d)}))}t=$s.prototype,t.add=function(o,c){Tn(this),this.i=null,o=Or(this,o);var d=this.g.get(o);return d||this.g.set(o,d=[]),d.push(c),this.h+=1,this};function vf(o,c){Tn(o),c=Or(o,c),o.g.has(c)&&(o.i=null,o.h-=o.g.get(c).length,o.g.delete(c))}function _f(o,c){return Tn(o),c=Or(o,c),o.g.has(c)}t.forEach=function(o,c){Tn(this),this.g.forEach(function(d,g){d.forEach(function(k){o.call(c,k,g,this)},this)},this)},t.na=function(){Tn(this);const o=Array.from(this.g.values()),c=Array.from(this.g.keys()),d=[];for(let g=0;g<c.length;g++){const k=o[g];for(let D=0;D<k.length;D++)d.push(c[g])}return d},t.V=function(o){Tn(this);let c=[];if(typeof o=="string")_f(this,o)&&(c=c.concat(this.g.get(Or(this,o))));else{o=Array.from(this.g.values());for(let d=0;d<o.length;d++)c=c.concat(o[d])}return c},t.set=function(o,c){return Tn(this),this.i=null,o=Or(this,o),_f(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[c]),this.h+=1,this},t.get=function(o,c){return o?(o=this.V(o),0<o.length?String(o[0]):c):c};function Ef(o,c,d){vf(o,c),0<d.length&&(o.i=null,o.g.set(Or(o,c),N(d)),o.h+=d.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],c=Array.from(this.g.keys());for(var d=0;d<c.length;d++){var g=c[d];const D=encodeURIComponent(String(g)),B=this.V(g);for(g=0;g<B.length;g++){var k=D;B[g]!==""&&(k+="="+encodeURIComponent(String(B[g]))),o.push(k)}}return this.i=o.join("&")};function Or(o,c){return c=String(c),o.j&&(c=c.toLowerCase()),c}function lE(o,c){c&&!o.j&&(Tn(o),o.i=null,o.g.forEach(function(d,g){var k=g.toLowerCase();g!=k&&(vf(this,g),Ef(this,k,d))},o)),o.j=c}function uE(o,c){const d=new Fs;if(l.Image){const g=new Image;g.onload=A(xn,d,"TestLoadImage: loaded",!0,c,g),g.onerror=A(xn,d,"TestLoadImage: error",!1,c,g),g.onabort=A(xn,d,"TestLoadImage: abort",!1,c,g),g.ontimeout=A(xn,d,"TestLoadImage: timeout",!1,c,g),l.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=o}else c(!1)}function cE(o,c){const d=new Fs,g=new AbortController,k=setTimeout(()=>{g.abort(),xn(d,"TestPingServer: timeout",!1,c)},1e4);fetch(o,{signal:g.signal}).then(D=>{clearTimeout(k),D.ok?xn(d,"TestPingServer: ok",!0,c):xn(d,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(k),xn(d,"TestPingServer: error",!1,c)})}function xn(o,c,d,g,k){try{k&&(k.onload=null,k.onerror=null,k.onabort=null,k.ontimeout=null),g(d)}catch{}}function hE(){this.g=new K0}function dE(o,c,d){const g=d||"";try{pf(o,function(k,D){let B=k;h(k)&&(B=Wl(k)),c.push(g+D+"="+encodeURIComponent(B))})}catch(k){throw c.push(g+"type="+encodeURIComponent("_badmap")),k}}function To(o){this.l=o.Ub||null,this.j=o.eb||!1}R(To,Kl),To.prototype.g=function(){return new xo(this.l,this.j)},To.prototype.i=function(o){return function(){return o}}({});function xo(o,c){Ge.call(this),this.D=o,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}R(xo,Ge),t=xo.prototype,t.open=function(o,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=c,this.readyState=1,Hs(this)},t.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(c.body=o),(this.D||l).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,qs(this)),this.readyState=0},t.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Hs(this)),this.g&&(this.readyState=3,Hs(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;wf(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function wf(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}t.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var c=o.value?o.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!o.done}))&&(this.response=this.responseText+=c)}o.done?qs(this):Hs(this),this.readyState==3&&wf(this)}},t.Ra=function(o){this.g&&(this.response=this.responseText=o,qs(this))},t.Qa=function(o){this.g&&(this.response=o,qs(this))},t.ga=function(){this.g&&qs(this)};function qs(o){o.readyState=4,o.l=null,o.j=null,o.v=null,Hs(o)}t.setRequestHeader=function(o,c){this.u.append(o,c)},t.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],c=this.h.entries();for(var d=c.next();!d.done;)d=d.value,o.push(d[0]+": "+d[1]),d=c.next();return o.join(`\r
`)};function Hs(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(xo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function Tf(o){let c="";return $(o,function(d,g){c+=g,c+=":",c+=d,c+=`\r
`}),c}function ru(o,c,d){e:{for(g in d){var g=!1;break e}g=!0}g||(d=Tf(d),typeof o=="string"?d!=null&&encodeURIComponent(String(d)):ge(o,c,d))}function Ie(o){Ge.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}R(Ie,Ge);var fE=/^https?$/i,pE=["POST","PUT"];t=Ie.prototype,t.Ha=function(o){this.J=o},t.ea=function(o,c,d,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);c=c?c.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Yl.g(),this.v=this.o?Yd(this.o):Yd(Yl),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(c,String(o),!0),this.B=!1}catch(D){xf(this,D);return}if(o=d||"",d=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var k in g)d.set(k,g[k]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(const D of g.keys())d.set(D,g.get(D));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(d.keys()).find(D=>D.toLowerCase()=="content-type"),k=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(pE,c,void 0))||g||k||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[D,B]of d)this.g.setRequestHeader(D,B);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Af(this),this.u=!0,this.g.send(o),this.u=!1}catch(D){xf(this,D)}};function xf(o,c){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=c,o.m=5,Sf(o),So(o)}function Sf(o){o.A||(o.A=!0,ot(o,"complete"),ot(o,"error"))}t.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,ot(this,"complete"),ot(this,"abort"),So(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),So(this,!0)),Ie.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?If(this):this.bb())},t.bb=function(){If(this)};function If(o){if(o.h&&typeof a<"u"&&(!o.v[1]||rn(o)!=4||o.Z()!=2)){if(o.u&&rn(o)==4)Wd(o.Ea,0,o);else if(ot(o,"readystatechange"),rn(o)==4){o.h=!1;try{const B=o.Z();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break e;default:c=!1}var d;if(!(d=c)){var g;if(g=B===0){var k=String(o.D).match(mf)[1]||null;!k&&l.self&&l.self.location&&(k=l.self.location.protocol.slice(0,-1)),g=!fE.test(k?k.toLowerCase():"")}d=g}if(d)ot(o,"complete"),ot(o,"success");else{o.m=6;try{var D=2<rn(o)?o.g.statusText:""}catch{D=""}o.l=D+" ["+o.Z()+"]",Sf(o)}}finally{So(o)}}}}function So(o,c){if(o.g){Af(o);const d=o.g,g=o.v[0]?()=>{}:null;o.g=null,o.v=null,c||ot(o,"ready");try{d.onreadystatechange=g}catch{}}}function Af(o){o.I&&(l.clearTimeout(o.I),o.I=null)}t.isActive=function(){return!!this.g};function rn(o){return o.g?o.g.readyState:0}t.Z=function(){try{return 2<rn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(o){if(this.g){var c=this.g.responseText;return o&&c.indexOf(o)==0&&(c=c.substring(o.length)),W0(c)}};function Cf(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function mE(o){const c={};o=(o.g&&2<=rn(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<o.length;g++){if(_(o[g]))continue;var d=C(o[g]);const k=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();const D=c[k]||[];c[k]=D,D.push(d)}w(c,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ws(o,c,d){return d&&d.internalChannelParams&&d.internalChannelParams[o]||c}function Rf(o){this.Aa=0,this.i=[],this.j=new Fs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ws("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ws("baseRetryDelayMs",5e3,o),this.cb=Ws("retryDelaySeedMs",1e4,o),this.Wa=Ws("forwardChannelMaxRetries",2,o),this.wa=Ws("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new uf(o&&o.concurrentRequestLimit),this.Da=new hE,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Rf.prototype,t.la=8,t.G=1,t.connect=function(o,c,d,g){at(0),this.W=o,this.H=c||{},d&&g!==void 0&&(this.H.OSID=d,this.H.OAID=g),this.F=this.X,this.I=bf(this,null,this.W),Ao(this)};function su(o){if(Pf(o),o.G==3){var c=o.U++,d=nn(o.I);if(ge(d,"SID",o.K),ge(d,"RID",c),ge(d,"TYPE","terminate"),Ks(o,d),c=new wn(o,o.j,c),c.L=2,c.v=wo(nn(d)),d=!1,l.navigator&&l.navigator.sendBeacon)try{d=l.navigator.sendBeacon(c.v.toString(),"")}catch{}!d&&l.Image&&(new Image().src=c.v,d=!0),d||(c.g=Mf(c.j,null),c.g.ea(c.v)),c.F=Date.now(),vo(c)}Of(o)}function Io(o){o.g&&(ou(o),o.g.cancel(),o.g=null)}function Pf(o){Io(o),o.u&&(l.clearTimeout(o.u),o.u=null),Co(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function Ao(o){if(!cf(o.h)&&!o.s){o.s=!0;var c=o.Ga;de||X(),M||(de(),M=!0),W.add(c,o),o.B=0}}function gE(o,c){return hf(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=c.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=Ms(v(o.Ga,o,c),Lf(o,o.B)),o.B++,!0)}t.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const k=new wn(this,this.j,o);let D=this.o;if(this.S&&(D?(D=y(D),S(D,this.S)):D=this.S),this.m!==null||this.O||(k.H=D,D=null),this.P)e:{for(var c=0,d=0;d<this.i.length;d++){t:{var g=this.i[d];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(c+=g,4096<c){c=d;break e}if(c===4096||d===this.i.length-1){c=d+1;break e}}c=1e3}else c=1e3;c=Nf(this,k,c),d=nn(this.I),ge(d,"RID",o),ge(d,"CVER",22),this.D&&ge(d,"X-HTTP-Session-Id",this.D),Ks(this,d),D&&(this.O?c="headers="+encodeURIComponent(String(Tf(D)))+"&"+c:this.m&&ru(d,this.m,D)),nu(this.h,k),this.Ua&&ge(d,"TYPE","init"),this.P?(ge(d,"$req",c),ge(d,"SID","null"),k.T=!0,Jl(k,d,null)):Jl(k,d,c),this.G=2}}else this.G==3&&(o?kf(this,o):this.i.length==0||cf(this.h)||kf(this))};function kf(o,c){var d;c?d=c.l:d=o.U++;const g=nn(o.I);ge(g,"SID",o.K),ge(g,"RID",d),ge(g,"AID",o.T),Ks(o,g),o.m&&o.o&&ru(g,o.m,o.o),d=new wn(o,o.j,d,o.B+1),o.m===null&&(d.H=o.o),c&&(o.i=c.D.concat(o.i)),c=Nf(o,d,1e3),d.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),nu(o.h,d),Jl(d,g,c)}function Ks(o,c){o.H&&$(o.H,function(d,g){ge(c,g,d)}),o.l&&pf({},function(d,g){ge(c,g,d)})}function Nf(o,c,d){d=Math.min(o.i.length,d);var g=o.l?v(o.l.Na,o.l,o):null;e:{var k=o.i;let D=-1;for(;;){const B=["count="+d];D==-1?0<d?(D=k[0].g,B.push("ofs="+D)):D=0:B.push("ofs="+D);let fe=!0;for(let Ue=0;Ue<d;Ue++){let oe=k[Ue].g;const Ye=k[Ue].map;if(oe-=D,0>oe)D=Math.max(0,k[Ue].g-100),fe=!1;else try{dE(Ye,B,"req"+oe+"_")}catch{g&&g(Ye)}}if(fe){g=B.join("&");break e}}}return o=o.i.splice(0,d),c.D=o,g}function Vf(o){if(!o.g&&!o.u){o.Y=1;var c=o.Fa;de||X(),M||(de(),M=!0),W.add(c,o),o.v=0}}function iu(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=Ms(v(o.Fa,o),Lf(o,o.v)),o.v++,!0)}t.Fa=function(){if(this.u=null,Df(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=Ms(v(this.ab,this),o)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,at(10),Io(this),Df(this))};function ou(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function Df(o){o.g=new wn(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var c=nn(o.qa);ge(c,"RID","rpc"),ge(c,"SID",o.K),ge(c,"AID",o.T),ge(c,"CI",o.F?"0":"1"),!o.F&&o.ja&&ge(c,"TO",o.ja),ge(c,"TYPE","xmlhttp"),Ks(o,c),o.m&&o.o&&ru(c,o.m,o.o),o.L&&(o.g.I=o.L);var d=o.g;o=o.ia,d.L=1,d.v=wo(nn(c)),d.m=null,d.P=!0,of(d,o)}t.Za=function(){this.C!=null&&(this.C=null,Io(this),iu(this),at(19))};function Co(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function jf(o,c){var d=null;if(o.g==c){Co(o),ou(o),o.g=null;var g=2}else if(tu(o.h,c))d=c.D,df(o.h,c),g=1;else return;if(o.G!=0){if(c.o)if(g==1){d=c.m?c.m.length:0,c=Date.now()-c.F;var k=o.B;g=mo(),ot(g,new tf(g,d)),Ao(o)}else Vf(o);else if(k=c.s,k==3||k==0&&0<c.X||!(g==1&&gE(o,c)||g==2&&iu(o)))switch(d&&0<d.length&&(c=o.h,c.i=c.i.concat(d)),k){case 1:ur(o,5);break;case 4:ur(o,10);break;case 3:ur(o,6);break;default:ur(o,2)}}}function Lf(o,c){let d=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(d*=2),d*c}function ur(o,c){if(o.j.info("Error code "+c),c==2){var d=v(o.fb,o),g=o.Xa;const k=!g;g=new lr(g||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||_o(g,"https"),wo(g),k?uE(g.toString(),d):cE(g.toString(),d)}else at(2);o.G=0,o.l&&o.l.sa(c),Of(o),Pf(o)}t.fb=function(o){o?(this.j.info("Successfully pinged google.com"),at(2)):(this.j.info("Failed to ping google.com"),at(1))};function Of(o){if(o.G=0,o.ka=[],o.l){const c=ff(o.h);(c.length!=0||o.i.length!=0)&&(V(o.ka,c),V(o.ka,o.i),o.h.i.length=0,N(o.i),o.i.length=0),o.l.ra()}}function bf(o,c,d){var g=d instanceof lr?nn(d):new lr(d);if(g.g!="")c&&(g.g=c+"."+g.g),Eo(g,g.s);else{var k=l.location;g=k.protocol,c=c?c+"."+k.hostname:k.hostname,k=+k.port;var D=new lr(null);g&&_o(D,g),c&&(D.g=c),k&&Eo(D,k),d&&(D.l=d),g=D}return d=o.D,c=o.ya,d&&c&&ge(g,d,c),ge(g,"VER",o.la),Ks(o,g),g}function Mf(o,c,d){if(c&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=o.Ca&&!o.pa?new Ie(new To({eb:d})):new Ie(o.pa),c.Ha(o.J),c}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ff(){}t=Ff.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ro(){}Ro.prototype.g=function(o,c){return new _t(o,c)};function _t(o,c){Ge.call(this),this.g=new Rf(c),this.l=o,this.h=c&&c.messageUrlParams||null,o=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(o?o["X-WebChannel-Content-Type"]=c.messageContentType:o={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(o?o["X-WebChannel-Client-Profile"]=c.va:o={"X-WebChannel-Client-Profile":c.va}),this.g.S=o,(o=c&&c.Sb)&&!_(o)&&(this.g.m=o),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!_(c)&&(this.g.D=c,o=this.h,o!==null&&c in o&&(o=this.h,c in o&&delete o[c])),this.j=new br(this)}R(_t,Ge),_t.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},_t.prototype.close=function(){su(this.g)},_t.prototype.o=function(o){var c=this.g;if(typeof o=="string"){var d={};d.__data__=o,o=d}else this.u&&(d={},d.__data__=Wl(o),o=d);c.i.push(new Z0(c.Ya++,o)),c.G==3&&Ao(c)},_t.prototype.N=function(){this.g.l=null,delete this.j,su(this.g),delete this.g,_t.aa.N.call(this)};function Uf(o){Ql.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var c=o.__sm__;if(c){e:{for(const d in c){o=d;break e}o=void 0}(this.i=o)&&(o=this.i,c=c!==null&&o in c?c[o]:void 0),this.data=c}else this.data=o}R(Uf,Ql);function zf(){Gl.call(this),this.status=1}R(zf,Gl);function br(o){this.g=o}R(br,Ff),br.prototype.ua=function(){ot(this.g,"a")},br.prototype.ta=function(o){ot(this.g,new Uf(o))},br.prototype.sa=function(o){ot(this.g,new zf)},br.prototype.ra=function(){ot(this.g,"b")},Ro.prototype.createWebChannel=Ro.prototype.g,_t.prototype.send=_t.prototype.o,_t.prototype.open=_t.prototype.m,_t.prototype.close=_t.prototype.close,u_=function(){return new Ro},l_=function(){return mo()},a_=or,Wc={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},go.NO_ERROR=0,go.TIMEOUT=8,go.HTTP_ERROR=6,ha=go,nf.COMPLETE="complete",o_=nf,Xd.EventType=Os,Os.OPEN="a",Os.CLOSE="b",Os.ERROR="c",Os.MESSAGE="d",Ge.prototype.listen=Ge.prototype.K,ai=Xd,Ie.prototype.listenOnce=Ie.prototype.L,Ie.prototype.getLastError=Ie.prototype.Ka,Ie.prototype.getLastErrorCode=Ie.prototype.Ba,Ie.prototype.getStatus=Ie.prototype.Z,Ie.prototype.getResponseJson=Ie.prototype.Oa,Ie.prototype.getResponseText=Ie.prototype.oa,Ie.prototype.send=Ie.prototype.ea,Ie.prototype.setWithCredentials=Ie.prototype.Ha,i_=Ie}).apply(typeof Ko<"u"?Ko:typeof self<"u"?self:typeof window<"u"?window:{});const gm="@firebase/firestore",ym="4.7.12";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}tt.UNAUTHENTICATED=new tt(null),tt.GOOGLE_CREDENTIALS=new tt("google-credentials-uid"),tt.FIRST_PARTY=new tt("first-party-uid"),tt.MOCK_USER=new tt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ps="11.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ir=new Jv("@firebase/firestore");function zr(){return Ir.logLevel}function q(t,...e){if(Ir.logLevel<=se.DEBUG){const n=e.map(ld);Ir.debug(`Firestore (${Ps}): ${t}`,...n)}}function vn(t,...e){if(Ir.logLevel<=se.ERROR){const n=e.map(ld);Ir.error(`Firestore (${Ps}): ${t}`,...n)}}function vs(t,...e){if(Ir.logLevel<=se.WARN){const n=e.map(ld);Ir.warn(`Firestore (${Ps}): ${t}`,...n)}}function ld(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,c_(t,r,n)}function c_(t,e,n){let r=`FIRESTORE (${Ps}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw vn(r),new Error(r)}function le(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||c_(e,s,r)}function Z(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class K extends Rs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class z1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(tt.UNAUTHENTICATED))}shutdown(){}}class B1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class $1{constructor(e){this.t=e,this.currentUser=tt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){le(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new Hn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Hn,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Hn)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(le(typeof r.accessToken=="string",31837,{l:r}),new h_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return le(e===null||typeof e=="string",2055,{h:e}),new tt(e)}}class q1{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=tt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class H1{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new q1(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(tt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class vm{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class W1{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,S1(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){le(this.o===void 0,3512);const r=i=>{i.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,q("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new vm(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(le(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new vm(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K1(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d_(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=K1(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function ee(t,e){return t<e?-1:t>e?1:0}function Kc(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),s=e.codePointAt(n);if(r!==s){if(r<128&&s<128)return ee(r,s);{const i=d_(),a=Q1(i.encode(_m(t,n)),i.encode(_m(e,n)));return a!==0?a:ee(r,s)}}n+=r>65535?2:1}return ee(t.length,e.length)}function _m(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function Q1(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return ee(t[n],e[n]);return ee(t.length,e.length)}function _s(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Em=-62135596800,wm=1e6;class Le{static now(){return Le.fromMillis(Date.now())}static fromDate(e){return Le.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*wm);return new Le(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new K(b.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new K(b.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Em)throw new K(b.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K(b.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/wm}_compareTo(e){return this.seconds===e.seconds?ee(this.nanoseconds,e.nanoseconds):ee(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Em;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{static fromTimestamp(e){return new J(e)}static min(){return new J(new Le(0,0))}static max(){return new J(new Le(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tm="__name__";class Ht{constructor(e,n,r){n===void 0?n=0:n>e.length&&G(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&G(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ht.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ht?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Ht.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return ee(e.length,n.length)}static compareSegments(e,n){const r=Ht.isNumericId(e),s=Ht.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Ht.extractNumericId(e).compare(Ht.extractNumericId(n)):Kc(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return qn.fromString(e.substring(4,e.length-2))}}class Ee extends Ht{construct(e,n,r){return new Ee(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new K(b.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ee(n)}static emptyPath(){return new Ee([])}}const G1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class qe extends Ht{construct(e,n,r){return new qe(e,n,r)}static isValidIdentifier(e){return G1.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),qe.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Tm}static keyField(){return new qe([Tm])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new K(b.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new K(b.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new K(b.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(r+=l,s++):(i(),s++)}if(i(),a)throw new K(b.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new qe(n)}static emptyPath(){return new qe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.path=e}static fromPath(e){return new Q(Ee.fromString(e))}static fromName(e){return new Q(Ee.fromString(e).popFirst(5))}static empty(){return new Q(Ee.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ee.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ee.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Q(new Ee(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hi=-1;function Y1(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=J.fromTimestamp(r===1e9?new Le(n+1,0):new Le(n,r));return new Gn(s,Q.empty(),e)}function X1(t){return new Gn(t.readTime,t.key,Hi)}class Gn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Gn(J.min(),Q.empty(),Hi)}static max(){return new Gn(J.max(),Q.empty(),Hi)}}function J1(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Q.comparator(t.documentKey,e.documentKey),n!==0?n:ee(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class eI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ks(t){if(t.code!==b.FAILED_PRECONDITION||t.message!==Z1)throw t;q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&G(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new L((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof L?n:L.resolve(n)}catch(n){return L.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):L.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):L.reject(n)}static resolve(e){return new L((n,r)=>{n(e)})}static reject(e){return new L((n,r)=>{r(e)})}static waitFor(e){return new L((n,r)=>{let s=0,i=0,a=!1;e.forEach(l=>{++s,l.next(()=>{++i,a&&i===s&&n()},u=>r(u))}),a=!0,i===s&&n()})}static or(e){let n=L.resolve(!1);for(const r of e)n=n.next(s=>s?L.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new L((r,s)=>{const i=e.length,a=new Array(i);let l=0;for(let u=0;u<i;u++){const h=u;n(e[h]).next(f=>{a[h]=f,++l,l===i&&r(a)},f=>s(f))}})}static doWhile(e,n){return new L((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function tI(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ns(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>n.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}Il.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ud=-1;function Al(t){return t==null}function Wa(t){return t===0&&1/t==-1/0}function nI(t){return typeof t=="number"&&Number.isInteger(t)&&!Wa(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p_="";function rI(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=xm(e)),e=sI(t.get(n),e);return xm(e)}function sI(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case p_:n+="";break;default:n+=i}}return n}function xm(t){return t+p_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sm(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Nr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function m_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e,n){this.comparator=e,this.root=n||Be.EMPTY}insert(e,n){return new Se(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Be.BLACK,null,null))}remove(e){return new Se(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Be.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Qo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Qo(this.root,e,this.comparator,!1)}getReverseIterator(){return new Qo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Qo(this.root,e,this.comparator,!0)}}class Qo{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Be{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Be.RED,this.left=s??Be.EMPTY,this.right=i??Be.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Be(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Be.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Be.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Be.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Be.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw G(43730,{key:this.key,value:this.value});if(this.right.isRed())throw G(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw G(27949);return e+(this.isRed()?0:1)}}Be.EMPTY=null,Be.RED=!0,Be.BLACK=!1;Be.EMPTY=new class{constructor(){this.size=0}get key(){throw G(57766)}get value(){throw G(16141)}get color(){throw G(16727)}get left(){throw G(29726)}get right(){throw G(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new Be(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e){this.comparator=e,this.data=new Se(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Im(this.data.getIterator())}getIteratorFrom(e){return new Im(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Oe)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Oe(this.comparator);return n.data=e,n}}class Im{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.fields=e,e.sort(qe.comparator)}static empty(){return new Ft([])}unionWith(e){let n=new Oe(qe.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ft(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return _s(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new g_("Invalid base64 string: "+i):i}}(e);return new Ke(n)}static fromUint8Array(e){const n=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new Ke(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ee(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ke.EMPTY_BYTE_STRING=new Ke("");const iI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yn(t){if(le(!!t,39018),typeof t=="string"){let e=0;const n=iI.exec(t);if(le(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ce(t.seconds),nanos:Ce(t.nanos)}}function Ce(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Xn(t){return typeof t=="string"?Ke.fromBase64String(t):Ke.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y_="server_timestamp",v_="__type__",__="__previous_value__",E_="__local_write_time__";function cd(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[v_])===null||n===void 0?void 0:n.stringValue)===y_}function Cl(t){const e=t.mapValue.fields[__];return cd(e)?Cl(e):e}function Wi(t){const e=Yn(t.mapValue.fields[E_].timestampValue);return new Le(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(e,n,r,s,i,a,l,u,h,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h,this.isUsingEmulator=f}}const Ka="(default)";class Ki{constructor(e,n){this.projectId=e,this.database=n||Ka}static empty(){return new Ki("","")}get isDefaultDatabase(){return this.database===Ka}isEqual(e){return e instanceof Ki&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w_="__type__",aI="__max__",Go={mapValue:{}},T_="__vector__",Qa="value";function Jn(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?cd(t)?4:uI(t)?9007199254740991:lI(t)?10:11:G(28295,{value:t})}function Xt(t,e){if(t===e)return!0;const n=Jn(t);if(n!==Jn(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Wi(t).isEqual(Wi(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=Yn(s.timestampValue),l=Yn(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Xn(s.bytesValue).isEqual(Xn(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Ce(s.geoPointValue.latitude)===Ce(i.geoPointValue.latitude)&&Ce(s.geoPointValue.longitude)===Ce(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Ce(s.integerValue)===Ce(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=Ce(s.doubleValue),l=Ce(i.doubleValue);return a===l?Wa(a)===Wa(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return _s(t.arrayValue.values||[],e.arrayValue.values||[],Xt);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},l=i.mapValue.fields||{};if(Sm(a)!==Sm(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!Xt(a[u],l[u])))return!1;return!0}(t,e);default:return G(52216,{left:t})}}function Qi(t,e){return(t.values||[]).find(n=>Xt(n,e))!==void 0}function Es(t,e){if(t===e)return 0;const n=Jn(t),r=Jn(e);if(n!==r)return ee(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ee(t.booleanValue,e.booleanValue);case 2:return function(i,a){const l=Ce(i.integerValue||i.doubleValue),u=Ce(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return Am(t.timestampValue,e.timestampValue);case 4:return Am(Wi(t),Wi(e));case 5:return Kc(t.stringValue,e.stringValue);case 6:return function(i,a){const l=Xn(i),u=Xn(a);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),u=a.split("/");for(let h=0;h<l.length&&h<u.length;h++){const f=ee(l[h],u[h]);if(f!==0)return f}return ee(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const l=ee(Ce(i.latitude),Ce(a.latitude));return l!==0?l:ee(Ce(i.longitude),Ce(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Cm(t.arrayValue,e.arrayValue);case 10:return function(i,a){var l,u,h,f;const m=i.fields||{},v=a.fields||{},A=(l=m[Qa])===null||l===void 0?void 0:l.arrayValue,R=(u=v[Qa])===null||u===void 0?void 0:u.arrayValue,N=ee(((h=A==null?void 0:A.values)===null||h===void 0?void 0:h.length)||0,((f=R==null?void 0:R.values)===null||f===void 0?void 0:f.length)||0);return N!==0?N:Cm(A,R)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===Go.mapValue&&a===Go.mapValue)return 0;if(i===Go.mapValue)return 1;if(a===Go.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),h=a.fields||{},f=Object.keys(h);u.sort(),f.sort();for(let m=0;m<u.length&&m<f.length;++m){const v=Kc(u[m],f[m]);if(v!==0)return v;const A=Es(l[u[m]],h[f[m]]);if(A!==0)return A}return ee(u.length,f.length)}(t.mapValue,e.mapValue);default:throw G(23264,{Pe:n})}}function Am(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ee(t,e);const n=Yn(t),r=Yn(e),s=ee(n.seconds,r.seconds);return s!==0?s:ee(n.nanos,r.nanos)}function Cm(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Es(n[s],r[s]);if(i)return i}return ee(n.length,r.length)}function ws(t){return Qc(t)}function Qc(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Yn(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Xn(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Q.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Qc(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${Qc(n.fields[a])}`;return s+"}"}(t.mapValue):G(61005,{value:t})}function da(t){switch(Jn(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Cl(t);return e?16+da(e):16;case 5:return 2*t.stringValue.length;case 6:return Xn(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+da(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Nr(r.fields,(i,a)=>{s+=i.length+da(a)}),s}(t.mapValue);default:throw G(13486,{value:t})}}function Gc(t){return!!t&&"integerValue"in t}function hd(t){return!!t&&"arrayValue"in t}function Rm(t){return!!t&&"nullValue"in t}function Pm(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function fa(t){return!!t&&"mapValue"in t}function lI(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[w_])===null||n===void 0?void 0:n.stringValue)===T_}function _i(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Nr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=_i(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=_i(t.arrayValue.values[n]);return e}return Object.assign({},t)}function uI(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===aI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.value=e}static empty(){return new Rt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!fa(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=_i(n)}setAll(e){let n=qe.emptyPath(),r={},s=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}a?r[l.lastSegment()]=_i(a):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());fa(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Xt(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];fa(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Nr(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Rt(_i(this.value))}}function x_(t){const e=[];return Nr(t.fields,(n,r)=>{const s=new qe([n]);if(fa(r)){const i=x_(r.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new Ft(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e,n,r,s,i,a,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new rt(e,0,J.min(),J.min(),J.min(),Rt.empty(),0)}static newFoundDocument(e,n,r,s){return new rt(e,1,n,J.min(),r,s,0)}static newNoDocument(e,n){return new rt(e,2,n,J.min(),J.min(),Rt.empty(),0)}static newUnknownDocument(e,n){return new rt(e,3,n,J.min(),J.min(),Rt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(J.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Rt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Rt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=J.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof rt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new rt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(e,n){this.position=e,this.inclusive=n}}function km(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?r=Q.comparator(Q.fromName(a.referenceValue),n.key):r=Es(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Nm(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Xt(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(e,n="asc"){this.field=e,this.dir=n}}function cI(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_{}class De extends S_{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new dI(e,n,r):n==="array-contains"?new mI(e,r):n==="in"?new gI(e,r):n==="not-in"?new yI(e,r):n==="array-contains-any"?new vI(e,r):new De(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new fI(e,r):new pI(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Es(n,this.value)):n!==null&&Jn(this.value)===Jn(n)&&this.matchesComparison(Es(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return G(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Jt extends S_{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new Jt(e,n)}matches(e){return I_(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function I_(t){return t.op==="and"}function A_(t){return hI(t)&&I_(t)}function hI(t){for(const e of t.filters)if(e instanceof Jt)return!1;return!0}function Yc(t){if(t instanceof De)return t.field.canonicalString()+t.op.toString()+ws(t.value);if(A_(t))return t.filters.map(e=>Yc(e)).join(",");{const e=t.filters.map(n=>Yc(n)).join(",");return`${t.op}(${e})`}}function C_(t,e){return t instanceof De?function(r,s){return s instanceof De&&r.op===s.op&&r.field.isEqual(s.field)&&Xt(r.value,s.value)}(t,e):t instanceof Jt?function(r,s){return s instanceof Jt&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,a,l)=>i&&C_(a,s.filters[l]),!0):!1}(t,e):void G(19439)}function R_(t){return t instanceof De?function(n){return`${n.field.canonicalString()} ${n.op} ${ws(n.value)}`}(t):t instanceof Jt?function(n){return n.op.toString()+" {"+n.getFilters().map(R_).join(" ,")+"}"}(t):"Filter"}class dI extends De{constructor(e,n,r){super(e,n,r),this.key=Q.fromName(r.referenceValue)}matches(e){const n=Q.comparator(e.key,this.key);return this.matchesComparison(n)}}class fI extends De{constructor(e,n){super(e,"in",n),this.keys=P_("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class pI extends De{constructor(e,n){super(e,"not-in",n),this.keys=P_("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function P_(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Q.fromName(r.referenceValue))}class mI extends De{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return hd(n)&&Qi(n.arrayValue,this.value)}}class gI extends De{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Qi(this.value.arrayValue,n)}}class yI extends De{constructor(e,n){super(e,"not-in",n)}matches(e){if(Qi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Qi(this.value.arrayValue,n)}}class vI extends De{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!hd(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Qi(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(e,n=null,r=[],s=[],i=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=l,this.Ie=null}}function Vm(t,e=null,n=[],r=[],s=null,i=null,a=null){return new _I(t,e,n,r,s,i,a)}function dd(t){const e=Z(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Yc(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Al(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ws(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ws(r)).join(",")),e.Ie=n}return e.Ie}function fd(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!cI(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!C_(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Nm(t.startAt,e.startAt)&&Nm(t.endAt,e.endAt)}function Xc(t){return Q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(e,n=null,r=[],s=[],i=null,a="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=l,this.endAt=u,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function EI(t,e,n,r,s,i,a,l){return new Rl(t,e,n,r,s,i,a,l)}function k_(t){return new Rl(t)}function Dm(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function wI(t){return t.collectionGroup!==null}function Ei(t){const e=Z(t);if(e.Ee===null){e.Ee=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ee.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new Oe(qe.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ee.push(new Ya(i,r))}),n.has(qe.keyField().canonicalString())||e.Ee.push(new Ya(qe.keyField(),r))}return e.Ee}function Gt(t){const e=Z(t);return e.de||(e.de=TI(e,Ei(t))),e.de}function TI(t,e){if(t.limitType==="F")return Vm(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Ya(s.field,i)});const n=t.endAt?new Ga(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ga(t.startAt.position,t.startAt.inclusive):null;return Vm(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Jc(t,e,n){return new Rl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Pl(t,e){return fd(Gt(t),Gt(e))&&t.limitType===e.limitType}function N_(t){return`${dd(Gt(t))}|lt:${t.limitType}`}function Br(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>R_(s)).join(", ")}]`),Al(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>ws(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>ws(s)).join(",")),`Target(${r})`}(Gt(t))}; limitType=${t.limitType})`}function kl(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Q.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Ei(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(a,l,u){const h=km(a,l,u);return a.inclusive?h<=0:h<0}(r.startAt,Ei(r),s)||r.endAt&&!function(a,l,u){const h=km(a,l,u);return a.inclusive?h>=0:h>0}(r.endAt,Ei(r),s))}(t,e)}function xI(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function V_(t){return(e,n)=>{let r=!1;for(const s of Ei(t)){const i=SI(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function SI(t,e,n){const r=t.field.isKeyField()?Q.comparator(e.key,n.key):function(i,a,l){const u=a.data.field(i),h=l.data.field(i);return u!==null&&h!==null?Es(u,h):G(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return G(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Nr(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return m_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const II=new Se(Q.comparator);function _n(){return II}const D_=new Se(Q.comparator);function li(...t){let e=D_;for(const n of t)e=e.insert(n.key,n);return e}function j_(t){let e=D_;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function gr(){return wi()}function L_(){return wi()}function wi(){return new Vr(t=>t.toString(),(t,e)=>t.isEqual(e))}const AI=new Se(Q.comparator),CI=new Oe(Q.comparator);function ne(...t){let e=CI;for(const n of t)e=e.add(n);return e}const RI=new Oe(ee);function PI(){return RI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pd(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wa(e)?"-0":e}}function O_(t){return{integerValue:""+t}}function kI(t,e){return nI(e)?O_(e):pd(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(){this._=void 0}}function NI(t,e,n){return t instanceof Xa?function(s,i){const a={fields:{[v_]:{stringValue:y_},[E_]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&cd(i)&&(i=Cl(i)),i&&(a.fields[__]=i),{mapValue:a}}(n,e):t instanceof Gi?M_(t,e):t instanceof Yi?F_(t,e):function(s,i){const a=b_(s,i),l=jm(a)+jm(s.Re);return Gc(a)&&Gc(s.Re)?O_(l):pd(s.serializer,l)}(t,e)}function VI(t,e,n){return t instanceof Gi?M_(t,e):t instanceof Yi?F_(t,e):n}function b_(t,e){return t instanceof Ja?function(r){return Gc(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Xa extends Nl{}class Gi extends Nl{constructor(e){super(),this.elements=e}}function M_(t,e){const n=U_(e);for(const r of t.elements)n.some(s=>Xt(s,r))||n.push(r);return{arrayValue:{values:n}}}class Yi extends Nl{constructor(e){super(),this.elements=e}}function F_(t,e){let n=U_(e);for(const r of t.elements)n=n.filter(s=>!Xt(s,r));return{arrayValue:{values:n}}}class Ja extends Nl{constructor(e,n){super(),this.serializer=e,this.Re=n}}function jm(t){return Ce(t.integerValue||t.doubleValue)}function U_(t){return hd(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function DI(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Gi&&s instanceof Gi||r instanceof Yi&&s instanceof Yi?_s(r.elements,s.elements,Xt):r instanceof Ja&&s instanceof Ja?Xt(r.Re,s.Re):r instanceof Xa&&s instanceof Xa}(t.transform,e.transform)}class jI{constructor(e,n){this.version=e,this.transformResults=n}}class dn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new dn}static exists(e){return new dn(void 0,e)}static updateTime(e){return new dn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function pa(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Vl{}function z_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new $_(t.key,dn.none()):new ao(t.key,t.data,dn.none());{const n=t.data,r=Rt.empty();let s=new Oe(qe.comparator);for(let i of e.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new Dr(t.key,r,new Ft(s.toArray()),dn.none())}}function LI(t,e,n){t instanceof ao?function(s,i,a){const l=s.value.clone(),u=Om(s.fieldTransforms,i,a.transformResults);l.setAll(u),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Dr?function(s,i,a){if(!pa(s.precondition,i))return void i.convertToUnknownDocument(a.version);const l=Om(s.fieldTransforms,i,a.transformResults),u=i.data;u.setAll(B_(s)),u.setAll(l),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Ti(t,e,n,r){return t instanceof ao?function(i,a,l,u){if(!pa(i.precondition,a))return l;const h=i.value.clone(),f=bm(i.fieldTransforms,u,a);return h.setAll(f),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof Dr?function(i,a,l,u){if(!pa(i.precondition,a))return l;const h=bm(i.fieldTransforms,u,a),f=a.data;return f.setAll(B_(i)),f.setAll(h),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,a,l){return pa(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function OI(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=b_(r.transform,s||null);i!=null&&(n===null&&(n=Rt.empty()),n.set(r.field,i))}return n||null}function Lm(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&_s(r,s,(i,a)=>DI(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ao extends Vl{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Dr extends Vl{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function B_(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Om(t,e,n){const r=new Map;le(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let s=0;s<n.length;s++){const i=t[s],a=i.transform,l=e.data.field(i.field);r.set(i.field,VI(a,l,n[s]))}return r}function bm(t,e,n){const r=new Map;for(const s of t){const i=s.transform,a=n.data.field(s.field);r.set(s.field,NI(i,a,e))}return r}class $_ extends Vl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class bI extends Vl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&LI(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ti(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ti(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=L_();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let l=this.applyToLocalView(a,i.mutatedFields);l=n.has(s.key)?null:l;const u=z_(a,l);u!==null&&r.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(J.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ne())}isEqual(e){return this.batchId===e.batchId&&_s(this.mutations,e.mutations,(n,r)=>Lm(n,r))&&_s(this.baseMutations,e.baseMutations,(n,r)=>Lm(n,r))}}class md{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){le(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let s=function(){return AI}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new md(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pe,re;function zI(t){switch(t){case b.OK:return G(64938);case b.CANCELLED:case b.UNKNOWN:case b.DEADLINE_EXCEEDED:case b.RESOURCE_EXHAUSTED:case b.INTERNAL:case b.UNAVAILABLE:case b.UNAUTHENTICATED:return!1;case b.INVALID_ARGUMENT:case b.NOT_FOUND:case b.ALREADY_EXISTS:case b.PERMISSION_DENIED:case b.FAILED_PRECONDITION:case b.ABORTED:case b.OUT_OF_RANGE:case b.UNIMPLEMENTED:case b.DATA_LOSS:return!0;default:return G(15467,{code:t})}}function q_(t){if(t===void 0)return vn("GRPC error has no .code"),b.UNKNOWN;switch(t){case Pe.OK:return b.OK;case Pe.CANCELLED:return b.CANCELLED;case Pe.UNKNOWN:return b.UNKNOWN;case Pe.DEADLINE_EXCEEDED:return b.DEADLINE_EXCEEDED;case Pe.RESOURCE_EXHAUSTED:return b.RESOURCE_EXHAUSTED;case Pe.INTERNAL:return b.INTERNAL;case Pe.UNAVAILABLE:return b.UNAVAILABLE;case Pe.UNAUTHENTICATED:return b.UNAUTHENTICATED;case Pe.INVALID_ARGUMENT:return b.INVALID_ARGUMENT;case Pe.NOT_FOUND:return b.NOT_FOUND;case Pe.ALREADY_EXISTS:return b.ALREADY_EXISTS;case Pe.PERMISSION_DENIED:return b.PERMISSION_DENIED;case Pe.FAILED_PRECONDITION:return b.FAILED_PRECONDITION;case Pe.ABORTED:return b.ABORTED;case Pe.OUT_OF_RANGE:return b.OUT_OF_RANGE;case Pe.UNIMPLEMENTED:return b.UNIMPLEMENTED;case Pe.DATA_LOSS:return b.DATA_LOSS;default:return G(39323,{code:t})}}(re=Pe||(Pe={}))[re.OK=0]="OK",re[re.CANCELLED=1]="CANCELLED",re[re.UNKNOWN=2]="UNKNOWN",re[re.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",re[re.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",re[re.NOT_FOUND=5]="NOT_FOUND",re[re.ALREADY_EXISTS=6]="ALREADY_EXISTS",re[re.PERMISSION_DENIED=7]="PERMISSION_DENIED",re[re.UNAUTHENTICATED=16]="UNAUTHENTICATED",re[re.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",re[re.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",re[re.ABORTED=10]="ABORTED",re[re.OUT_OF_RANGE=11]="OUT_OF_RANGE",re[re.UNIMPLEMENTED=12]="UNIMPLEMENTED",re[re.INTERNAL=13]="INTERNAL",re[re.UNAVAILABLE=14]="UNAVAILABLE",re[re.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BI=new qn([4294967295,4294967295],0);function Mm(t){const e=d_().encode(t),n=new s_;return n.update(e),new Uint8Array(n.digest())}function Fm(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new qn([n,r],0),new qn([s,i],0)]}class gd{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ui(`Invalid padding: ${n}`);if(r<0)throw new ui(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ui(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ui(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=qn.fromNumber(this.pe)}we(e,n,r){let s=e.add(n.multiply(qn.fromNumber(r)));return s.compare(BI)===1&&(s=new qn([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=Mm(e),[r,s]=Fm(n);for(let i=0;i<this.hashCount;i++){const a=this.we(r,s,i);if(!this.be(a))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new gd(i,s,n);return r.forEach(l=>a.insert(l)),a}insert(e){if(this.pe===0)return;const n=Mm(e),[r,s]=Fm(n);for(let i=0;i<this.hashCount;i++){const a=this.we(r,s,i);this.Se(a)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ui extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,lo.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Dl(J.min(),s,new Se(ee),_n(),ne())}}class lo{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new lo(r,n,ne(),ne(),ne())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(e,n,r,s){this.De=e,this.removedTargetIds=n,this.key=r,this.ve=s}}class H_{constructor(e,n){this.targetId=e,this.Ce=n}}class W_{constructor(e,n,r=Ke.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Um{constructor(){this.Fe=0,this.Me=zm(),this.xe=Ke.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=ne(),n=ne(),r=ne();return this.Me.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:G(38017,{changeType:i})}}),new lo(this.xe,this.Oe,e,n,r)}Qe(){this.Ne=!1,this.Me=zm()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,le(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class $I{constructor(e){this.ze=e,this.je=new Map,this.He=_n(),this.Je=Yo(),this.Ye=Yo(),this.Ze=new Se(ee)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const r=this.rt(n);switch(e.state){case 0:this.it(n)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(n);break;case 3:this.it(n)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),r.ke(e.resumeToken));break;default:G(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((r,s)=>{this.it(s)&&n(s)})}ot(e){const n=e.targetId,r=e.Ce.count,s=this._t(n);if(s){const i=s.target;if(Xc(i))if(r===0){const a=new Q(i.path);this.tt(n,a,rt.newNoDocument(a,J.min()))}else le(r===1,20013,{expectedCount:r});else{const a=this.ut(n);if(a!==r){const l=this.ct(e),u=l?this.lt(l,e,a):1;if(u!==0){this.st(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,h)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,l;try{a=Xn(r).toUint8Array()}catch(u){if(u instanceof g_)return vs("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new gd(a,s,i)}catch(u){return vs(u instanceof ui?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.pe===0?null:l}lt(e,n,r){return n.Ce.count===r-this.Tt(e,n.targetId)?0:2}Tt(e,n){const r=this.ze.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const a=this.ze.Pt(),l=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.tt(n,i,null),s++)}),s}It(e){const n=new Map;this.je.forEach((i,a)=>{const l=this._t(a);if(l){if(i.current&&Xc(l.target)){const u=new Q(l.target.path);this.Et(u).has(a)||this.dt(a,u)||this.tt(a,u,rt.newNoDocument(u,e))}i.Le&&(n.set(a,i.qe()),i.Qe())}});let r=ne();this.Ye.forEach((i,a)=>{let l=!0;a.forEachWhile(u=>{const h=this._t(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.He.forEach((i,a)=>a.setReadTime(e));const s=new Dl(e,n,this.Ze,this.He,r);return this.He=_n(),this.Je=Yo(),this.Ye=Yo(),this.Ze=new Se(ee),s}et(e,n){if(!this.it(e))return;const r=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,r),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,r){if(!this.it(e))return;const s=this.rt(e);this.dt(e,n)?s.$e(n,1):s.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),r&&(this.He=this.He.insert(n,r))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new Um,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new Oe(ee),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new Oe(ee),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||q("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new Um),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function Yo(){return new Se(Q.comparator)}function zm(){return new Se(Q.comparator)}const qI={asc:"ASCENDING",desc:"DESCENDING"},HI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},WI={and:"AND",or:"OR"};class KI{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Zc(t,e){return t.useProto3Json||Al(e)?e:{value:e}}function Za(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function K_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function QI(t,e){return Za(t,e.toTimestamp())}function Yt(t){return le(!!t,49232),J.fromTimestamp(function(n){const r=Yn(n);return new Le(r.seconds,r.nanos)}(t))}function yd(t,e){return eh(t,e).canonicalString()}function eh(t,e){const n=function(s){return new Ee(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Q_(t){const e=Ee.fromString(t);return le(Z_(e),10190,{key:e.toString()}),e}function th(t,e){return yd(t.databaseId,e.path)}function Fu(t,e){const n=Q_(e);if(n.get(1)!==t.databaseId.projectId)throw new K(b.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new K(b.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Q(Y_(n))}function G_(t,e){return yd(t.databaseId,e)}function GI(t){const e=Q_(t);return e.length===4?Ee.emptyPath():Y_(e)}function nh(t){return new Ee(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Y_(t){return le(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Bm(t,e,n){return{name:th(t,e),fields:n.value.mapValue.fields}}function YI(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:G(39313,{state:h})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(h,f){return h.useProto3Json?(le(f===void 0||typeof f=="string",58123),Ke.fromBase64String(f||"")):(le(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),Ke.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(h){const f=h.code===void 0?b.UNKNOWN:q_(h.code);return new K(f,h.message||"")}(a);n=new W_(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Fu(t,r.document.name),i=Yt(r.document.updateTime),a=r.document.createTime?Yt(r.document.createTime):J.min(),l=new Rt({mapValue:{fields:r.document.fields}}),u=rt.newFoundDocument(s,i,a,l),h=r.targetIds||[],f=r.removedTargetIds||[];n=new ma(h,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Fu(t,r.document),i=r.readTime?Yt(r.readTime):J.min(),a=rt.newNoDocument(s,i),l=r.removedTargetIds||[];n=new ma([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Fu(t,r.document),i=r.removedTargetIds||[];n=new ma([],i,s,null)}else{if(!("filter"in e))return G(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new UI(s,i),l=r.targetId;n=new H_(l,a)}}return n}function XI(t,e){let n;if(e instanceof ao)n={update:Bm(t,e.key,e.value)};else if(e instanceof $_)n={delete:th(t,e.key)};else if(e instanceof Dr)n={update:Bm(t,e.key,e.data),updateMask:oA(e.fieldMask)};else{if(!(e instanceof bI))return G(16599,{ft:e.type});n={verify:th(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof Xa)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Gi)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Yi)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Ja)return{fieldPath:a.field.canonicalString(),increment:l.Re};throw G(20930,{transform:a.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:QI(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:G(27497)}(t,e.precondition)),n}function JI(t,e){return t&&t.length>0?(le(e!==void 0,14353),t.map(n=>function(s,i){let a=s.updateTime?Yt(s.updateTime):Yt(i);return a.isEqual(J.min())&&(a=Yt(i)),new jI(a,s.transformResults||[])}(n,e))):[]}function ZI(t,e){return{documents:[G_(t,e.path)]}}function eA(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=G_(t,s);const i=function(h){if(h.length!==0)return J_(Jt.create(h,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const a=function(h){if(h.length!==0)return h.map(f=>function(v){return{field:$r(v.field),direction:rA(v.dir)}}(f))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=Zc(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{gt:n,parent:s}}function tA(t){let e=GI(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){le(r===1,65062);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(m){const v=X_(m);return v instanceof Jt&&A_(v)?v.getFilters():[v]}(n.where));let a=[];n.orderBy&&(a=function(m){return m.map(v=>function(R){return new Ya(qr(R.field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction))}(v))}(n.orderBy));let l=null;n.limit&&(l=function(m){let v;return v=typeof m=="object"?m.value:m,Al(v)?null:v}(n.limit));let u=null;n.startAt&&(u=function(m){const v=!!m.before,A=m.values||[];return new Ga(A,v)}(n.startAt));let h=null;return n.endAt&&(h=function(m){const v=!m.before,A=m.values||[];return new Ga(A,v)}(n.endAt)),EI(e,s,a,i,l,"F",u,h)}function nA(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return G(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function X_(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=qr(n.unaryFilter.field);return De.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=qr(n.unaryFilter.field);return De.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=qr(n.unaryFilter.field);return De.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=qr(n.unaryFilter.field);return De.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return G(61313);default:return G(60726)}}(t):t.fieldFilter!==void 0?function(n){return De.create(qr(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return G(58110);default:return G(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Jt.create(n.compositeFilter.filters.map(r=>X_(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return G(1026)}}(n.compositeFilter.op))}(t):G(30097,{filter:t})}function rA(t){return qI[t]}function sA(t){return HI[t]}function iA(t){return WI[t]}function $r(t){return{fieldPath:t.canonicalString()}}function qr(t){return qe.fromServerFormat(t.fieldPath)}function J_(t){return t instanceof De?function(n){if(n.op==="=="){if(Pm(n.value))return{unaryFilter:{field:$r(n.field),op:"IS_NAN"}};if(Rm(n.value))return{unaryFilter:{field:$r(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Pm(n.value))return{unaryFilter:{field:$r(n.field),op:"IS_NOT_NAN"}};if(Rm(n.value))return{unaryFilter:{field:$r(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$r(n.field),op:sA(n.op),value:n.value}}}(t):t instanceof Jt?function(n){const r=n.getFilters().map(s=>J_(s));return r.length===1?r[0]:{compositeFilter:{op:iA(n.op),filters:r}}}(t):G(54877,{filter:t})}function oA(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Z_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e,n,r,s,i=J.min(),a=J.min(),l=Ke.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Vn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Vn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Vn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Vn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(e){this.wt=e}}function lA(t){const e=tA({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Jc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(){this.yn=new cA}addToCollectionParentIndex(e,n){return this.yn.add(n),L.resolve()}getCollectionParents(e,n){return L.resolve(this.yn.getEntries(n))}addFieldIndex(e,n){return L.resolve()}deleteFieldIndex(e,n){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,n){return L.resolve()}getDocumentsMatchingTarget(e,n){return L.resolve(null)}getIndexType(e,n){return L.resolve(0)}getFieldIndexes(e,n){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,n){return L.resolve(Gn.min())}getMinOffsetFromCollectionGroup(e,n){return L.resolve(Gn.min())}updateCollectionGroup(e,n,r){return L.resolve()}updateIndexEntries(e,n){return L.resolve()}}class cA{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Oe(Ee.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Oe(Ee.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $m={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},e0=41943040;class ft{static withCacheSize(e){return new ft(e,ft.DEFAULT_COLLECTION_PERCENTILE,ft.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ft.DEFAULT_COLLECTION_PERCENTILE=10,ft.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ft.DEFAULT=new ft(e0,ft.DEFAULT_COLLECTION_PERCENTILE,ft.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ft.DISABLED=new ft(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e){this.nr=e}next(){return this.nr+=2,this.nr}static rr(){return new Ts(0)}static ir(){return new Ts(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qm="LruGarbageCollector",hA=1048576;function Hm([t,e],[n,r]){const s=ee(t,n);return s===0?ee(e,r):s}class dA{constructor(e){this.cr=e,this.buffer=new Oe(Hm),this.lr=0}hr(){return++this.lr}Pr(e){const n=[e,this.hr()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Hm(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class fA{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Tr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ir(6e4)}stop(){this.Tr&&(this.Tr.cancel(),this.Tr=null)}get started(){return this.Tr!==null}Ir(e){q(qm,`Garbage collection scheduled in ${e}ms`),this.Tr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Tr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ns(n)?q(qm,"Ignoring IndexedDB error during garbage collection: ",n):await ks(n)}await this.Ir(3e5)})}}class pA{constructor(e,n){this.Er=e,this.params=n}calculateTargetCount(e,n){return this.Er.dr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return L.resolve(Il.le);const r=new dA(n);return this.Er.forEachTarget(e,s=>r.Pr(s.sequenceNumber)).next(()=>this.Er.Ar(e,s=>r.Pr(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Er.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Er.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(q("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve($m)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(q("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$m):this.Rr(e,n))}getCacheSize(e){return this.Er.getCacheSize(e)}Rr(e,n){let r,s,i,a,l,u,h;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),s=this.params.maximumSequenceNumbersToCollect):s=m,a=Date.now(),this.nthSequenceNumber(e,s))).next(m=>(r=m,l=Date.now(),this.removeTargets(e,r,n))).next(m=>(i=m,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(h=Date.now(),zr()<=se.DEBUG&&q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-f}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${i} targets in `+(u-l)+`ms
	Removed ${m} documents in `+(h-u)+`ms
Total Duration: ${h-f}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:m})))}}function mA(t,e){return new pA(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(){this.changes=new Vr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,rt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?L.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Ti(r.mutation,s,Ft.empty(),Le.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ne()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ne()){const s=gr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let a=li();return i.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=gr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ne()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,r,s){let i=_n();const a=wi(),l=function(){return wi()}();return n.forEach((u,h)=>{const f=r.get(h.key);s.has(h.key)&&(f===void 0||f.mutation instanceof Dr)?i=i.insert(h.key,h):f!==void 0?(a.set(h.key,f.mutation.getFieldMask()),Ti(f.mutation,h,f.mutation.getFieldMask(),Le.now())):a.set(h.key,Ft.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((h,f)=>a.set(h,f)),n.forEach((h,f)=>{var m;return l.set(h,new yA(f,(m=a.get(h))!==null&&m!==void 0?m:null))}),l))}recalculateAndSaveOverlays(e,n){const r=wi();let s=new Se((a,l)=>a-l),i=ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let f=r.get(u)||Ft.empty();f=l.applyToLocalView(h,f),r.set(u,f);const m=(s.get(l.batchId)||ne()).add(u);s=s.insert(l.batchId,m)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,f=u.value,m=L_();f.forEach(v=>{if(!i.has(v)){const A=z_(n.get(v),r.get(v));A!==null&&m.set(v,A),i=i.add(v)}}),a.push(this.documentOverlayCache.saveOverlays(e,h,m))}return L.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(a){return Q.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):wI(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):L.resolve(gr());let l=Hi,u=i;return a.next(h=>L.forEach(h,(f,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),i.get(f)?L.resolve():this.remoteDocumentCache.getEntry(e,f).next(v=>{u=u.insert(f,v)}))).next(()=>this.populateOverlays(e,h,i)).next(()=>this.computeViews(e,u,h,ne())).next(f=>({batchId:l,changes:j_(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Q(n)).next(r=>{let s=li();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let a=li();return this.indexManager.getCollectionParents(e,i).next(l=>L.forEach(l,u=>{const h=function(m,v){return new Rl(v,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next(f=>{f.forEach((m,v)=>{a=a.insert(m,v)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(a=>{i.forEach((u,h)=>{const f=h.getKey();a.get(f)===null&&(a=a.insert(f,rt.newInvalidDocument(f)))});let l=li();return a.forEach((u,h)=>{const f=i.get(u);f!==void 0&&Ti(f.mutation,h,Ft.empty(),Le.now()),kl(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(e){this.serializer=e,this.Fr=new Map,this.Mr=new Map}getBundleMetadata(e,n){return L.resolve(this.Fr.get(n))}saveBundleMetadata(e,n){return this.Fr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Yt(s.createTime)}}(n)),L.resolve()}getNamedQuery(e,n){return L.resolve(this.Mr.get(n))}saveNamedQuery(e,n){return this.Mr.set(n.name,function(s){return{name:s.name,query:lA(s.bundledQuery),readTime:Yt(s.readTime)}}(n)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(){this.overlays=new Se(Q.comparator),this.Or=new Map}getOverlay(e,n){return L.resolve(this.overlays.get(n))}getOverlays(e,n){const r=gr();return L.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),L.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Or.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Or.delete(r)),L.resolve()}getOverlaysForCollection(e,n,r){const s=gr(),i=n.length+1,a=new Q(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return L.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Se((h,f)=>h-f);const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let f=i.get(h.largestBatchId);f===null&&(f=gr(),i=i.insert(h.largestBatchId,f)),f.set(h.getKey(),h)}}const l=gr(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,f)=>l.set(h,f)),!(l.size()>=s)););return L.resolve(l)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.Or.get(s.largestBatchId).delete(r.key);this.Or.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new FI(n,r));let i=this.Or.get(n);i===void 0&&(i=ne(),this.Or.set(n,i)),this.Or.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(){this.sessionToken=Ke.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,L.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(){this.Nr=new Oe(be.Br),this.Lr=new Oe(be.kr)}isEmpty(){return this.Nr.isEmpty()}addReference(e,n){const r=new be(e,n);this.Nr=this.Nr.add(r),this.Lr=this.Lr.add(r)}qr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Qr(new be(e,n))}$r(e,n){e.forEach(r=>this.removeReference(r,n))}Ur(e){const n=new Q(new Ee([])),r=new be(n,e),s=new be(n,e+1),i=[];return this.Lr.forEachInRange([r,s],a=>{this.Qr(a),i.push(a.key)}),i}Kr(){this.Nr.forEach(e=>this.Qr(e))}Qr(e){this.Nr=this.Nr.delete(e),this.Lr=this.Lr.delete(e)}Wr(e){const n=new Q(new Ee([])),r=new be(n,e),s=new be(n,e+1);let i=ne();return this.Lr.forEachInRange([r,s],a=>{i=i.add(a.key)}),i}containsKey(e){const n=new be(e,0),r=this.Nr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class be{constructor(e,n){this.key=e,this.Gr=n}static Br(e,n){return Q.comparator(e.key,n.key)||ee(e.Gr,n.Gr)}static kr(e,n){return ee(e.Gr,n.Gr)||Q.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Jn=1,this.zr=new Oe(be.Br)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Jn;this.Jn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new MI(i,n,r,s);this.mutationQueue.push(a);for(const l of s)this.zr=this.zr.add(new be(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return L.resolve(a)}lookupMutationBatch(e,n){return L.resolve(this.jr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Hr(r),i=s<0?0:s;return L.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?ud:this.Jn-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new be(n,0),s=new be(n,Number.POSITIVE_INFINITY),i=[];return this.zr.forEachInRange([r,s],a=>{const l=this.jr(a.Gr);i.push(l)}),L.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Oe(ee);return n.forEach(s=>{const i=new be(s,0),a=new be(s,Number.POSITIVE_INFINITY);this.zr.forEachInRange([i,a],l=>{r=r.add(l.Gr)})}),L.resolve(this.Jr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;Q.isDocumentKey(i)||(i=i.child(""));const a=new be(new Q(i),0);let l=new Oe(ee);return this.zr.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(l=l.add(u.Gr)),!0)},a),L.resolve(this.Jr(l))}Jr(e){const n=[];return e.forEach(r=>{const s=this.jr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){le(this.Yr(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.zr;return L.forEach(n.mutations,s=>{const i=new be(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.zr=r})}Xn(e){}containsKey(e,n){const r=new be(n,0),s=this.zr.firstAfterOrEqual(r);return L.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}Yr(e,n){return this.Hr(e)}Hr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}jr(e){const n=this.Hr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(e){this.Zr=e,this.docs=function(){return new Se(Q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.Zr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return L.resolve(r?r.document.mutableCopy():rt.newInvalidDocument(n))}getEntries(e,n){let r=_n();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():rt.newInvalidDocument(s))}),L.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=_n();const a=n.path,l=new Q(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:f}}=u.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||J1(X1(f),r)<=0||(s.has(f.key)||kl(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return L.resolve(i)}getAllFromCollectionGroup(e,n,r,s){G(9500)}Xr(e,n){return L.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new SA(this)}getSize(e){return L.resolve(this.size)}}class SA extends gA{constructor(e){super(),this.vr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.vr.addEntry(e,s)):this.vr.removeEntry(r)}),L.waitFor(n)}getFromCache(e,n){return this.vr.getEntry(e,n)}getAllFromCache(e,n){return this.vr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(e){this.persistence=e,this.ei=new Vr(n=>dd(n),fd),this.lastRemoteSnapshotVersion=J.min(),this.highestTargetId=0,this.ti=0,this.ni=new vd,this.targetCount=0,this.ri=Ts.rr()}forEachTarget(e,n){return this.ei.forEach((r,s)=>n(s)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.ti)}allocateTargetId(e){return this.highestTargetId=this.ri.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ti&&(this.ti=n),L.resolve()}ar(e){this.ei.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ri=new Ts(n),this.highestTargetId=n),e.sequenceNumber>this.ti&&(this.ti=e.sequenceNumber)}addTargetData(e,n){return this.ar(n),this.targetCount+=1,L.resolve()}updateTargetData(e,n){return this.ar(n),L.resolve()}removeTargetData(e,n){return this.ei.delete(n.target),this.ni.Ur(n.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.ei.forEach((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.ei.delete(a),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),L.waitFor(i).next(()=>s)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,n){const r=this.ei.get(n)||null;return L.resolve(r)}addMatchingKeys(e,n,r){return this.ni.qr(n,r),L.resolve()}removeMatchingKeys(e,n,r){this.ni.$r(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),L.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.ni.Ur(n),L.resolve()}getMatchingKeysForTargetId(e,n){const r=this.ni.Wr(n);return L.resolve(r)}containsKey(e,n){return L.resolve(this.ni.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0{constructor(e,n){this.ii={},this.overlays={},this.si=new Il(0),this.oi=!1,this.oi=!0,this._i=new wA,this.referenceDelegate=e(this),this.ai=new IA(this),this.indexManager=new uA,this.remoteDocumentCache=function(s){return new xA(s)}(r=>this.referenceDelegate.ui(r)),this.serializer=new aA(n),this.ci=new _A(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.oi=!1,Promise.resolve()}get started(){return this.oi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new EA,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ii[e.toKey()];return r||(r=new TA(n,this.referenceDelegate),this.ii[e.toKey()]=r),r}getGlobalsCache(){return this._i}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.ci}runTransaction(e,n,r){q("MemoryPersistence","Starting transaction:",e);const s=new AA(this.si.next());return this.referenceDelegate.li(),r(s).next(i=>this.referenceDelegate.hi(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Pi(e,n){return L.or(Object.values(this.ii).map(r=>()=>r.containsKey(e,n)))}}class AA extends eI{constructor(e){super(),this.currentSequenceNumber=e}}class _d{constructor(e){this.persistence=e,this.Ti=new vd,this.Ii=null}static Ei(e){return new _d(e)}get di(){if(this.Ii)return this.Ii;throw G(60996)}addReference(e,n,r){return this.Ti.addReference(r,n),this.di.delete(r.toString()),L.resolve()}removeReference(e,n,r){return this.Ti.removeReference(r,n),this.di.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),L.resolve()}removeTarget(e,n){this.Ti.Ur(n.targetId).forEach(s=>this.di.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.di.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}li(){this.Ii=new Set}hi(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.di,r=>{const s=Q.fromPath(r);return this.Ai(e,s).next(i=>{i||n.removeEntry(s,J.min())})}).next(()=>(this.Ii=null,n.apply(e)))}updateLimboDocument(e,n){return this.Ai(e,n).next(r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())})}ui(e){return 0}Ai(e,n){return L.or([()=>L.resolve(this.Ti.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Pi(e,n)])}}class el{constructor(e,n){this.persistence=e,this.Ri=new Vr(r=>rI(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=mA(this,n)}static Ei(e,n){return new el(e,n)}li(){}hi(e){return L.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.Vr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}Vr(e){let n=0;return this.Ar(e,r=>{n++}).next(()=>n)}Ar(e,n){return L.forEach(this.Ri,(r,s)=>this.gr(e,r,s).next(i=>i?L.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.Xr(e,a=>this.gr(e,a,n).next(l=>{l||(r++,i.removeEntry(a,J.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.Ri.set(n,e.currentSequenceNumber),L.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.Ri.set(r,e.currentSequenceNumber),L.resolve()}removeReference(e,n,r){return this.Ri.set(r,e.currentSequenceNumber),L.resolve()}updateLimboDocument(e,n){return this.Ri.set(n,e.currentSequenceNumber),L.resolve()}ui(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=da(e.data.value)),n}gr(e,n,r){return L.or([()=>this.persistence.Pi(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.Ri.get(n);return L.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.ls=r,this.hs=s}static Ps(e,n){let r=ne(),s=ne();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Ed(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(){this.Ts=!1,this.Is=!1,this.Es=100,this.ds=function(){return ES()?8:tI(vS())>0?6:4}()}initialize(e,n){this.As=e,this.indexManager=n,this.Ts=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Rs(e,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.Vs(e,n,s,r).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new CA;return this.fs(e,n,a).next(l=>{if(i.result=l,this.Is)return this.gs(e,n,a,l.size)})}).next(()=>i.result)}gs(e,n,r,s){return r.documentReadCount<this.Es?(zr()<=se.DEBUG&&q("QueryEngine","SDK will not create cache indexes for query:",Br(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Es,"documents"),L.resolve()):(zr()<=se.DEBUG&&q("QueryEngine","Query:",Br(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ds*s?(zr()<=se.DEBUG&&q("QueryEngine","The SDK decides to create cache indexes for query:",Br(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Gt(n))):L.resolve())}Rs(e,n){if(Dm(n))return L.resolve(null);let r=Gt(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Jc(n,null,"F"),r=Gt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const a=ne(...i);return this.As.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.ps(n,l);return this.ys(n,h,a,u.readTime)?this.Rs(e,Jc(n,null,"F")):this.ws(e,h,n,u)}))})))}Vs(e,n,r,s){return Dm(n)||s.isEqual(J.min())?L.resolve(null):this.As.getDocuments(e,r).next(i=>{const a=this.ps(n,i);return this.ys(n,a,r,s)?L.resolve(null):(zr()<=se.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Br(n)),this.ws(e,a,n,Y1(s,Hi)).next(l=>l))})}ps(e,n){let r=new Oe(V_(e));return n.forEach((s,i)=>{kl(e,i)&&(r=r.add(i))}),r}ys(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}fs(e,n,r){return zr()<=se.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",Br(n)),this.As.getDocumentsMatchingQuery(e,n,Gn.min(),r)}ws(e,n,r,s){return this.As.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wd="LocalStore",PA=3e8;class kA{constructor(e,n,r,s){this.persistence=e,this.bs=n,this.serializer=s,this.Ss=new Se(ee),this.Ds=new Vr(i=>dd(i),fd),this.vs=new Map,this.Cs=e.getRemoteDocumentCache(),this.ai=e.getTargetCache(),this.ci=e.getBundleCache(),this.Fs(r)}Fs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new vA(this.Cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Cs.setIndexManager(this.indexManager),this.bs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ss))}}function NA(t,e,n,r){return new kA(t,e,n,r)}async function n0(t,e){const n=Z(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Fs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],l=[];let u=ne();for(const h of s){a.push(h.batchId);for(const f of h.mutations)u=u.add(f.key)}for(const h of i){l.push(h.batchId);for(const f of h.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(h=>({Ms:h,removedBatchIds:a,addedBatchIds:l}))})})}function VA(t,e){const n=Z(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Cs.newChangeBuffer({trackRemovals:!0});return function(l,u,h,f){const m=h.batch,v=m.keys();let A=L.resolve();return v.forEach(R=>{A=A.next(()=>f.getEntry(u,R)).next(N=>{const V=h.docVersions.get(R);le(V!==null,48541),N.version.compareTo(V)<0&&(m.applyToRemoteDocument(N,h),N.isValidDocument()&&(N.setReadTime(h.commitVersion),f.addEntry(N)))})}),A.next(()=>l.mutationQueue.removeMutationBatch(u,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=ne();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function r0(t){const e=Z(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.ai.getLastRemoteSnapshotVersion(n))}function DA(t,e){const n=Z(t),r=e.snapshotVersion;let s=n.Ss;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.Cs.newChangeBuffer({trackRemovals:!0});s=n.Ss;const l=[];e.targetChanges.forEach((f,m)=>{const v=s.get(m);if(!v)return;l.push(n.ai.removeMatchingKeys(i,f.removedDocuments,m).next(()=>n.ai.addMatchingKeys(i,f.addedDocuments,m)));let A=v.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?A=A.withResumeToken(Ke.EMPTY_BYTE_STRING,J.min()).withLastLimboFreeSnapshotVersion(J.min()):f.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(f.resumeToken,r)),s=s.insert(m,A),function(N,V,T){return N.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=PA?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(v,A,f)&&l.push(n.ai.updateTargetData(i,A))});let u=_n(),h=ne();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),l.push(jA(i,a,e.documentUpdates).next(f=>{u=f.xs,h=f.Os})),!r.isEqual(J.min())){const f=n.ai.getLastRemoteSnapshotVersion(i).next(m=>n.ai.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(f)}return L.waitFor(l).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,h)).next(()=>u)}).then(i=>(n.Ss=s,i))}function jA(t,e,n){let r=ne(),s=ne();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let a=_n();return n.forEach((l,u)=>{const h=i.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(J.min())?(e.removeEntry(l,u.readTime),a=a.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),a=a.insert(l,u)):q(wd,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{xs:a,Os:s}})}function LA(t,e){const n=Z(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=ud),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function OA(t,e){const n=Z(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.ai.getTargetData(r,e).next(i=>i?(s=i,L.resolve(s)):n.ai.allocateTargetId(r).next(a=>(s=new Vn(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.ai.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ss.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ss=n.Ss.insert(r.targetId,r),n.Ds.set(e,r.targetId)),r})}async function rh(t,e,n){const r=Z(t),s=r.Ss.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!Ns(a))throw a;q(wd,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Ss=r.Ss.remove(e),r.Ds.delete(s.target)}function Wm(t,e,n){const r=Z(t);let s=J.min(),i=ne();return r.persistence.runTransaction("Execute query","readwrite",a=>function(u,h,f){const m=Z(u),v=m.Ds.get(f);return v!==void 0?L.resolve(m.Ss.get(v)):m.ai.getTargetData(h,f)}(r,a,Gt(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.ai.getMatchingKeysForTargetId(a,l.targetId).next(u=>{i=u})}).next(()=>r.bs.getDocumentsMatchingQuery(a,e,n?s:J.min(),n?i:ne())).next(l=>(bA(r,xI(e),l),{documents:l,Ns:i})))}function bA(t,e,n){let r=t.vs.get(e)||J.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.vs.set(e,r)}class Km{constructor(){this.activeTargetIds=PI()}$s(e){this.activeTargetIds=this.activeTargetIds.add(e)}Us(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Qs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class MA{constructor(){this.So=new Km,this.Do={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.So.$s(e),this.Do[e]||"not-current"}updateQueryState(e,n,r){this.Do[e]=n}removeLocalQueryTarget(e){this.So.Us(e)}isLocalQueryTarget(e){return this.So.activeTargetIds.has(e)}clearQueryState(e){delete this.Do[e]}getAllActiveQueryTargets(){return this.So.activeTargetIds}isActiveQueryTarget(e){return this.So.activeTargetIds.has(e)}start(){return this.So=new Km,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{vo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qm="ConnectivityMonitor";class Gm{constructor(){this.Co=()=>this.Fo(),this.Mo=()=>this.xo(),this.Oo=[],this.No()}vo(e){this.Oo.push(e)}shutdown(){window.removeEventListener("online",this.Co),window.removeEventListener("offline",this.Mo)}No(){window.addEventListener("online",this.Co),window.addEventListener("offline",this.Mo)}Fo(){q(Qm,"Network connectivity changed: AVAILABLE");for(const e of this.Oo)e(0)}xo(){q(Qm,"Network connectivity changed: UNAVAILABLE");for(const e of this.Oo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xo=null;function sh(){return Xo===null?Xo=function(){return 268435456+Math.round(2147483648*Math.random())}():Xo++,"0x"+Xo.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uu="RestConnection",UA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class zA{get Bo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Lo=n+"://"+e.host,this.ko=`projects/${r}/databases/${s}`,this.qo=this.databaseId.database===Ka?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Qo(e,n,r,s,i){const a=sh(),l=this.$o(e,n.toUriEncodedString());q(Uu,`Sending RPC '${e}' ${a}:`,l,r);const u={"google-cloud-resource-prefix":this.ko,"x-goog-request-params":this.qo};this.Uo(u,s,i);const{host:h}=new URL(l),f=Xv(h);return this.Ko(e,l,u,r,f).then(m=>(q(Uu,`Received RPC '${e}' ${a}: `,m),m),m=>{throw vs(Uu,`RPC '${e}' ${a} failed with error: `,m,"url: ",l,"request:",r),m})}Wo(e,n,r,s,i,a){return this.Qo(e,n,r,s,i)}Uo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ps}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}$o(e,n){const r=UA[e];return`${this.Lo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(e){this.Go=e.Go,this.zo=e.zo}jo(e){this.Ho=e}Jo(e){this.Yo=e}Zo(e){this.Xo=e}onMessage(e){this.e_=e}close(){this.zo()}send(e){this.Go(e)}t_(){this.Ho()}n_(){this.Yo()}r_(e){this.Xo(e)}i_(e){this.e_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const et="WebChannelConnection";class $A extends zA{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ko(e,n,r,s,i){const a=sh();return new Promise((l,u)=>{const h=new i_;h.setWithCredentials(!0),h.listenOnce(o_.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case ha.NO_ERROR:const m=h.getResponseJson();q(et,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(m)),l(m);break;case ha.TIMEOUT:q(et,`RPC '${e}' ${a} timed out`),u(new K(b.DEADLINE_EXCEEDED,"Request time out"));break;case ha.HTTP_ERROR:const v=h.getStatus();if(q(et,`RPC '${e}' ${a} failed with status:`,v,"response text:",h.getResponseText()),v>0){let A=h.getResponseJson();Array.isArray(A)&&(A=A[0]);const R=A==null?void 0:A.error;if(R&&R.status&&R.message){const N=function(T){const _=T.toLowerCase().replace(/_/g,"-");return Object.values(b).indexOf(_)>=0?_:b.UNKNOWN}(R.status);u(new K(N,R.message))}else u(new K(b.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new K(b.UNAVAILABLE,"Connection failed."));break;default:G(9055,{s_:e,streamId:a,o_:h.getLastErrorCode(),__:h.getLastError()})}}finally{q(et,`RPC '${e}' ${a} completed.`)}});const f=JSON.stringify(s);q(et,`RPC '${e}' ${a} sending request:`,s),h.send(n,"POST",f,r,15)})}a_(e,n,r){const s=sh(),i=[this.Lo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=u_(),l=l_(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Uo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=i.join("");q(et,`Creating RPC '${e}' stream ${s}: ${f}`,u);const m=a.createWebChannel(f,u);let v=!1,A=!1;const R=new BA({Go:V=>{A?q(et,`Not sending because RPC '${e}' stream ${s} is closed:`,V):(v||(q(et,`Opening RPC '${e}' stream ${s} transport.`),m.open(),v=!0),q(et,`RPC '${e}' stream ${s} sending:`,V),m.send(V))},zo:()=>m.close()}),N=(V,T,_)=>{V.listen(T,I=>{try{_(I)}catch(j){setTimeout(()=>{throw j},0)}})};return N(m,ai.EventType.OPEN,()=>{A||(q(et,`RPC '${e}' stream ${s} transport opened.`),R.t_())}),N(m,ai.EventType.CLOSE,()=>{A||(A=!0,q(et,`RPC '${e}' stream ${s} transport closed`),R.r_())}),N(m,ai.EventType.ERROR,V=>{A||(A=!0,vs(et,`RPC '${e}' stream ${s} transport errored. Name:`,V.name,"Message:",V.message),R.r_(new K(b.UNAVAILABLE,"The operation could not be completed")))}),N(m,ai.EventType.MESSAGE,V=>{var T;if(!A){const _=V.data[0];le(!!_,16349);const I=_,j=(I==null?void 0:I.error)||((T=I[0])===null||T===void 0?void 0:T.error);if(j){q(et,`RPC '${e}' stream ${s} received error:`,j);const z=j.status;let $=function(E){const S=Pe[E];if(S!==void 0)return q_(S)}(z),w=j.message;$===void 0&&($=b.INTERNAL,w="Unknown error status: "+z+" with message "+j.message),A=!0,R.r_(new K($,w)),m.close()}else q(et,`RPC '${e}' stream ${s} received:`,_),R.i_(_)}}),N(l,a_.STAT_EVENT,V=>{V.stat===Wc.PROXY?q(et,`RPC '${e}' stream ${s} detected buffering proxy`):V.stat===Wc.NOPROXY&&q(et,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{R.n_()},0),R}}function zu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jl(t){return new KI(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0{constructor(e,n,r=1e3,s=1.5,i=6e4){this.bi=e,this.timerId=n,this.u_=r,this.c_=s,this.l_=i,this.h_=0,this.P_=null,this.T_=Date.now(),this.reset()}reset(){this.h_=0}I_(){this.h_=this.l_}E_(e){this.cancel();const n=Math.floor(this.h_+this.d_()),r=Math.max(0,Date.now()-this.T_),s=Math.max(0,n-r);s>0&&q("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.h_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.P_=this.bi.enqueueAfterDelay(this.timerId,s,()=>(this.T_=Date.now(),e())),this.h_*=this.c_,this.h_<this.u_&&(this.h_=this.u_),this.h_>this.l_&&(this.h_=this.l_)}A_(){this.P_!==null&&(this.P_.skipDelay(),this.P_=null)}cancel(){this.P_!==null&&(this.P_.cancel(),this.P_=null)}d_(){return(Math.random()-.5)*this.h_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ym="PersistentStream";class i0{constructor(e,n,r,s,i,a,l,u){this.bi=e,this.R_=r,this.V_=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.m_=0,this.f_=null,this.g_=null,this.stream=null,this.p_=0,this.y_=new s0(e,n)}w_(){return this.state===1||this.state===5||this.b_()}b_(){return this.state===2||this.state===3}start(){this.p_=0,this.state!==4?this.auth():this.S_()}async stop(){this.w_()&&await this.close(0)}D_(){this.state=0,this.y_.reset()}v_(){this.b_()&&this.f_===null&&(this.f_=this.bi.enqueueAfterDelay(this.R_,6e4,()=>this.C_()))}F_(e){this.M_(),this.stream.send(e)}async C_(){if(this.b_())return this.close(0)}M_(){this.f_&&(this.f_.cancel(),this.f_=null)}x_(){this.g_&&(this.g_.cancel(),this.g_=null)}async close(e,n){this.M_(),this.x_(),this.y_.cancel(),this.m_++,e!==4?this.y_.reset():n&&n.code===b.RESOURCE_EXHAUSTED?(vn(n.toString()),vn("Using maximum backoff delay to prevent overloading the backend."),this.y_.I_()):n&&n.code===b.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.O_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zo(n)}O_(){}auth(){this.state=1;const e=this.N_(this.m_),n=this.m_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.m_===n&&this.B_(r,s)},r=>{e(()=>{const s=new K(b.UNKNOWN,"Fetching auth token failed: "+r.message);return this.L_(s)})})}B_(e,n){const r=this.N_(this.m_);this.stream=this.k_(e,n),this.stream.jo(()=>{r(()=>this.listener.jo())}),this.stream.Jo(()=>{r(()=>(this.state=2,this.g_=this.bi.enqueueAfterDelay(this.V_,1e4,()=>(this.b_()&&(this.state=3),Promise.resolve())),this.listener.Jo()))}),this.stream.Zo(s=>{r(()=>this.L_(s))}),this.stream.onMessage(s=>{r(()=>++this.p_==1?this.q_(s):this.onNext(s))})}S_(){this.state=5,this.y_.E_(async()=>{this.state=0,this.start()})}L_(e){return q(Ym,`close with error: ${e}`),this.stream=null,this.close(4,e)}N_(e){return n=>{this.bi.enqueueAndForget(()=>this.m_===e?n():(q(Ym,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class qA extends i0{constructor(e,n,r,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}k_(e,n){return this.connection.a_("Listen",e,n)}q_(e){return this.onNext(e)}onNext(e){this.y_.reset();const n=YI(this.serializer,e),r=function(i){if(!("targetChange"in i))return J.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?J.min():a.readTime?Yt(a.readTime):J.min()}(e);return this.listener.Q_(n,r)}U_(e){const n={};n.database=nh(this.serializer),n.addTarget=function(i,a){let l;const u=a.target;if(l=Xc(u)?{documents:ZI(i,u)}:{query:eA(i,u).gt},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=K_(i,a.resumeToken);const h=Zc(i,a.expectedCount);h!==null&&(l.expectedCount=h)}else if(a.snapshotVersion.compareTo(J.min())>0){l.readTime=Za(i,a.snapshotVersion.toTimestamp());const h=Zc(i,a.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const r=nA(this.serializer,e);r&&(n.labels=r),this.F_(n)}K_(e){const n={};n.database=nh(this.serializer),n.removeTarget=e,this.F_(n)}}class HA extends i0{constructor(e,n,r,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get W_(){return this.p_>0}start(){this.lastStreamToken=void 0,super.start()}O_(){this.W_&&this.G_([])}k_(e,n){return this.connection.a_("Write",e,n)}q_(e){return le(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,le(!e.writeResults||e.writeResults.length===0,55816),this.listener.z_()}onNext(e){le(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.y_.reset();const n=JI(e.writeResults,e.commitTime),r=Yt(e.commitTime);return this.listener.j_(r,n)}H_(){const e={};e.database=nh(this.serializer),this.F_(e)}G_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>XI(this.serializer,r))};this.F_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{}class KA extends WA{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.J_=!1}Y_(){if(this.J_)throw new K(b.FAILED_PRECONDITION,"The client has already been terminated.")}Qo(e,n,r,s){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Qo(e,eh(n,r),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===b.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new K(b.UNKNOWN,i.toString())})}Wo(e,n,r,s,i){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Wo(e,eh(n,r),s,a,l,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===b.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new K(b.UNKNOWN,a.toString())})}terminate(){this.J_=!0,this.connection.terminate()}}class QA{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.Z_=0,this.X_=null,this.ea=!0}ta(){this.Z_===0&&(this.na("Unknown"),this.X_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.X_=null,this.ra("Backend didn't respond within 10 seconds."),this.na("Offline"),Promise.resolve())))}ia(e){this.state==="Online"?this.na("Unknown"):(this.Z_++,this.Z_>=1&&(this.sa(),this.ra(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.na("Offline")))}set(e){this.sa(),this.Z_=0,e==="Online"&&(this.ea=!1),this.na(e)}na(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ra(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ea?(vn(n),this.ea=!1):q("OnlineStateTracker",n)}sa(){this.X_!==null&&(this.X_.cancel(),this.X_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ar="RemoteStore";class GA{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.oa=[],this._a=new Map,this.aa=new Set,this.ua=[],this.ca=i,this.ca.vo(a=>{r.enqueueAndForget(async()=>{jr(this)&&(q(Ar,"Restarting streams for network reachability change."),await async function(u){const h=Z(u);h.aa.add(4),await uo(h),h.la.set("Unknown"),h.aa.delete(4),await Ll(h)}(this))})}),this.la=new QA(r,s)}}async function Ll(t){if(jr(t))for(const e of t.ua)await e(!0)}async function uo(t){for(const e of t.ua)await e(!1)}function o0(t,e){const n=Z(t);n._a.has(e.targetId)||(n._a.set(e.targetId,e),Id(n)?Sd(n):Vs(n).b_()&&xd(n,e))}function Td(t,e){const n=Z(t),r=Vs(n);n._a.delete(e),r.b_()&&a0(n,e),n._a.size===0&&(r.b_()?r.v_():jr(n)&&n.la.set("Unknown"))}function xd(t,e){if(t.ha.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(J.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Vs(t).U_(e)}function a0(t,e){t.ha.Ke(e),Vs(t).K_(e)}function Sd(t){t.ha=new $I({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t._a.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),Vs(t).start(),t.la.ta()}function Id(t){return jr(t)&&!Vs(t).w_()&&t._a.size>0}function jr(t){return Z(t).aa.size===0}function l0(t){t.ha=void 0}async function YA(t){t.la.set("Online")}async function XA(t){t._a.forEach((e,n)=>{xd(t,e)})}async function JA(t,e){l0(t),Id(t)?(t.la.ia(e),Sd(t)):t.la.set("Unknown")}async function ZA(t,e,n){if(t.la.set("Online"),e instanceof W_&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const l of i.targetIds)s._a.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s._a.delete(l),s.ha.removeTarget(l))}(t,e)}catch(r){q(Ar,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await tl(t,r)}else if(e instanceof ma?t.ha.Xe(e):e instanceof H_?t.ha.ot(e):t.ha.nt(e),!n.isEqual(J.min()))try{const r=await r0(t.localStore);n.compareTo(r)>=0&&await function(i,a){const l=i.ha.It(a);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const f=i._a.get(h);f&&i._a.set(h,f.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,h)=>{const f=i._a.get(u);if(!f)return;i._a.set(u,f.withResumeToken(Ke.EMPTY_BYTE_STRING,f.snapshotVersion)),a0(i,u);const m=new Vn(f.target,u,h,f.sequenceNumber);xd(i,m)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){q(Ar,"Failed to raise snapshot:",r),await tl(t,r)}}async function tl(t,e,n){if(!Ns(e))throw e;t.aa.add(1),await uo(t),t.la.set("Offline"),n||(n=()=>r0(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{q(Ar,"Retrying IndexedDB access"),await n(),t.aa.delete(1),await Ll(t)})}function u0(t,e){return e().catch(n=>tl(t,n,e))}async function Ol(t){const e=Z(t),n=Zn(e);let r=e.oa.length>0?e.oa[e.oa.length-1].batchId:ud;for(;eC(e);)try{const s=await LA(e.localStore,r);if(s===null){e.oa.length===0&&n.v_();break}r=s.batchId,tC(e,s)}catch(s){await tl(e,s)}c0(e)&&h0(e)}function eC(t){return jr(t)&&t.oa.length<10}function tC(t,e){t.oa.push(e);const n=Zn(t);n.b_()&&n.W_&&n.G_(e.mutations)}function c0(t){return jr(t)&&!Zn(t).w_()&&t.oa.length>0}function h0(t){Zn(t).start()}async function nC(t){Zn(t).H_()}async function rC(t){const e=Zn(t);for(const n of t.oa)e.G_(n.mutations)}async function sC(t,e,n){const r=t.oa.shift(),s=md.from(r,e,n);await u0(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Ol(t)}async function iC(t,e){e&&Zn(t).W_&&await async function(r,s){if(function(a){return zI(a)&&a!==b.ABORTED}(s.code)){const i=r.oa.shift();Zn(r).D_(),await u0(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Ol(r)}}(t,e),c0(t)&&h0(t)}async function Xm(t,e){const n=Z(t);n.asyncQueue.verifyOperationInProgress(),q(Ar,"RemoteStore received new credentials");const r=jr(n);n.aa.add(3),await uo(n),r&&n.la.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.aa.delete(3),await Ll(n)}async function oC(t,e){const n=Z(t);e?(n.aa.delete(2),await Ll(n)):e||(n.aa.add(2),await uo(n),n.la.set("Unknown"))}function Vs(t){return t.Pa||(t.Pa=function(n,r,s){const i=Z(n);return i.Y_(),new qA(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{jo:YA.bind(null,t),Jo:XA.bind(null,t),Zo:JA.bind(null,t),Q_:ZA.bind(null,t)}),t.ua.push(async e=>{e?(t.Pa.D_(),Id(t)?Sd(t):t.la.set("Unknown")):(await t.Pa.stop(),l0(t))})),t.Pa}function Zn(t){return t.Ta||(t.Ta=function(n,r,s){const i=Z(n);return i.Y_(),new HA(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{jo:()=>Promise.resolve(),Jo:nC.bind(null,t),Zo:iC.bind(null,t),z_:rC.bind(null,t),j_:sC.bind(null,t)}),t.ua.push(async e=>{e?(t.Ta.D_(),await Ol(t)):(await t.Ta.stop(),t.oa.length>0&&(q(Ar,`Stopping write stream with ${t.oa.length} pending writes`),t.oa=[]))})),t.Ta}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Hn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const a=Date.now()+r,l=new Ad(e,n,a,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(b.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Cd(t,e){if(vn("AsyncQueue",`${e}: ${t}`),Ns(t))return new K(b.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{static emptySet(e){return new cs(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Q.comparator(n.key,r.key):(n,r)=>Q.comparator(n.key,r.key),this.keyedMap=li(),this.sortedSet=new Se(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof cs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new cs;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(){this.Ia=new Se(Q.comparator)}track(e){const n=e.doc.key,r=this.Ia.get(n);r?e.type!==0&&r.type===3?this.Ia=this.Ia.insert(n,e):e.type===3&&r.type!==1?this.Ia=this.Ia.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Ia=this.Ia.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Ia=this.Ia.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Ia=this.Ia.remove(n):e.type===1&&r.type===2?this.Ia=this.Ia.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Ia=this.Ia.insert(n,{type:2,doc:e.doc}):G(63341,{Vt:e,Ea:r}):this.Ia=this.Ia.insert(n,e)}da(){const e=[];return this.Ia.inorderTraversal((n,r)=>{e.push(r)}),e}}class xs{constructor(e,n,r,s,i,a,l,u,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,s,i){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new xs(e,n,cs.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Pl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(){this.Aa=void 0,this.Ra=[]}Va(){return this.Ra.some(e=>e.ma())}}class lC{constructor(){this.queries=Zm(),this.onlineState="Unknown",this.fa=new Set}terminate(){(function(n,r){const s=Z(n),i=s.queries;s.queries=Zm(),i.forEach((a,l)=>{for(const u of l.Ra)u.onError(r)})})(this,new K(b.ABORTED,"Firestore shutting down"))}}function Zm(){return new Vr(t=>N_(t),Pl)}async function uC(t,e){const n=Z(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.Va()&&e.ma()&&(r=2):(i=new aC,r=e.ma()?0:1);try{switch(r){case 0:i.Aa=await n.onListen(s,!0);break;case 1:i.Aa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=Cd(a,`Initialization of query '${Br(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.Ra.push(e),e.ga(n.onlineState),i.Aa&&e.pa(i.Aa)&&Rd(n)}async function cC(t,e){const n=Z(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const a=i.Ra.indexOf(e);a>=0&&(i.Ra.splice(a,1),i.Ra.length===0?s=e.ma()?0:1:!i.Va()&&e.ma()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function hC(t,e){const n=Z(t);let r=!1;for(const s of e){const i=s.query,a=n.queries.get(i);if(a){for(const l of a.Ra)l.pa(s)&&(r=!0);a.Aa=s}}r&&Rd(n)}function dC(t,e,n){const r=Z(t),s=r.queries.get(e);if(s)for(const i of s.Ra)i.onError(n);r.queries.delete(e)}function Rd(t){t.fa.forEach(e=>{e.next()})}var ih,eg;(eg=ih||(ih={})).ya="default",eg.Cache="cache";class fC{constructor(e,n,r){this.query=e,this.wa=n,this.ba=!1,this.Sa=null,this.onlineState="Unknown",this.options=r||{}}pa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new xs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ba?this.Da(e)&&(this.wa.next(e),n=!0):this.va(e,this.onlineState)&&(this.Ca(e),n=!0),this.Sa=e,n}onError(e){this.wa.error(e)}ga(e){this.onlineState=e;let n=!1;return this.Sa&&!this.ba&&this.va(this.Sa,e)&&(this.Ca(this.Sa),n=!0),n}va(e,n){if(!e.fromCache||!this.ma())return!0;const r=n!=="Offline";return(!this.options.Fa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Da(e){if(e.docChanges.length>0)return!0;const n=this.Sa&&this.Sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Ca(e){e=xs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ba=!0,this.wa.next(e)}ma(){return this.options.source!==ih.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0{constructor(e){this.key=e}}class f0{constructor(e){this.key=e}}class pC{constructor(e,n){this.query=e,this.qa=n,this.Qa=null,this.hasCachedResults=!1,this.current=!1,this.$a=ne(),this.mutatedKeys=ne(),this.Ua=V_(e),this.Ka=new cs(this.Ua)}get Wa(){return this.qa}Ga(e,n){const r=n?n.za:new Jm,s=n?n.Ka:this.Ka;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,m)=>{const v=s.get(f),A=kl(this.query,m)?m:null,R=!!v&&this.mutatedKeys.has(v.key),N=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let V=!1;v&&A?v.data.isEqual(A.data)?R!==N&&(r.track({type:3,doc:A}),V=!0):this.ja(v,A)||(r.track({type:2,doc:A}),V=!0,(u&&this.Ua(A,u)>0||h&&this.Ua(A,h)<0)&&(l=!0)):!v&&A?(r.track({type:0,doc:A}),V=!0):v&&!A&&(r.track({type:1,doc:v}),V=!0,(u||h)&&(l=!0)),V&&(A?(a=a.add(A),i=N?i.add(f):i.delete(f)):(a=a.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const f=this.query.limitType==="F"?a.last():a.first();a=a.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{Ka:a,za:r,ys:l,mutatedKeys:i}}ja(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ka;this.Ka=e.Ka,this.mutatedKeys=e.mutatedKeys;const a=e.za.da();a.sort((f,m)=>function(A,R){const N=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return G(20277,{Vt:V})}};return N(A)-N(R)}(f.type,m.type)||this.Ua(f.doc,m.doc)),this.Ha(r),s=s!=null&&s;const l=n&&!s?this.Ja():[],u=this.$a.size===0&&this.current&&!s?1:0,h=u!==this.Qa;return this.Qa=u,a.length!==0||h?{snapshot:new xs(this.query,e.Ka,i,a,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ya:l}:{Ya:l}}ga(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ka:this.Ka,za:new Jm,mutatedKeys:this.mutatedKeys,ys:!1},!1)):{Ya:[]}}Za(e){return!this.qa.has(e)&&!!this.Ka.has(e)&&!this.Ka.get(e).hasLocalMutations}Ha(e){e&&(e.addedDocuments.forEach(n=>this.qa=this.qa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.qa=this.qa.delete(n)),this.current=e.current)}Ja(){if(!this.current)return[];const e=this.$a;this.$a=ne(),this.Ka.forEach(r=>{this.Za(r.key)&&(this.$a=this.$a.add(r.key))});const n=[];return e.forEach(r=>{this.$a.has(r)||n.push(new f0(r))}),this.$a.forEach(r=>{e.has(r)||n.push(new d0(r))}),n}Xa(e){this.qa=e.Ns,this.$a=ne();const n=this.Ga(e.documents);return this.applyChanges(n,!0)}eu(){return xs.fromInitialDocuments(this.query,this.Ka,this.mutatedKeys,this.Qa===0,this.hasCachedResults)}}const Pd="SyncEngine";class mC{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class gC{constructor(e){this.key=e,this.tu=!1}}class yC{constructor(e,n,r,s,i,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.nu={},this.ru=new Vr(l=>N_(l),Pl),this.iu=new Map,this.su=new Set,this.ou=new Se(Q.comparator),this._u=new Map,this.au=new vd,this.uu={},this.cu=new Map,this.lu=Ts.ir(),this.onlineState="Unknown",this.hu=void 0}get isPrimaryClient(){return this.hu===!0}}async function vC(t,e,n=!0){const r=_0(t);let s;const i=r.ru.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.eu()):s=await p0(r,e,n,!0),s}async function _C(t,e){const n=_0(t);await p0(n,e,!0,!1)}async function p0(t,e,n,r){const s=await OA(t.localStore,Gt(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await EC(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&o0(t.remoteStore,s),l}async function EC(t,e,n,r,s){t.Pu=(m,v,A)=>async function(N,V,T,_){let I=V.view.Ga(T);I.ys&&(I=await Wm(N.localStore,V.query,!1).then(({documents:w})=>V.view.Ga(w,I)));const j=_&&_.targetChanges.get(V.targetId),z=_&&_.targetMismatches.get(V.targetId)!=null,$=V.view.applyChanges(I,N.isPrimaryClient,j,z);return ng(N,V.targetId,$.Ya),$.snapshot}(t,m,v,A);const i=await Wm(t.localStore,e,!0),a=new pC(e,i.Ns),l=a.Ga(i.documents),u=lo.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),h=a.applyChanges(l,t.isPrimaryClient,u);ng(t,n,h.Ya);const f=new mC(e,n,a);return t.ru.set(e,f),t.iu.has(n)?t.iu.get(n).push(e):t.iu.set(n,[e]),h.snapshot}async function wC(t,e,n){const r=Z(t),s=r.ru.get(e),i=r.iu.get(s.targetId);if(i.length>1)return r.iu.set(s.targetId,i.filter(a=>!Pl(a,e))),void r.ru.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await rh(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Td(r.remoteStore,s.targetId),oh(r,s.targetId)}).catch(ks)):(oh(r,s.targetId),await rh(r.localStore,s.targetId,!0))}async function TC(t,e){const n=Z(t),r=n.ru.get(e),s=n.iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Td(n.remoteStore,r.targetId))}async function xC(t,e,n){const r=kC(t);try{const s=await function(a,l){const u=Z(a),h=Le.now(),f=l.reduce((A,R)=>A.add(R.key),ne());let m,v;return u.persistence.runTransaction("Locally write mutations","readwrite",A=>{let R=_n(),N=ne();return u.Cs.getEntries(A,f).next(V=>{R=V,R.forEach((T,_)=>{_.isValidDocument()||(N=N.add(T))})}).next(()=>u.localDocuments.getOverlayedDocuments(A,R)).next(V=>{m=V;const T=[];for(const _ of l){const I=OI(_,m.get(_.key).overlayedDocument);I!=null&&T.push(new Dr(_.key,I,x_(I.value.mapValue),dn.exists(!0)))}return u.mutationQueue.addMutationBatch(A,h,T,l)}).next(V=>{v=V;const T=V.applyToLocalDocumentSet(m,N);return u.documentOverlayCache.saveOverlays(A,V.batchId,T)})}).then(()=>({batchId:v.batchId,changes:j_(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(a,l,u){let h=a.uu[a.currentUser.toKey()];h||(h=new Se(ee)),h=h.insert(l,u),a.uu[a.currentUser.toKey()]=h}(r,s.batchId,n),await co(r,s.changes),await Ol(r.remoteStore)}catch(s){const i=Cd(s,"Failed to persist write");n.reject(i)}}async function m0(t,e){const n=Z(t);try{const r=await DA(n.localStore,e);e.targetChanges.forEach((s,i)=>{const a=n._u.get(i);a&&(le(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.tu=!0:s.modifiedDocuments.size>0?le(a.tu,14607):s.removedDocuments.size>0&&(le(a.tu,42227),a.tu=!1))}),await co(n,r,e)}catch(r){await ks(r)}}function tg(t,e,n){const r=Z(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.ru.forEach((i,a)=>{const l=a.view.ga(e);l.snapshot&&s.push(l.snapshot)}),function(a,l){const u=Z(a);u.onlineState=l;let h=!1;u.queries.forEach((f,m)=>{for(const v of m.Ra)v.ga(l)&&(h=!0)}),h&&Rd(u)}(r.eventManager,e),s.length&&r.nu.Q_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function SC(t,e,n){const r=Z(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r._u.get(e),i=s&&s.key;if(i){let a=new Se(Q.comparator);a=a.insert(i,rt.newNoDocument(i,J.min()));const l=ne().add(i),u=new Dl(J.min(),new Map,new Se(ee),a,l);await m0(r,u),r.ou=r.ou.remove(i),r._u.delete(e),kd(r)}else await rh(r.localStore,e,!1).then(()=>oh(r,e,n)).catch(ks)}async function IC(t,e){const n=Z(t),r=e.batch.batchId;try{const s=await VA(n.localStore,e);y0(n,r,null),g0(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await co(n,s)}catch(s){await ks(s)}}async function AC(t,e,n){const r=Z(t);try{const s=await function(a,l){const u=Z(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let f;return u.mutationQueue.lookupMutationBatch(h,l).next(m=>(le(m!==null,37113),f=m.keys(),u.mutationQueue.removeMutationBatch(h,m))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,f,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,f)).next(()=>u.localDocuments.getDocuments(h,f))})}(r.localStore,e);y0(r,e,n),g0(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await co(r,s)}catch(s){await ks(s)}}function g0(t,e){(t.cu.get(e)||[]).forEach(n=>{n.resolve()}),t.cu.delete(e)}function y0(t,e,n){const r=Z(t);let s=r.uu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.uu[r.currentUser.toKey()]=s}}function oh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.iu.get(e))t.ru.delete(r),n&&t.nu.Tu(r,n);t.iu.delete(e),t.isPrimaryClient&&t.au.Ur(e).forEach(r=>{t.au.containsKey(r)||v0(t,r)})}function v0(t,e){t.su.delete(e.path.canonicalString());const n=t.ou.get(e);n!==null&&(Td(t.remoteStore,n),t.ou=t.ou.remove(e),t._u.delete(n),kd(t))}function ng(t,e,n){for(const r of n)r instanceof d0?(t.au.addReference(r.key,e),CC(t,r)):r instanceof f0?(q(Pd,"Document no longer in limbo: "+r.key),t.au.removeReference(r.key,e),t.au.containsKey(r.key)||v0(t,r.key)):G(19791,{Iu:r})}function CC(t,e){const n=e.key,r=n.path.canonicalString();t.ou.get(n)||t.su.has(r)||(q(Pd,"New document in limbo: "+n),t.su.add(r),kd(t))}function kd(t){for(;t.su.size>0&&t.ou.size<t.maxConcurrentLimboResolutions;){const e=t.su.values().next().value;t.su.delete(e);const n=new Q(Ee.fromString(e)),r=t.lu.next();t._u.set(r,new gC(n)),t.ou=t.ou.insert(n,r),o0(t.remoteStore,new Vn(Gt(k_(n.path)),r,"TargetPurposeLimboResolution",Il.le))}}async function co(t,e,n){const r=Z(t),s=[],i=[],a=[];r.ru.isEmpty()||(r.ru.forEach((l,u)=>{a.push(r.Pu(u,e,n).then(h=>{var f;if((h||n)&&r.isPrimaryClient){const m=h?!h.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(h){s.push(h);const m=Ed.Ps(u.targetId,h);i.push(m)}}))}),await Promise.all(a),r.nu.Q_(s),await async function(u,h){const f=Z(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>L.forEach(h,v=>L.forEach(v.ls,A=>f.persistence.referenceDelegate.addReference(m,v.targetId,A)).next(()=>L.forEach(v.hs,A=>f.persistence.referenceDelegate.removeReference(m,v.targetId,A)))))}catch(m){if(!Ns(m))throw m;q(wd,"Failed to update sequence numbers: "+m)}for(const m of h){const v=m.targetId;if(!m.fromCache){const A=f.Ss.get(v),R=A.snapshotVersion,N=A.withLastLimboFreeSnapshotVersion(R);f.Ss=f.Ss.insert(v,N)}}}(r.localStore,i))}async function RC(t,e){const n=Z(t);if(!n.currentUser.isEqual(e)){q(Pd,"User change. New user:",e.toKey());const r=await n0(n.localStore,e);n.currentUser=e,function(i,a){i.cu.forEach(l=>{l.forEach(u=>{u.reject(new K(b.CANCELLED,a))})}),i.cu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await co(n,r.Ms)}}function PC(t,e){const n=Z(t),r=n._u.get(e);if(r&&r.tu)return ne().add(r.key);{let s=ne();const i=n.iu.get(e);if(!i)return s;for(const a of i){const l=n.ru.get(a);s=s.unionWith(l.view.Wa)}return s}}function _0(t){const e=Z(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=m0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=PC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=SC.bind(null,e),e.nu.Q_=hC.bind(null,e.eventManager),e.nu.Tu=dC.bind(null,e.eventManager),e}function kC(t){const e=Z(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=IC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=AC.bind(null,e),e}class nl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=jl(e.databaseInfo.databaseId),this.sharedClientState=this.Au(e),this.persistence=this.Ru(e),await this.persistence.start(),this.localStore=this.Vu(e),this.gcScheduler=this.mu(e,this.localStore),this.indexBackfillerScheduler=this.fu(e,this.localStore)}mu(e,n){return null}fu(e,n){return null}Vu(e){return NA(this.persistence,new RA,e.initialUser,this.serializer)}Ru(e){return new t0(_d.Ei,this.serializer)}Au(e){return new MA}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}nl.provider={build:()=>new nl};class NC extends nl{constructor(e){super(),this.cacheSizeBytes=e}mu(e,n){le(this.persistence.referenceDelegate instanceof el,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new fA(r,e.asyncQueue,n)}Ru(e){const n=this.cacheSizeBytes!==void 0?ft.withCacheSize(this.cacheSizeBytes):ft.DEFAULT;return new t0(r=>el.Ei(r,n),this.serializer)}}class ah{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>tg(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=RC.bind(null,this.syncEngine),await oC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new lC}()}createDatastore(e){const n=jl(e.databaseInfo.databaseId),r=function(i){return new $A(i)}(e.databaseInfo);return function(i,a,l,u){return new KA(i,a,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,a,l){return new GA(r,s,i,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>tg(this.syncEngine,n,0),function(){return Gm.C()?new Gm:new FA}())}createSyncEngine(e,n){return function(s,i,a,l,u,h,f){const m=new yC(s,i,a,l,u,h);return f&&(m.hu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=Z(s);q(Ar,"RemoteStore shutting down."),i.aa.add(5),await uo(i),i.ca.shutdown(),i.la.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}ah.provider={build:()=>new ah};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.pu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.pu(this.observer.error,e):vn("Uncaught Error in snapshot listener:",e.toString()))}yu(){this.muted=!0}pu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const er="FirestoreClient";class DC{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=tt.UNAUTHENTICATED,this.clientId=f_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async a=>{q(er,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(q(er,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Hn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Cd(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Bu(t,e){t.asyncQueue.verifyOperationInProgress(),q(er,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await n0(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function rg(t,e){t.asyncQueue.verifyOperationInProgress();const n=await jC(t);q(er,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Xm(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Xm(e.remoteStore,s)),t._onlineComponents=e}async function jC(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){q(er,"Using user provided OfflineComponentProvider");try{await Bu(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===b.FAILED_PRECONDITION||s.code===b.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;vs("Error using user provided cache. Falling back to memory cache: "+n),await Bu(t,new nl)}}else q(er,"Using default OfflineComponentProvider"),await Bu(t,new NC(void 0));return t._offlineComponents}async function E0(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(q(er,"Using user provided OnlineComponentProvider"),await rg(t,t._uninitializedComponentsProvider._online)):(q(er,"Using default OnlineComponentProvider"),await rg(t,new ah))),t._onlineComponents}function LC(t){return E0(t).then(e=>e.syncEngine)}async function OC(t){const e=await E0(t),n=e.eventManager;return n.onListen=vC.bind(null,e.syncEngine),n.onUnlisten=wC.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=_C.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=TC.bind(null,e.syncEngine),n}function bC(t,e,n={}){const r=new Hn;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,l,u,h){const f=new VC({next:v=>{f.yu(),a.enqueueAndForget(()=>cC(i,m)),v.fromCache&&u.source==="server"?h.reject(new K(b.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(v)},error:v=>h.reject(v)}),m=new fC(l,f,{includeMetadataChanges:!0,Fa:!0});return uC(i,m)}(await OC(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w0(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sg=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T0(t,e,n){if(!n)throw new K(b.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function MC(t,e,n,r){if(e===!0&&r===!0)throw new K(b.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function ig(t){if(!Q.isDocumentKey(t))throw new K(b.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function og(t){if(Q.isDocumentKey(t))throw new K(b.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Nd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":G(12329,{type:typeof t})}function Xi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new K(b.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Nd(t);throw new K(b.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x0="firestore.googleapis.com",ag=!0;class lg{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new K(b.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=x0,this.ssl=ag}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:ag;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=e0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<hA)throw new K(b.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}MC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=w0((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new K(b.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new K(b.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new K(b.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class bl{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lg({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new K(b.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new K(b.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lg(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new z1;switch(r.type){case"firstParty":return new H1(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new K(b.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=sg.get(n);r&&(q("ComponentProvider","Removing Datastore"),sg.delete(n),r.terminate())}(this),Promise.resolve()}}function FC(t,e,n,r={}){var s;t=Xi(t,bl);const i=Xv(e),a=t._getSettings(),l=Object.assign(Object.assign({},a),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${n}`;i&&AS(`https://${u}`),a.host!==x0&&a.host!==u&&vs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h=Object.assign(Object.assign({},a),{host:u,ssl:i,emulatorOptions:r});if(!$a(h,l)&&(t._setSettings(h),r.mockUserToken)){let f,m;if(typeof r.mockUserToken=="string")f=r.mockUserToken,m=tt.MOCK_USER;else{f=yS(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new K(b.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new tt(v)}t._authCredentials=new B1(new h_(f,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ml(this.firestore,e,this._query)}}class Nt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Wn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Nt(this.firestore,e,this._key)}}class Wn extends Ml{constructor(e,n,r){super(e,n,k_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Nt(this.firestore,null,new Q(e))}withConverter(e){return new Wn(this.firestore,e,this._path)}}function Vd(t,e,...n){if(t=Bi(t),T0("collection","path",e),t instanceof bl){const r=Ee.fromString(e,...n);return og(r),new Wn(t,null,r)}{if(!(t instanceof Nt||t instanceof Wn))throw new K(b.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ee.fromString(e,...n));return og(r),new Wn(t.firestore,null,r)}}function Dd(t,e,...n){if(t=Bi(t),arguments.length===1&&(e=f_.newId()),T0("doc","path",e),t instanceof bl){const r=Ee.fromString(e,...n);return ig(r),new Nt(t,null,new Q(r))}{if(!(t instanceof Nt||t instanceof Wn))throw new K(b.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ee.fromString(e,...n));return ig(r),new Nt(t.firestore,t instanceof Wn?t.converter:null,new Q(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ug="AsyncQueue";class cg{constructor(e=Promise.resolve()){this.Qu=[],this.$u=!1,this.Uu=[],this.Ku=null,this.Wu=!1,this.Gu=!1,this.zu=[],this.y_=new s0(this,"async_queue_retry"),this.ju=()=>{const r=zu();r&&q(ug,"Visibility state changed to "+r.visibilityState),this.y_.A_()},this.Hu=e;const n=zu();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.ju)}get isShuttingDown(){return this.$u}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ju(),this.Yu(e)}enterRestrictedMode(e){if(!this.$u){this.$u=!0,this.Gu=e||!1;const n=zu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.ju)}}enqueue(e){if(this.Ju(),this.$u)return new Promise(()=>{});const n=new Hn;return this.Yu(()=>this.$u&&this.Gu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qu.push(e),this.Zu()))}async Zu(){if(this.Qu.length!==0){try{await this.Qu[0](),this.Qu.shift(),this.y_.reset()}catch(e){if(!Ns(e))throw e;q(ug,"Operation failed with retryable error: "+e)}this.Qu.length>0&&this.y_.E_(()=>this.Zu())}}Yu(e){const n=this.Hu.then(()=>(this.Wu=!0,e().catch(r=>{throw this.Ku=r,this.Wu=!1,vn("INTERNAL UNHANDLED ERROR: ",hg(r)),r}).then(r=>(this.Wu=!1,r))));return this.Hu=n,n}enqueueAfterDelay(e,n,r){this.Ju(),this.zu.indexOf(e)>-1&&(n=0);const s=Ad.createAndSchedule(this,e,n,r,i=>this.Xu(i));return this.Uu.push(s),s}Ju(){this.Ku&&G(47125,{ec:hg(this.Ku)})}verifyOperationInProgress(){}async tc(){let e;do e=this.Hu,await e;while(e!==this.Hu)}nc(e){for(const n of this.Uu)if(n.timerId===e)return!0;return!1}rc(e){return this.tc().then(()=>{this.Uu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Uu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.tc()})}sc(e){this.zu.push(e)}Xu(e){const n=this.Uu.indexOf(e);this.Uu.splice(n,1)}}function hg(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class jd extends bl{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new cg,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new cg(e),this._firestoreClient=void 0,await e}}}function UC(t,e){const n=typeof t=="object"?t:R1(),r=typeof t=="string"?t:Ka,s=x1(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=mS("firestore");i&&FC(s,...i)}return s}function S0(t){if(t._terminated)throw new K(b.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||zC(t),t._firestoreClient}function zC(t){var e,n,r;const s=t._freezeSettings(),i=function(l,u,h,f){return new oI(l,u,h,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,w0(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new DC(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ss(Ke.fromBase64String(e))}catch(n){throw new K(b.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ss(Ke.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new K(b.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new K(b.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new K(b.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ee(this._lat,e._lat)||ee(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bd{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC=/^__.*__$/;class $C{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Dr(e,this.data,this.fieldMask,n,this.fieldTransforms):new ao(e,this.data,n,this.fieldTransforms)}}function A0(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw G(40011,{oc:t})}}class Md{constructor(e,n,r,s,i,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this._c(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get oc(){return this.settings.oc}ac(e){return new Md(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}uc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.ac({path:r,cc:!1});return s.lc(e),s}hc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.ac({path:r,cc:!1});return s._c(),s}Pc(e){return this.ac({path:void 0,cc:!0})}Tc(e){return rl(e,this.settings.methodName,this.settings.Ic||!1,this.path,this.settings.Ec)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}_c(){if(this.path)for(let e=0;e<this.path.length;e++)this.lc(this.path.get(e))}lc(e){if(e.length===0)throw this.Tc("Document fields must not be empty");if(A0(this.oc)&&BC.test(e))throw this.Tc('Document fields cannot begin and end with "__"')}}class qC{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||jl(e)}dc(e,n,r,s=!1){return new Md({oc:e,methodName:n,Ec:r,path:qe.emptyPath(),cc:!1,Ic:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function HC(t){const e=t._freezeSettings(),n=jl(t._databaseId);return new qC(t._databaseId,!!e.ignoreUndefinedProperties,n)}function WC(t,e,n,r,s,i={}){const a=t.dc(i.merge||i.mergeFields?2:0,e,n,s);k0("Data must be an object, but it was:",a,r);const l=R0(r,a);let u,h;if(i.merge)u=new Ft(a.fieldMask),h=a.fieldTransforms;else if(i.mergeFields){const f=[];for(const m of i.mergeFields){const v=KC(e,m,n);if(!a.contains(v))throw new K(b.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);GC(f,v)||f.push(v)}u=new Ft(f),h=a.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,h=a.fieldTransforms;return new $C(new Rt(l),u,h)}function C0(t,e){if(P0(t=Bi(t)))return k0("Unsupported field value:",e,t),R0(t,e);if(t instanceof I0)return function(r,s){if(!A0(s.oc))throw s.Tc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Tc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.cc&&e.oc!==4)throw e.Tc("Nested arrays are not supported");return function(r,s){const i=[];let a=0;for(const l of r){let u=C0(l,s.Pc(a));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),a++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Bi(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return kI(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Le.fromDate(r);return{timestampValue:Za(s.serializer,i)}}if(r instanceof Le){const i=new Le(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Za(s.serializer,i)}}if(r instanceof Od)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ss)return{bytesValue:K_(s.serializer,r._byteString)};if(r instanceof Nt){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.Tc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:yd(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof bd)return function(a,l){return{mapValue:{fields:{[w_]:{stringValue:T_},[Qa]:{arrayValue:{values:a.toArray().map(h=>{if(typeof h!="number")throw l.Tc("VectorValues must only contain numeric values.");return pd(l.serializer,h)})}}}}}}(r,s);throw s.Tc(`Unsupported field value: ${Nd(r)}`)}(t,e)}function R0(t,e){const n={};return m_(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Nr(t,(r,s)=>{const i=C0(s,e.uc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function P0(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Le||t instanceof Od||t instanceof Ss||t instanceof Nt||t instanceof I0||t instanceof bd)}function k0(t,e,n){if(!P0(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Nd(n);throw r==="an object"?e.Tc(t+" a custom object"):e.Tc(t+" "+r)}}function KC(t,e,n){if((e=Bi(e))instanceof Ld)return e._internalPath;if(typeof e=="string")return N0(t,e);throw rl("Field path arguments must be of type string or ",t,!1,void 0,n)}const QC=new RegExp("[~\\*/\\[\\]]");function N0(t,e,n){if(e.search(QC)>=0)throw rl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ld(...e.split("."))._internalPath}catch{throw rl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function rl(t,e,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||a)&&(u+=" (found",i&&(u+=` in field ${r}`),a&&(u+=` in document ${s}`),u+=")"),new K(b.INVALID_ARGUMENT,l+t+u)}function GC(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V0{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Nt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new YC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(D0("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class YC extends V0{data(){return super.data()}}function D0(t,e){return typeof e=="string"?N0(t,e):e instanceof Ld?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XC(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new K(b.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class JC{convertValue(e,n="none"){switch(Jn(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ce(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Xn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw G(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Nr(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[Qa].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(a=>Ce(a.doubleValue));return new bd(i)}convertGeoPoint(e){return new Od(Ce(e.latitude),Ce(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Cl(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Wi(e));default:return null}}convertTimestamp(e){const n=Yn(e);return new Le(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ee.fromString(e);le(Z_(r),9688,{name:e});const s=new Ki(r.get(1),r.get(3)),i=new Q(r.popFirst(5));return s.isEqual(n)||vn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZC(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class eR extends V0{constructor(e,n,r,s,i,a){super(e,n,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ga(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(D0("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class ga extends eR{data(e={}){return super.data(e)}}class tR{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Jo(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ga(this._firestore,this._userDataWriter,r.key,r,new Jo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new K(b.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const u=new ga(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Jo(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const u=new ga(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Jo(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,f=-1;return l.type!==0&&(h=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),f=a.indexOf(l.doc.key)),{type:nR(l.type),doc:u,oldIndex:h,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function nR(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return G(61501,{type:t})}}class rR extends JC{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ss(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Nt(this.firestore,null,n)}}function Fd(t){t=Xi(t,Ml);const e=Xi(t.firestore,jd),n=S0(e),r=new rR(e);return XC(t._query),bC(n,t._query).then(s=>new tR(e,r,t,s))}function Ud(t,e,n){t=Xi(t,Nt);const r=Xi(t.firestore,jd),s=ZC(t.converter,e);return sR(r,[WC(HC(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,dn.none())])}function sR(t,e){return function(r,s){const i=new Hn;return r.asyncQueue.enqueueAndForget(async()=>xC(await LC(r),s,i)),i.promise}(S0(t),e)}(function(e,n=!0){(function(s){Ps=s})(C1),Ha(new $i("firestore",(r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),l=new jd(new $1(r.getProvider("auth-internal")),new W1(a,r.getProvider("app-check-internal")),function(h,f){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new K(b.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ki(h.options.projectId,f)}(a,s),a);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),us(gm,ym,e),us(gm,ym,"esm2017")})();const iR={apiKey:"AIzaSyACuVKmVc7xS4K5TVljAeQTq7WNP_UC8n0",authDomain:"a2vissionweb.firebaseapp.com",projectId:"a2vissionweb",storageBucket:"a2vissionweb.appspot.com",messagingSenderId:"127311201904",appId:"1:127311201904:web:1b3bc95feb069bdc7d56b5",measurementId:"G-25MGLNYKEL"},oR=t_(iR),Ds=UC(oR),dg={email:"website@a2vission.com",password:"AA324/7bobita",role:"admin",blocked:!1};async function tr(){const e=(await Fd(Vd(Ds,"users"))).docs.map(n=>n.data());return e.find(n=>n.email===dg.email)||e.push(dg),localStorage.setItem("users",JSON.stringify(e)),e}async function Ji(t){localStorage.setItem("users",JSON.stringify(t));for(const e of t)await Ud(Dd(Ds,"users",e.email),e)}const j0="service_fx1243i",L0="ErTYhXQrHedtLERfM",aR="template_t8w8wdj",lR="template_t5c91au",uR="template_pwchange",O0=O.createContext(null);function cR({children:t}){const[e,n]=O.useState(()=>JSON.parse(localStorage.getItem("currentUser")||"null")),r=i=>{localStorage.setItem("currentUser",JSON.stringify(i)),n(i)},s=()=>{localStorage.removeItem("currentUser"),n(null)};return p.jsx(O0.Provider,{value:{user:e,login:r,logout:s},children:t})}const js=()=>O.useContext(O0),Zi=[{slug:"a2-vission-app",name:"A Vission App",price:"50 / mes",details:"+59,99 Desarrollo y Diseo  6 meses de permanencia"},{slug:"a2-unico-app",name:"A Unico App",price:"350 pago nico",details:"Incluye Desarrollo + Diseo  vlido 1 mes"},{slug:"a2-business-app",name:"A Business App",price:"30 / mes",details:"+650 de alta  1 ao de mantenimiento gratis"}],b0=[{slug:"marketing",name:"Marketing",price:"80 / mes",details:"Plan vlido hasta cancelar"},{slug:"mantenimiento",name:"Mantenimiento",price:"65 / mes",details:"Editar + solucionar problemas  vlido hasta cancelar"}],zd=[{slug:"a2-vission-web",name:"A Vission Web",price:"40 / mes",details:"Desarrollo web + Diseo + Mantenimiento  6 meses permanencia"},{slug:"a2-unico-web",name:"A Unico Web",price:"280 pago nico",details:"Desarrollo + Diseo  vlido 1 mes"},{slug:"a2-business-web",name:"A Business Web",price:"550 / ao",details:"Desarrollo + Diseo  1 ao de mantenimiento incluido"}],_r=[...Zi,...b0,...zd],an=["Recibido","Presupuesto","Mtodo de pago","Preview","Trabajo aceptado","Estamos trabajando en ello","Finalizacin"];async function cn(){const e=(await Fd(Vd(Ds,"requests"))).docs.map(n=>n.data());return localStorage.setItem("requests",JSON.stringify(e)),e}async function sl(t){localStorage.setItem("requests",JSON.stringify(t));for(const e of t)await Ud(Dd(Ds,"requests",e.id),e)}async function il(){const e=(await Fd(Vd(Ds,"subscriptions"))).docs.map(n=>n.data());return localStorage.setItem("subscriptions",JSON.stringify(e)),e}async function fg(t){localStorage.setItem("subscriptions",JSON.stringify(t));for(const e of t)await Ud(Dd(Ds,"subscriptions",e.id),e)}const hR=[Zi[0],zd[0]];Promise.all([tr(),cn(),il()]).catch(t=>console.error("Firebase sync",t));function dR(){return p.jsxs("section",{className:"container mx-auto px-4 py-16 space-y-4",children:[p.jsx("h2",{className:"text-3xl font-bold",children:"Poltica de privacidad"}),p.jsx("p",{children:"AVission cumple el Reglamento (UE) 2016/679 (RGPD) y la LOPDGDD 3/2018. Los datos que nos facilites nombre, email, telfono y detalles del proyecto se usarn nicamente para gestionar los servicios contratados, facturacin y soporte."}),p.jsxs("p",{children:["Puedes ejercer tus derechos de acceso, rectificacin, supresin, portabilidad y oposicin enviando un correo a",p.jsx("a",{href:"mailto:website@a2vission.com",className:"text-sky-600 underline",children:"website@a2vission.com"}),"."]}),p.jsx("p",{children:"No cedemos datos a terceros salvo obligacin legal o proveedores imprescindibles (plataformas de pago, alojamiento, email). Conservaremos tu informacin mientras exista relacin contractual y los plazos legales de prescripcin fiscal."})]})}function fR(){return p.jsxs("section",{className:"container mx-auto px-4 py-16 space-y-4",children:[p.jsx("h2",{className:"text-3xl font-bold",children:"Trminos y condiciones"}),p.jsx("p",{children:"AVission (en adelante el Prestador) ofrece planes de desarrollo web y app cuyo detalle y precio se muestra en esta pgina. El Cliente declara ser mayor de edad y tener capacidad para contratar."}),p.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[p.jsxs("li",{children:["Los planes ",p.jsx("strong",{children:"App"})," y ",p.jsx("strong",{children:"Web"})," llevan una permanencia mnima de 6meses. El Cliente se compromete al pago ntegro de dicho periodo."]}),p.jsx("li",{children:"Finalizada la permanencia, la suscripcin se renueva automticamente mes a mes hasta cancelacin."}),p.jsx("li",{children:"Las cuotas se abonan por adelantado mediante tarjeta o dbito SEPA. El impago supondr la suspensin del servicio tras 15das."}),p.jsx("li",{children:"El Prestador entregar las primeras versiones (preview) en los plazos acordados y realizar hasta dos rondas de ajustes sin coste extra."}),p.jsx("li",{children:"Cualquier funcionalidad no contemplada originalmente se presupuestar aparte."})]}),p.jsxs("p",{children:["Para ms informacin escribe a",p.jsx("a",{href:"mailto:website@a2vission.com",className:"text-sky-600 underline",children:"website@a2vission.com"}),"."]})]})}function pR(){return p.jsxs("section",{className:"container mx-auto px-4 py-16 space-y-4",children:[p.jsx("h2",{className:"text-3xl font-bold",children:"Poltica de devolucin y reembolso"}),p.jsxs("p",{children:["Si el trabajo entregado no cumple las especificaciones, el Cliente dispone de ",p.jsx("strong",{children:"15das"})," desde la contratacin para solicitar reembolso enviando un correo a",p.jsx("a",{href:"mailto:website@a2vission.com",className:"text-sky-600 underline",children:"website@a2vission.com"})," ","detallando el motivo. No se admitirn devoluciones por cambios de opinin o peticiones fuera del alcance acordado."]}),p.jsx("p",{children:"Tras la validacin, el importe se devolver mediante el mismo mtodo de pago en un plazo mximo de 7das laborables."})]})}function mR(){return O.useRef(tr()).current,p.jsx(cR,{children:p.jsx(tS,{children:p.jsxs("div",{className:"min-h-screen flex flex-col font-sans",children:[p.jsx(gR,{}),p.jsx("main",{className:"flex-1",children:p.jsxs(Qx,{children:[p.jsx(lt,{path:"/profile",element:p.jsx(SR,{})}),p.jsx(lt,{path:"/mis-solicitudes",element:p.jsx(AR,{})}),p.jsx(lt,{path:"/suscripciones",element:p.jsx(CR,{})}),p.jsx(lt,{path:"/",element:p.jsx(yR,{})}),p.jsx(lt,{path:"/planes",element:p.jsx(_R,{})}),p.jsx(lt,{path:"/contacto",element:p.jsx(wR,{})}),p.jsx(lt,{path:"/login",element:p.jsx(xR,{})}),p.jsx(lt,{path:"/register",element:p.jsx(TR,{})}),p.jsx(lt,{path:"/planes/:slug",element:p.jsx(kR,{})}),p.jsx(lt,{path:"/solicitar/:slug",element:p.jsx(ER,{})}),p.jsx(lt,{path:"/admin",element:p.jsx(PR,{})}),p.jsx(lt,{path:"/terms",element:p.jsx(fR,{})}),p.jsx(lt,{path:"/privacy",element:p.jsx(dR,{})}),p.jsx(lt,{path:"/refund",element:p.jsx(pR,{})})]})}),p.jsx(RR,{})]})})})}function gR(){const[t,e]=O.useState(!1),{user:n,logout:r}=js(),[s,i]=O.useState(!1),[a,l]=O.useState(!1),u=Sl();return O.useEffect(()=>{n&&n.role!=="admin"&&cn().then(h=>l(h.some(f=>f.unread)))},[n]),p.jsxs("header",{className:"bg-white shadow",children:[p.jsxs("div",{className:"container mx-auto px-4 h-16 flex items-center justify-between",children:[p.jsxs(st,{to:"/",className:"flex items-center space-x-2",children:[p.jsx("img",{src:"/img/logo.png",alt:"A Vission",className:"h-10 w-10"}),p.jsx("span",{className:"font-bold text-xl text-sky-600",children:"A Vission"})]}),p.jsxs("nav",{className:"hidden md:flex space-x-8 text-sm font-medium",children:[p.jsx(ni,{to:"/",children:"Inicio"}),p.jsx(ni,{to:"/planes",children:"Planes y precios"}),p.jsx(ni,{to:"/contacto",children:"Contacto"}),n&&n.role==="admin"&&p.jsx(ni,{to:"/admin",children:"Panel admin"}),!n&&p.jsx(ni,{to:"/login",children:"Inicio de sesin"}),n&&n.role!=="admin"&&p.jsxs("div",{className:"relative",children:[p.jsx("button",{onClick:()=>i(!s),className:"text-slate-700 hover:text-sky-600",children:"Cuenta "}),s&&p.jsxs("div",{className:"absolute right-0 mt-2 w-40 bg-white border rounded shadow",children:[p.jsx(st,{to:"/profile",className:"block px-4 py-2 text-sm hover:bg-slate-50",children:"Mi perfil"}),p.jsx(st,{to:"/suscripciones",className:"block px-4 py-2 text-sm hover:bg-slate-50",children:"Suscripciones"}),p.jsxs(st,{to:"/mis-solicitudes",className:"block px-4 py-2 text-sm hover:bg-slate-50 flex items-center",children:["Solicitudes",a&&p.jsx("span",{className:"inline-block w-2 h-2 bg-red-600 rounded-full ml-2"})]}),p.jsx("button",{onClick:()=>{r(),u("/")},className:"block w-full text-left px-4 py-2 text-sm hover:bg-slate-50",children:"Cerrar sesin"})]})]}),n&&n.role==="admin"&&p.jsx("button",{onClick:()=>{r(),u("/")},className:"text-slate-700 hover:text-sky-600",children:"Cerrar sesin"})]}),p.jsxs("button",{className:"md:hidden p-2","aria-label":"Men",onClick:()=>e(!t),children:[p.jsx("span",{className:"block w-6 h-0.5 bg-slate-800 mb-1"}),p.jsx("span",{className:"block w-6 h-0.5 bg-slate-800 mb-1"}),p.jsx("span",{className:"block w-6 h-0.5 bg-slate-800"})]})]}),t&&p.jsxs("nav",{className:"md:hidden bg-white border-t border-slate-200",children:[p.jsx(Ur,{to:"/",onClick:()=>{e(!1)},children:"Inicio"}),p.jsx(Ur,{to:"/planes",onClick:()=>e(!1),children:"Planes y precios"}),p.jsx(Ur,{to:"/contacto",onClick:()=>e(!1),children:"Contacto"}),n&&n.role==="admin"&&p.jsx(Ur,{to:"/admin",onClick:()=>e(!1),children:"Panel admin"}),!n&&p.jsx(Ur,{to:"/login",onClick:()=>e(!1),children:"Inicio de sesin"}),n&&p.jsxs(Ur,{to:"/mis-solicitudes",onClick:()=>e(!1),children:["Solicitudes",n.role!=="admin"&&a&&p.jsx("span",{className:"inline-block w-2 h-2 bg-red-600 rounded-full ml-2"})]}),n&&p.jsx("button",{onClick:()=>{r(),u("/"),e(!1)},className:"block w-full text-left px-4 py-3 text-sm text-slate-700 hover:bg-slate-50",children:"Cerrar sesin"})]})]})}const ni=({to:t,children:e})=>p.jsx(st,{to:t,className:"text-slate-700 hover:text-sky-600",children:e}),Ur=({to:t,onClick:e,children:n})=>p.jsx(st,{to:t,onClick:e,className:"block px-4 py-3 text-sm text-slate-700 hover:bg-slate-50",children:n});function M0({plan:t}){return p.jsxs("div",{className:"border border-slate-200 rounded-2xl p-6 shadow-sm flex flex-col",children:[p.jsx("h4",{className:"text-lg font-semibold mb-2",children:t.name}),p.jsx("p",{className:"text-2xl font-bold text-sky-600 mb-2",children:t.price}),p.jsx("p",{className:"text-sm text-slate-600 flex-1",children:t.details}),p.jsx(st,{to:`/planes/${t.slug}`,className:"mt-2 py-2 bg-gray-200 text-slate-700 rounded-md text-center hover:bg-gray-300",children:"Ver detalles"}),p.jsx(st,{to:`/solicitar/${t.slug}`,className:"mt-2 py-2 bg-sky-600 text-white rounded-md text-center hover:bg-sky-700",children:"Solicitar aqu"})]})}function yR(){return p.jsxs(p.Fragment,{children:[p.jsx("section",{className:"bg-gradient-to-br from-[#6792d6] via-[#86a7e5] to-[#c0d4ff]",children:p.jsxs("div",{className:"container mx-auto px-4 py-24 grid md:grid-cols-2 gap-8 items-center",children:[p.jsxs("div",{className:"text-white max-w-xl space-y-6",children:[p.jsx("h1",{className:"text-5xl font-extrabold",children:"Bienvenidos!"}),p.jsx("p",{className:"text-lg",children:"Expertos en desarrollo de aplicaciones y pginas web."}),p.jsxs("p",{children:["Fundamos ",p.jsx("strong",{children:"A Vission"})," para ofrecer soluciones digitales accesibles y personalizadas."]})]}),p.jsx("div",{className:"flex justify-center md:justify-end",children:p.jsx("img",{src:"/img/tagline.png",alt:"tagline",className:"max-w-sm md:max-w-md"})})]})}),p.jsxs("section",{className:"container mx-auto px-4 pt-16 pb-24",children:[p.jsx("h2",{className:"text-3xl font-bold text-center mb-12",children:"Planes recomendados"}),p.jsx("div",{className:"grid md:grid-cols-2 gap-8 max-w-4xl mx-auto mb-12",children:hR.map(t=>p.jsx(M0,{plan:t},t.slug))}),p.jsxs("p",{className:"text-center text-sm text-slate-600",children:["Para solicitar cualquiera de estos planes, complete el formulario y recibir respuesta en un plazo mximo de ",p.jsx("strong",{children:"5das laborables"}),"."]})]}),p.jsxs("section",{className:"container mx-auto px-4 py-16 bg-slate-50",children:[p.jsx("h2",{className:"text-3xl font-bold text-center mb-12",children:"Lo que opinan nuestros clientes"}),p.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:vR.map((t,e)=>p.jsxs("blockquote",{className:"bg-white rounded-2xl p-6 border border-slate-100 shadow relative",children:[p.jsxs("p",{className:"text-slate-600 mb-4",children:["",t.quote,""]}),p.jsx("footer",{className:"text-slate-900 font-semibold",children:t.name}),p.jsx("span",{className:"absolute -top-3 left-6 text-5xl text-sky-200 select-none",children:""})]},e))})]})]})}const vR=[{name:"Juan Prez  CEO de TiendaSmart",quote:"Gracias a A Vission nuestra tienda duplic las ventas."},{name:"Luca Gmez  FitLife App",quote:"Transformaron mi idea en una app increble."},{name:"Carlos Morales  Restaurante El Sabor",quote:"La nueva web nos trajo ms clientes."}];function $u({title:t,img:e,plans:n}){return p.jsxs("div",{className:"space-y-8",children:[p.jsx("h3",{className:"text-2xl font-bold text-center",children:t}),p.jsx("div",{className:"flex justify-center mb-8",children:p.jsx("img",{src:e,alt:t,className:"max-w-4xl shadow rounded-xl"})}),p.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:n.map(r=>p.jsx(M0,{plan:r},r.slug))})]})}function _R(){return p.jsxs("section",{className:"container mx-auto px-4 py-16 space-y-24",children:[p.jsx($u,{title:"Aplicaciones",img:"/img/app.png",plans:Zi}),p.jsx($u,{title:"Sitios web",img:"/img/web.png",plans:zd}),p.jsx($u,{title:"Extras",img:"/img/Extras.png",plans:b0}),p.jsxs("p",{className:"text-center text-sm text-slate-600 mt-8",children:["Envia tu solicitud y te contestaremos en un plazo mximo de ",p.jsx("strong",{children:"5das laborables"}),"."]})]})}function ER(){const{user:t}=js(),{slug:e}=Bv(),[n,r]=O.useState({email:(t==null?void 0:t.email)||"",phone:(t==null?void 0:t.phone)||"",name:(t==null?void 0:t.name)||"",lastname:(t==null?void 0:t.lastname)||"",message:""}),[s,i]=O.useState(!1),a=O.useRef(null),l=_r.find(A=>A.slug===e);if(!l)return p.jsxs("section",{className:"container mx-auto px-4 py-16 text-center",children:[p.jsx("p",{className:"text-lg",children:"Plan no encontrado."}),p.jsx(st,{to:"/planes",className:"text-sky-600 hover:underline",children:"Volver a planes"})]});function u(A){r({...n,[A.target.name]:A.target.value})}const h=j0,f=aR,m=L0;function v(A){A.preventDefault();const R=Date.now().toString().slice(-6),N=document.createElement("input");N.type="hidden",N.name="ticket",N.value=R,a.current.appendChild(N),bc.sendForm(h,f,a.current,m).then(()=>{const V={ticket:R,plan:l.name,email:n.email,phone:n.phone,name:n.name,lastname:n.lastname,message:n.message};return bc.send(h,lR,V,m)}).then(()=>{const V=cn();V.push({id:Date.now().toString(),ticket:R,plan:l.slug,userEmail:n.email,phone:n.phone,name:n.name,lastname:n.lastname,message:n.message,step:0,details:{}}),sl(V),i(!0)}).catch(V=>{console.error(V),alert("Error exacto: "+((V==null?void 0:V.text)||V))})}return p.jsxs("section",{className:"container mx-auto px-4 py-16 max-w-lg",children:[p.jsxs("h2",{className:"text-2xl font-bold mb-6 text-center",children:["Solicitar: ",l.name]}),s?p.jsxs("div",{className:"text-center space-y-4",children:[p.jsx("p",{className:"text-lg font-semibold",children:"Solicitud enviada correctamente!"}),p.jsx(st,{to:"/",className:"text-sky-600 hover:underline",children:"Volver al inicio"})]}):p.jsxs("form",{ref:a,onSubmit:v,className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium",children:"Plan seleccionado"}),p.jsx("input",{type:"text",value:l.name,readOnly:!0,className:"mt-1 w-full rounded-md bg-slate-100 border-slate-300"}),p.jsx("input",{type:"hidden",name:"solicitud",value:l.name}),p.jsx("input",{type:"hidden",name:"to_name",value:`${n.name} ${n.lastname}`.trim()}),p.jsx("input",{type:"hidden",name:"to_email",value:"website@a2vission.com"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium",children:"Email"}),p.jsx("input",{type:"email",name:"email",value:n.email,onChange:u,required:!0,className:"mt-1 w-full rounded-md border-slate-300"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium",children:"Telfono"}),p.jsx("input",{type:"tel",name:"phone",value:n.phone,onChange:u,required:!0,className:"mt-1 w-full rounded-md border-slate-300"})]}),p.jsxs("div",{className:"flex space-x-4",children:[p.jsxs("div",{className:"flex-1",children:[p.jsx("label",{className:"block text-sm font-medium",children:"Nombre"}),p.jsx("input",{type:"text",name:"name",value:n.name,onChange:u,required:!0,className:"mt-1 w-full rounded-md border-slate-300"})]}),p.jsxs("div",{className:"flex-1",children:[p.jsx("label",{className:"block text-sm font-medium",children:"Apellidos"}),p.jsx("input",{type:"text",name:"lastname",value:n.lastname,onChange:u,required:!0,className:"mt-1 w-full rounded-md border-slate-300"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium",children:"Descripcin del proyecto"}),p.jsx("textarea",{name:"message",rows:"4",value:n.message,onChange:u,className:"mt-1 w-full rounded-md border-slate-300"})]}),p.jsxs("div",{className:"flex items-start space-x-2",children:[p.jsx("input",{type:"checkbox",required:!0,className:"mt-1"}),p.jsxs("span",{className:"text-sm",children:["Acepto las",p.jsx("a",{href:"/terms",className:"text-sky-600 hover:underline",children:"condiciones"}),"y la",p.jsx("a",{href:"/privacy",className:"text-sky-600 hover:underline",children:"poltica de privacidad"}),"."]})]}),l.details.includes("6 meses")&&p.jsxs("div",{className:"flex items-start space-x-2",children:[p.jsx("input",{type:"checkbox",required:!0,className:"mt-1",id:"permanence"}),p.jsx("span",{className:"text-sm",children:"Acepto una permanencia mnima de 6 meses para este plan."})]}),p.jsx("button",{type:"submit",className:"w-full py-2 bg-sky-600 text-white rounded-md hover:bg-sky-700",children:"Enviar solicitud"})]})]})}function wR(){return p.jsxs("section",{className:"container mx-auto px-4 py-16 max-w-3xl space-y-8",children:[p.jsx("h2",{className:"text-3xl font-bold",children:"Contctanos"}),p.jsx("p",{children:"Escrbenos o llmanos y hablemos de tu proyecto."}),p.jsxs("div",{className:"space-y-2 text-lg",children:[p.jsxs("p",{children:[p.jsx("strong",{children:"Email:"})," ",p.jsx("a",{href:"mailto:website@a2vission.com",className:"text-sky-600 hover:underline",children:"website@a2vission.com"})]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Telfono:"})," ",p.jsx("a",{href:"tel:+34666876120",className:"text-sky-600 hover:underline",children:"+34 666 876 120"})]})]}),p.jsx("hr",{className:"my-8"}),p.jsx(F0,{})]})}function TR(){const[t,e]=O.useState({email:"",password:"",phone:"",name:"",lastname:"",address:""}),n=Sl(),r=i=>e({...t,[i.target.name]:i.target.value}),s=i=>{i.preventDefault();const a=t.password;if(!/(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{8,}/.test(a))return alert("La contrasea debe tener mnimo 8 caracteres, incluir maysculas, minsculas y nmeros.");t.email=t.email.trim(),t.name=t.name.trim(),t.lastname=t.lastname.trim(),t.address=t.address.trim();const l=tr();if(l.find(u=>u.email===t.email))return alert("Ese correo ya existe.");l.push({...t,role:"user",blocked:!1}),Ji(l),alert("Cuenta creada, inicia sesin."),n("/login")};return p.jsxs("section",{className:"container mx-auto px-4 py-16 max-w-md",children:[p.jsx("h2",{className:"text-2xl font-bold mb-6 text-center",children:"Registro"}),p.jsxs("form",{onSubmit:s,className:"space-y-4",children:[p.jsx("input",{name:"email",type:"email",required:!0,placeholder:"Email",value:t.email,onChange:r,className:"w-full border rounded p-2"}),p.jsx("input",{name:"password",type:"password",required:!0,placeholder:"Contrasea",value:t.password,onChange:r,className:"w-full border rounded p-2"}),p.jsx("input",{name:"phone",required:!0,placeholder:"Telfono",value:t.phone,onChange:r,className:"w-full border rounded p-2"}),p.jsx("input",{name:"name",required:!0,placeholder:"Nombre",value:t.name,onChange:r,className:"w-full border rounded p-2"}),p.jsx("input",{name:"lastname",required:!0,placeholder:"Apellidos",value:t.lastname,onChange:r,className:"w-full border rounded p-2"}),p.jsx("input",{name:"address",required:!0,placeholder:"Direccin",value:t.address,onChange:r,className:"w-full border rounded p-2"}),p.jsx("button",{className:"w-full bg-sky-600 text-white rounded py-2",children:"Registrarse"})]})]})}function xR(){const[t,e]=O.useState({email:"",password:""}),n=Sl(),{login:r}=js(),s=a=>e({...t,[a.target.name]:a.target.value}),i=a=>{a.preventDefault();const u=tr().find(h=>h.email===t.email&&h.password===t.password);if(u&&u.blocked)return alert("Cuenta bloqueada. Contacte con soporte.");if(!u)return alert("Credenciales incorrectas");r(u),alert(`Bienvenido ${u.role==="admin"?"administrador":"usuario"}`),n("/")};return p.jsx("section",{className:"container mx-auto px-4 py-16 flex justify-center",children:p.jsxs("div",{className:"bg-white shadow rounded-2xl p-8 w-full max-w-md",children:[p.jsx("h2",{className:"text-2xl font-bold mb-6 text-center",children:"Iniciar sesin"}),p.jsxs("form",{onSubmit:i,className:"space-y-4",children:[p.jsx("input",{type:"email",name:"email",value:t.email,onChange:s,required:!0,placeholder:"Email",className:"w-full border rounded p-2"}),p.jsx("input",{type:"password",name:"password",value:t.password,onChange:s,required:!0,placeholder:"Contrasea",className:"w-full border rounded p-2"}),p.jsx("button",{className:"w-full bg-sky-600 text-white rounded py-2",children:"Entrar"})]}),p.jsxs("p",{className:"text-sm text-center mt-4",children:["No tienes cuenta?"," ",p.jsx(st,{to:"/register",className:"text-sky-600 hover:underline",children:"Regstrate"})]})]})})}function F0(){return p.jsxs("ul",{className:"space-y-2 list-disc list-inside",children:[p.jsx("li",{children:p.jsx(st,{to:"/privacy",className:"text-sky-600 hover:underline",children:"Poltica de privacidad"})}),p.jsx("li",{children:p.jsx(st,{to:"/refund",className:"text-sky-600 hover:underline",children:"Poltica de devolucin"})}),p.jsx("li",{children:p.jsx(st,{to:"/terms",className:"text-sky-600 hover:underline",children:"Clusulas y condiciones"})})]})}function SR(){const{user:t,login:e}=js(),[n,r]=O.useState(t),[s,i]=O.useState(""),a=h=>r({...n,[h.target.name]:h.target.value}),l=()=>{const h=tr().map(f=>f.email===t.email?{...f,...n}:f);Ji(h),e({...t,...n}),alert("Perfil actualizado")},u=()=>{if(!s)return;const h=tr().map(f=>f.email===t.email?{...f,password:s}:f);Ji(h),bc.send(j0,uR,{to_email:t.email,new_password:s},L0).catch(f=>console.error("Email PW:",f)),alert("Contrasea cambiada (se ha enviado un email de aviso)."),i("")};return p.jsxs("section",{className:"container mx-auto px-4 py-16 max-w-md space-y-6",children:[p.jsx("h2",{className:"text-2xl font-bold text-center",children:"Mi perfil"}),p.jsxs("div",{className:"space-y-3",children:[p.jsx("input",{value:n.email,disabled:!0,className:"w-full border rounded p-2 bg-slate-100"}),p.jsx("input",{name:"phone",value:n.phone,onChange:a,placeholder:"Telfono",className:"w-full border rounded p-2"}),p.jsx("input",{name:"name",value:n.name,onChange:a,placeholder:"Nombre",className:"w-full border rounded p-2"}),p.jsx("input",{name:"lastname",value:n.lastname,onChange:a,placeholder:"Apellidos",className:"w-full border rounded p-2"}),p.jsx("input",{name:"address",value:n.address,onChange:a,placeholder:"Direccin",className:"w-full border rounded p-2"}),p.jsx("button",{onClick:l,className:"w-full bg-sky-600 text-white rounded py-2",children:"Guardar cambios"})]}),p.jsxs("div",{className:"space-y-3",children:[p.jsx("input",{type:"password",value:s,onChange:h=>i(h.target.value),placeholder:"Nueva contrasea",className:"w-full border rounded p-2"}),p.jsx("button",{onClick:u,className:"w-full bg-sky-600 text-white rounded py-2",children:"Cambiar contrasea"})]})]})}function IR({step:t,onClickStep:e}){return p.jsx("div",{className:"flex items-center space-x-2 mt-2",children:an.map((n,r)=>p.jsxs("div",{className:"flex items-center",children:[p.jsx("button",{type:"button",onClick:()=>e(r),className:"focus:outline-none",children:p.jsx("span",{className:`block w-4 h-4 rounded-full ${r<t?"bg-sky-600":r===t?"bg-sky-400 animate-pulse":"bg-slate-300"}`})}),r<an.length-1&&p.jsx("div",{className:`w-8 h-0.5 ${r<t?"bg-sky-600":"bg-slate-300"}`})]},r))})}function AR(){const[t,e]=O.useState([]),[n,r]=O.useState({}),[s,i]=O.useState({}),a=(u,h)=>{r(v=>{var A;return{...v,[u]:{...v[u]||{},[h]:!((A=v[u])!=null&&A[h])}}});let f=cn(),m=!1;f=f.map(v=>v.id===u&&v.unread?(m=!0,{...v,unread:!1}):v),m&&(sl(f),e(f))},l=u=>{const h=cn().filter(f=>f.id!==u);sl(h),window.location.reload()};return O.useEffect(()=>{cn().then(e);const u=setInterval(()=>cn().then(e),1e3);return()=>clearInterval(u)},[]),p.jsxs("section",{className:"container mx-auto px-4 py-16 space-y-6",children:[p.jsx("h2",{className:"text-3xl font-bold text-center",children:"Mis solicitudes"}),t.length===0&&p.jsx("p",{className:"text-center text-slate-500",children:"No hay solicitudes."}),t.map(u=>{var h;return p.jsxs("div",{className:"border rounded p-4",children:[p.jsxs("div",{className:"flex items-center",children:[p.jsx("h4",{className:"font-semibold",children:(h=_r.find(f=>f.slug===u.plan))==null?void 0:h.name}),u.unread&&p.jsx("span",{className:"inline-block w-2 h-2 bg-red-600 rounded-full ml-2"})]}),u.step>=0?p.jsxs(p.Fragment,{children:[p.jsx("p",{className:"text-xs text-slate-500",children:an[u.step]}),p.jsx(IR,{step:u.step,onClickStep:f=>a(u.id,f)}),an.map((f,m)=>{var v,A,R,N,V;return(v=n[u.id])!=null&&v[m]?p.jsxs("div",{className:"mt-2 p-2 bg-slate-50 rounded",children:[p.jsxs("p",{className:"text-sm font-semibold",children:["Detalles de ",f,""]}),(R=(A=u.details)==null?void 0:A[m])!=null&&R.message?p.jsxs("p",{className:"text-sm mb-1",children:[p.jsx("strong",{children:"Mensaje admin:"})," ",u.details[m].message]}):p.jsx("p",{className:"text-sm italic text-slate-500",children:"Sin mensaje para este paso."}),((V=(N=u.details)==null?void 0:N[m])==null?void 0:V.attachment)&&p.jsx("a",{href:u.details[m].attachment,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-sky-600 hover:underline",children:"Descargar archivo"})]},m):null})]}):p.jsx("p",{className:"text-xs text-red-600",children:"Rechazado"}),u.step<0&&p.jsx("button",{onClick:()=>l(u.id),className:"mt-2 bg-slate-500 text-white text-sm px-3 py-1 rounded",children:"Eliminar solicitud"})]},u.id)})]})}function CR(){const[t,e]=O.useState([]);return O.useEffect(()=>{il().then(e).catch(console.error)},[]),p.jsxs("section",{className:"container mx-auto px-4 py-16 space-y-6",children:[p.jsx("h2",{className:"text-3xl font-bold text-center",children:"Mis suscripciones"}),t.length===0&&p.jsx("p",{className:"text-center text-slate-500",children:"No tienes suscripciones activas."}),t.map(n=>{const r=_r.find(u=>u.slug===n.plan),s=new Date(n.start),i=new Date(s);i.setMonth(i.getMonth()+6);const l=new Date>i;return p.jsxs("div",{className:"border rounded p-4 space-y-2",children:[p.jsx("h4",{className:"font-semibold",children:r==null?void 0:r.name}),p.jsxs("p",{className:"text-sm text-slate-600",children:["Precio: ",r==null?void 0:r.price]}),p.jsxs("p",{className:"text-sm text-slate-600",children:["Inicio: ",s.toLocaleDateString(),p.jsx("br",{}),"Fin permanencia: ",i.toLocaleDateString()]}),p.jsx("button",{disabled:!l,className:`px-4 py-1 rounded ${l?"bg-red-600 text-white":"bg-slate-300 text-slate-500"}`,onClick:()=>{l&&alert("Se procesar la cancelacin al final del periodo pagado.")},children:"Cancelar suscripcin"})]},n.id)})]})}function RR(){return p.jsx("footer",{className:"bg-slate-900 text-slate-300 text-sm py-8 mt-16",children:p.jsxs("div",{className:"container mx-auto px-4 flex flex-col md:flex-row md:justify-between space-y-6 md:space-y-0",children:[p.jsxs("div",{className:"space-y-1",children:[p.jsxs("p",{children:["Email:"," ",p.jsx("a",{href:"mailto:website@a2vission.com",className:"hover:underline text-white",children:"website@a2vission.com"})]}),p.jsxs("p",{children:["Telfono:"," ",p.jsx("a",{href:"tel:+34666876120",className:"hover:underline text-white",children:"+34 666 876 120"})]}),p.jsx("p",{className:"text-slate-300 text-sm",children:"Horario: 09:00  18:00"})]}),p.jsx(F0,{})]})})}function PR(){const{user:t}=js(),e=t&&t.role==="admin",[n,r]=O.useState([]),[s,i]=O.useState("requests"),[a,l]=O.useState(""),[u,h]=O.useState({}),[f,m]=O.useState({}),[v,A]=O.useState({}),[R,N]=O.useState(""),[V,T]=O.useState(Zi[0].slug);O.useEffect(()=>{cn().then(r)},[]),O.useEffect(()=>{const U=setInterval(()=>{cn().then(r)},1e3);return()=>clearInterval(U)},[]);const _=U=>{sl(U),r(U)},I=(U,ae)=>h({...u,[U]:ae}),j=(U,ae)=>m({...f,[U]:ae}),z=U=>{const ae=u[U]||"",he=f[U]||"",de=n.map(M=>{if(M.id===U&&M.step<an.length-1){const W=M.step+1,X={...M.details||{}};X[W]={message:ae,attachment:he};let ue=M.unread;return ae&&ae.trim()!==""&&(ue=!0),{...M,step:W,details:X,unread:ue}}return M});_(de),I(U,""),j(U,"")},$=U=>{const ae=n.filter(he=>he.id!==U);_(ae)},w=U=>{const ae=n.map(he=>{if(he.id===U){const de={...he.details||{}};de[he.step]={message:u[U]||"",attachment:f[U]||null};let M=he.unread;return(u[U]||"").trim()!==""&&(M=!0),{...he,step:-1,details:de,unread:M}}return he});_(ae),I(U,""),j(U,"")},y=()=>{if(!a)return;const U=tr().map(ae=>ae.email===a?{...ae,role:"admin"}:ae);Ji(U),alert("Usuario marcado como administrador (localStorage)."),l("")},E=()=>{if(!R||!V){alert("Completa todos los campos.");return}const U=il();U.push({id:Date.now().toString(),email:R,plan:V,start:new Date().toISOString()}),fg(U),alert("Suscripcin asignada."),N(""),T(Zi[0].slug)};if(!e)return p.jsx("section",{className:"container mx-auto px-4 py-16 text-center",children:p.jsx("p",{children:"No autorizado"})});function S(){return p.jsx("aside",{className:"w-64 border-r p-4",children:p.jsxs("nav",{className:"space-y-2",children:[p.jsx("button",{onClick:()=>i("requests"),className:"block w-full text-left",children:"Solicitudes"}),p.jsx("button",{onClick:()=>i("subscriptions"),className:"block w-full text-left",children:"Suscripciones"}),p.jsx("button",{onClick:()=>i("users"),className:"block w-full text-left",children:"Usuarios"}),p.jsx("a",{href:"https://dashboard.stripe.com/login",target:"_blank",rel:"noopener noreferrer",className:"block w-full text-left",children:"Pagos (Stripe)"})]})})}function C(){return p.jsxs("div",{className:"space-y-8",children:[p.jsxs("div",{className:"border rounded p-4 space-y-2",children:[p.jsx("h3",{className:"font-semibold",children:"Aadir usuario admin"}),p.jsxs("div",{className:"flex space-x-2",children:[p.jsx("input",{type:"email",value:a,onChange:U=>l(U.target.value),placeholder:"correo@ejemplo.com",className:"flex-1 border rounded p-2"}),p.jsx("button",{className:"bg-sky-600 text-white px-4 rounded",onClick:y,children:"Aadir"})]})]}),p.jsxs("div",{className:"border rounded p-4 space-y-2",children:[p.jsx("h3",{className:"font-semibold",children:"Asignar suscripcin a usuario"}),p.jsxs("div",{className:"flex space-x-2",children:[p.jsx("input",{type:"email",placeholder:"Email del usuario",value:R,onChange:U=>N(U.target.value),className:"flex-1 border rounded p-2"}),p.jsx("select",{value:V,onChange:U=>T(U.target.value),className:"border rounded p-2",children:_r.map(U=>p.jsx("option",{value:U.slug,children:U.name},U.slug))}),p.jsx("button",{onClick:E,className:"bg-sky-600 text-white px-4 rounded",children:"Asignar"})]})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsx("h3",{className:"font-semibold",children:"Solicitudes"}),n.length===0&&p.jsx("p",{className:"text-slate-500 text-sm",children:"No hay solicitudes."}),n.map(U=>{var ae;return p.jsxs("div",{className:"border rounded p-4 space-y-2",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsxs("span",{children:[(ae=_r.find(he=>he.slug===U.plan))==null?void 0:ae.name," "," ",U.step>=0?`paso ${U.step+1}/${an.length}`:"Rechazado"]}),p.jsxs("div",{className:"space-x-2",children:[U.step>=0&&U.step<an.length-1&&p.jsx("button",{onClick:()=>z(U.id),className:"text-sm bg-sky-600 text-white px-2 py-1 rounded",children:"Avanzar"}),U.step===an.length-1&&p.jsx("button",{onClick:()=>$(U.id),className:"text-sm bg-green-600 text-white px-2 py-1 rounded",children:"Finalizar"}),U.step>=0&&p.jsx("button",{onClick:()=>w(U.id),className:"text-sm bg-red-600 text-white px-2 py-1 rounded",children:"Rechazar"}),U.step===-1&&p.jsx("button",{onClick:()=>$(U.id),className:"text-sm bg-slate-500 text-white px-2 py-1 rounded",children:"Eliminar"})]})]}),p.jsx("p",{className:"text-xs text-slate-600",children:U.step>=0?an[U.step]:"Rechazado"}),p.jsxs("p",{className:"text-xs",children:["N solicitud: ",p.jsx("strong",{children:U.ticket}),p.jsx("br",{}),"Email: ",U.userEmail,"  Tel: ",U.phone,p.jsx("br",{}),U.name," ",U.lastname,p.jsx("br",{}),U.message]}),p.jsxs("button",{onClick:()=>A({...v,[U.id]:!v[U.id]}),className:"text-sm underline flex items-center",children:[v[U.id]?"Ocultar detalles":"Ver detalles",Object.keys(U.details||{}).length>0&&p.jsx("span",{className:"ml-1 text-blue-600",title:"Tienes nuevos mensajes o archivos",children:""})]}),p.jsxs("div",{className:v[U.id]?"":"hidden",children:[U.step>=0&&p.jsxs(p.Fragment,{children:[p.jsx("textarea",{value:u[U.id]||"",onChange:he=>I(U.id,he.target.value),placeholder:"Mensaje opcional al usuario",className:"w-full border rounded p-2 text-sm"}),p.jsx("button",{onClick:()=>z(U.id),className:"mt-2 text-sm bg-blue-600 text-white px-2 py-1 rounded",children:"Guardar y enviar"})]}),U.step!==1&&U.step!==2&&p.jsx("input",{type:"file",accept:"*",onChange:he=>{const de=he.target.files[0];if(de){const M=new FileReader;M.onload=W=>j(U.id,W.target.result),M.readAsDataURL(de)}},className:"text-sm"})]})]},U.id)})]})]})}function P(){const[U,ae]=O.useState(""),[he,de]=O.useState([]);O.useEffect(()=>{tr().then(de).catch(console.error)},[]);const M=async Y=>{await Ji(Y),de(Y)},W=async Y=>{const me=he.map(Qe=>Qe.email===Y?{...Qe,blocked:!Qe.blocked}:Qe);await M(me)},X=async Y=>{const me=he.filter(Qe=>Qe.email!==Y);await M(me)},ue=he.filter(Y=>Y.email.toLowerCase().includes(U.toLowerCase()));return p.jsxs("div",{className:"space-y-4",children:[p.jsx("h3",{className:"font-semibold",children:"Usuarios registrados"}),p.jsx("input",{type:"text",placeholder:"Buscar correo",value:U,onChange:Y=>ae(Y.target.value),className:"border rounded p-2 w-full md:w-80"}),ue.length===0&&p.jsx("p",{className:"text-sm text-slate-500",children:"Sin resultados."}),ue.map(Y=>p.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between border rounded p-2 mt-2",children:[p.jsxs("span",{children:[Y.email," (",Y.role,") ",Y.blocked&&p.jsx("span",{className:"text-red-600",children:"(bloqueado)"})]}),p.jsxs("div",{className:"space-x-2 mt-2 md:mt-0",children:[p.jsx("button",{onClick:()=>W(Y.email),className:`px-2 py-1 rounded text-white ${Y.blocked?"bg-green-600":"bg-yellow-600"}`,children:Y.blocked?"Desbloquear":"Bloquear"}),p.jsx("button",{onClick:()=>X(Y.email),className:"px-2 py-1 rounded bg-red-600 text-white",children:"Eliminar"})]})]},Y.email))]})}function x(){const[U,ae]=O.useState([]);O.useEffect(()=>{il().then(ae).catch(console.error)},[]);const he=de=>{const M=U.filter(W=>W.id!==de);fg(M),ae(M)};return p.jsxs("div",{children:[p.jsx("h3",{className:"font-semibold",children:"Suscripciones asignadas"}),U.length===0&&p.jsx("p",{className:"text-sm text-slate-500",children:"No hay suscripciones."}),U.map(de=>{var M;return p.jsxs("div",{className:"flex justify-between py-1",children:[p.jsxs("span",{children:[de.email,"  ",(M=_r.find(W=>W.slug===de.plan))==null?void 0:M.name]}),p.jsx("button",{onClick:()=>he(de.id),className:"text-red-600 text-sm",children:"Eliminar"})]},de.id)})]})}return p.jsxs("section",{className:"container mx-auto px-4 py-16 space-y-8",children:[p.jsx("h2",{className:"text-3xl font-bold text-center mb-6",children:"Panel de administracin"}),p.jsxs("div",{className:"flex",children:[p.jsx(S,{}),p.jsxs("div",{className:"flex-1 px-4",children:[s==="requests"&&p.jsx(C,{}),s==="subscriptions"&&p.jsx(x,{}),s==="users"&&p.jsx(P,{})]})]})]})}function kR(){const{user:t}=js(),{slug:e}=Bv(),n=_r.find(u=>u.slug===e),r=`plan_cond_${e}`,[s,i]=O.useState(localStorage.getItem(r)||n&&n.details),a=(t==null?void 0:t.role)==="admin",l=()=>{localStorage.setItem(r,s),alert("Condiciones guardadas")};return n?p.jsxs("section",{className:"container mx-auto px-4 py-16 max-w-xl space-y-6",children:[p.jsx("h2",{className:"text-2xl font-bold",children:n.name}),p.jsx("p",{className:"text-xl text-sky-600",children:n.price}),p.jsx("label",{className:"block text-sm font-medium",children:"Condiciones:"}),a?p.jsx("textarea",{className:"w-full border rounded p-2",rows:4,value:s,onChange:u=>i(u.target.value)}):p.jsx("p",{className:"text-sm text-slate-700 whitespace-pre-line",children:s}),a&&p.jsx("button",{onClick:l,className:"mt-2 bg-green-600 text-white px-4 py-2 rounded",children:"Guardar condiciones"}),p.jsx(st,{to:`/solicitar/${e}`,className:"block mt-4 py-2 bg-sky-600 text-white text-center rounded hover:bg-sky-700",children:"Solicitar este plan"})]}):p.jsxs("section",{className:"container mx-auto px-4 py-16 text-center",children:[p.jsx("p",{className:"text-lg",children:"Plan no encontrado."}),p.jsx(st,{to:"/planes",className:"text-sky-600 hover:underline",children:"Volver a planes"})]})}qu.createRoot(document.getElementById("root")).render(p.jsx(Sg.StrictMode,{children:p.jsx(mR,{})}));
